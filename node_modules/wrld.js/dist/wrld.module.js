import*as e from"leaflet";import t,{Icon as n}from"leaflet";function i(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})}),e}Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],o=0;o<n;o++)if(e.call(i,t[o],o,t))return o;return-1}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(e.call(o,t=n[r],r,n))return t});const o=(e,t)=>void 0===e.options?null:t in e.options?e.options[t]:null,r=e=>{var t=o(e,"indoorMapId");return""===t?null:t},a=e=>o(e,"indoorMapFloorId"),s=e=>{var t=o(e,"indoorMapFloorIndex");return null!==t?t:o(e,"indoorFloorIndex")},l=(e,t,n,i)=>{n in e&&(i in t||(t[i]=e[n]))},u=e=>function(){return new e(...[].slice.call(arguments))},h=t.Popup.extend({options:{elevation:0,closeWhenMovedOffscreen:!1},_onScreen:!1,getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,this},getCloseWhenMovedOffscreen:function(){return this.options.closeWhenMovedOffscreen},setCloseWhenMovedOffscreen:function(e){return this.options.closeWhenMovedOffscreen=e,this},_updateContent:function(){if(!this._content)return;const e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;let n=!0;if(t.outerHTML&&t.outerHTML===e.innerHTML&&(n=!1),"string"==typeof t)e.innerHTML=t;else if(!e.hasChildNodes()||n){for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan(),this.options.closeWhenMovedOffscreen&&(this._onScreen&&this._checkOutOfBounds()?(this._onScreen=!1,this._close()):this._onScreen=!this._checkOutOfBounds()))},_updatePosition:function(){if(!this._map)return;const e=this._map.latLngsForLayer(this),n=this._map.latLngToLayerPoint(e[0]);let i=t.point(this.options.offset);const o=this._getAnchor();o.x=Math.round(o.x),o.y=Math.round(o.y),this._zoomAnimated?t.DomUtil.setPosition(this._container,n.add(o)):i=i.add(n).add(o);const r=this._containerBottom=-i.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+i.x,s=Math.round(r)+"px",l=Math.round(a)+"px";t.DomUtil.getStyle(this._container,"left")!==l&&(this._container.style.left=l),t.DomUtil.getStyle(this._container,"bottom")!==s&&(this._container.style.bottom=s)},_checkOutOfBounds:function(){const e=this._container.getBoundingClientRect(),t=e.bottom-e.top,n=e.right-e.left,i=this._map._container.getBoundingClientRect();return e.bottom>i.bottom+t/2||e.top<i.top-t/2||e.right>i.right+n/2||e.left<i.left-n/2}}),d=u(h);class p{constructor(){this.x=void 0,this.y=void 0,this.z=void 0;var e=[].slice.call(arguments);if("number"==typeof e[0]){const[t,n,i]=e;this.x=t,this.y=n,this.z=i||0}else{const t=e[0];this.x=Array.isArray(t)?t[0]:t.x,this.y=Array.isArray(t)?t[1]||0:t.y,this.z=Array.isArray(t)?t[2]||0:t.z}}toPoint(){return t.point(this.x,this.y)}}class c{constructor(){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0;var e=[].slice.call(arguments);if("number"==typeof e[0]){const[t,n,i,o]=e;this.x=t,this.y=n,this.z=i||0,this.w=o||1}else{const t=e[0];this.x=Array.isArray(t)?t[0]:t.x,this.y=Array.isArray(t)?t[1]:t.y,this.z=Array.isArray(t)?t[2]||0:t.z,this.w=Array.isArray(t)?t[3]||1:t.w}}}const m=[27428700,14720762,8e6,4512909,2087317,1248854,660556,351205,185652,83092,41899,21377,11294,5818,3106,1890,1300,821,500,300,108,58,31,17,9,5],g=(e,t,n)=>e+n*(t-e),f=(e,t)=>{const n=m.findIndex(n=>t(e,n));return-1===n?m.length-1:n};var _={__proto__:null,Vector3:p,Vector4:c,zoomToDistance:e=>{let t=e;t<0?t=0:t>=m.length&&(t=m.length-1);const n=Math.floor(t),i=Math.ceil(t);return g(m[n],m[i],t-n)},distanceToZoom:e=>{const t=m.length-1;e<m[t]&&(e=m[t]),e>m[0]&&(e=m[0]);const n=(e=>{const t=f(e,(e,t)=>e>t);return Math.max(0,t-1)})(e),i=(e=>f(e,(e,t)=>e>=t))(e);return n===i?i:g(i,n,(e-m[i])/(m[n]-m[i]))}};const b=t.point(-100,-100),v=t.latLng(0,0),y=e=>{const t=e.lat*Math.PI/180,n=e.lng*Math.PI/180,i=Math.cos(t)*Math.cos(n),o=Math.cos(t)*Math.sin(n),r=Math.sin(t);return new p(i,o,r)};t.Renderer.include({_updateTransform:()=>{}});const I=t.Map.extend({initialize:function(e,n,i,o,r,a,s,l,u,h,d,p,c,m,g,f,_,b,v,y,I,M){this._browserWindow=e,this._onRemoveCallback=o,this._cameraModule=r,this._precacheModule=a,this._polygonModule=u,this._polylineModule=h,this._layerPointMappingModule=d,this._frameRateModule=M,this.themes=s,this.indoors=l,this.routes=p,this.rendering=c,this.buildings=m,this.props=g,this.indoorMapEntities=f,this.indoorMapFloorOutlines=_,this.blueSphere=b,this.versionModule=y,this.heatmaps=I,this._mapRuntimeModule=v,this._layersOnMap={},this._spacesApi=null,this._ready=!1,this._viewInitialized=!1,t.Map.prototype.initialize.call(this,n,i),this.dragging.disable(),this.touchZoom.disable(),this.doubleClickZoom.disable(),this.scrollWheelZoom.disable(),this.boxZoom.disable(),this.keyboard.disable(),this.attributionControl.setPrefix("<a href='http://leafletjs.com' title='A JS library for interactive maps' target='_blank'>Leaflet</a>"),this.attributionControl.addAttribution("3D Maps &copy; <a href='https://www.wrld3d.com' target='_blank'>WRLD</a> and <a href='https://www.wrld3d.com/legal/' target='_blank'>partners</a>")},_initEvents:function(e,n){if(!t.DomEvent||!n)return;this._targets={},this._targets[t.stamp(n)]=this;const i=e?"off":"on";t.DomEvent[i](n,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),t.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&t.DomEvent[i](this._browserWindow,"resize",this._onResize,this),t.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)},_handleDOMEvent:function(e){if(t.Map.prototype._handleDOMEvent.call(this,e),"contextmenu"===e.type&&t.DomEvent.preventDefault(e),"mousedown"===e.type){let n=e.target;for(;n&&"string"==typeof n.className&&"wrld-map-container"!==n.className;){if(-1!==n.className.indexOf("leaflet-marker")){t.DomEvent.stopPropagation(e);break}n=n.parentNode}}},addLayer:function(e){const n=t.stamp(e);return n in this._layersOnMap||(this._createPointMapping(e),this._layersOnMap[n]=e,t.Map.prototype.addLayer.call(this,e)),this},removeLayer:function(e){const n=t.stamp(e);return n in this._layersOnMap?(this._removePointMapping(e),t.Map.prototype.removeLayer.call(this,e),delete this._layersOnMap[n],this):this},_removeAllLayers:function(){Object.keys(this._layersOnMap).forEach(e=>{const t=this._layersOnMap[e];void 0!==t&&this.removeLayer(t)})},onInitialized:function(e){this._spacesApi=e.spacesApi,this._ready=!0;const t=this.getPanes();t.mapPane.style.zIndex="10",t.mapPane.style.pointerEvents="auto",t.overlayPane.style.pointerEvents="none",this.fire("initialize")},onInitialStreamingCompleted:function(){this.fire("initialstreamingcomplete")},latLngToLayerPoint:function(e){return this._ready?this._spacesApi?.worldToScreen(e).toPoint():b},layerPointToLatLng:function(e){return(this._ready?this._spacesApi?.screenToWorldPoint(e):null)||v},latLngToContainerPoint:function(e){return this.latLngToLayerPoint(e)},containerPointToLatLng:function(e){return this.layerPointToLatLng(e)},containerPointToLayerPoint:function(e){return e},layerPointToContainerPoint:function(e){return e},latLngsForLayer:function(e){return this._layerPointMappingModule.latLngsForLayer(e)},_createPointMapping:function(e){this._layerPointMappingModule.createPointMapping(e)},_removePointMapping:function(e){this._layerPointMappingModule.removePointMapping(e)},_projectLatlngs:function(e,t,n,i){return this._layerPointMappingModule.projectLatlngs(e,t,n,i)},_updateZoom:function(){this._zoom=this.getZoom()},setView:function(e,n,i){this._viewInitialized||(t.Map.prototype.setView.call(this,e,n,{reset:!0}),this._viewInitialized=!0),n=void 0===n?this._zoom:this._limitZoom(n),e=this._limitCenter(t.latLng(e),n,this.options.maxBounds),"animate"in(i=i||{})||("object"==typeof i.pan&&"animate"in i.pan?i.animate=i.pan.animate:"object"==typeof i.zoom&&"animate"in i.zoom&&(i.animate=i.zoom.animate)),"allowInterruption"in i||("object"==typeof i.pan&&"allowInterruption"in i.pan?i.allowInterruption=i.pan.allowInterruption:"object"==typeof i.zoom&&"allowInterruption"in i.zoom&&(i.allowInterruption=i.zoom.allowInterruption));const o={...i,zoom:n,location:e};return this._cameraModule.setView(o),this},zoomIn:function(e){e=e||1;const t={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()+e,durationSeconds:.33,allowInterruption:!1};return t.zoom<=this.getMaxZoom()&&(this.fire("zoomstart"),this.once("transitionend",()=>{this.fire("zoomend")}),this._cameraModule.setView(t),this._updateZoom()),this},zoomOut:function(e){e=e||1;const t={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()-e,durationSeconds:.33,allowInterruption:!1};return t.zoom>=this.getMinZoom()&&(this.fire("zoomstart"),this.once("transitionend",()=>{this.fire("zoomend")}),this._cameraModule.setView(t),this._updateZoom()),this},setZoomAround:function(){return this},setViewVerticallyLocked:function(e){return this._cameraModule.setVerticallyLocked(e),this},fitBounds:function(e){return this._cameraModule.setViewToBounds({bounds:e}),this},fitWorld:function(){return this.setZoom(0)},panTo:function(e,n){return this._updateZoom(),t.Map.prototype.panTo.call(this,e,n)},panInsideBounds:function(e,n){return this._updateZoom(),t.Map.prototype.panInsideBounds.call(this,e,n)},panBy:function(){return this},getCenter:function(){return this._cameraModule.getCenter()},pause:function(){return this._mapRuntimeModule.Pause()},resume:function(){return this._mapRuntimeModule.Resume()},getZoom:function(){return this._zoom=this._cameraModule.getCurrentZoomLevel(),this._zoom},getBounds:function(){const e=this.layerPointToLatLng(new t.Point(0,0)),n=this.layerPointToLatLng(new t.Point(this.getContainer().clientWidth,0)),i=this.layerPointToLatLng(new t.Point(0,this.getContainer().clientHeight)),o=this.layerPointToLatLng(new t.Point(this.getContainer().clientWidth,this.getContainer().clientHeight));return t.latLngBounds([e,n,i,o])},locate:function(){return this},stopLocate:function(){return this},remove:function(){return this._removeAllLayers(),this._mapRuntimeModule.Remove(),this._onRemoveCallback(),this},openPopup:function(e,n,i){let o;if(e instanceof t.Popup)o=e;else{const t=e;o=new h(i).setLatLng(n).setContent(t)}return t.Map.prototype.openPopup.call(this,o,n,i)},_onUpdate:function(){this.fire("update")},_onDraw:function(){this._updateLayerVisibility(),this.eachLayer(e=>{e.update?e.update():e.redraw&&e.redraw()}),this.fire("draw")},getAltitudeAtLatLng:function(e){return this._ready?this._spacesApi?.getAltitudeAtLatLng(e):0},getMortonKeyAtLatLng:function(e){return this._ready?this._spacesApi?.getMortonKeyAtLatLng(e):null},getMortonKeyCenter:function(e){return this._ready?this._spacesApi?.getMortonKeyCenter(e):null},getMortonKeyCorners:function(e,t){return this._ready?this._spacesApi?.getMortonKeyCorners(e,t):null},getCameraDistanceToInterest:function(){return this._cameraModule.getDistanceToInterest()},getCameraPitchDegrees:function(){return this._cameraModule.getPitchDegrees()},setCameraTiltDegrees:function(e){return this._cameraModule.setTiltDegrees(e),this},getCameraTiltDegrees:function(){return this._cameraModule.getTiltDegrees()},getCameraHeadingDegrees:function(){return this._cameraModule.getHeadingDegrees()},setCameraHeadingDegrees:function(e){return this._cameraModule.setHeadingDegrees(e),this},getMaximumPrecacheRadius:function(){return this._precacheModule.getMaximumPrecacheRadius()},precache:function(e,t,n){return this.precacheWithDetailedResult(e,t,e=>{n(e.succeeded)})},precacheWithDetailedResult:function(e,t,n){return this._precacheModule.precache(e,t,n)},setMapCollapsed:function(e){return this.rendering.setMapCollapsed(e),this},isMapCollapsed:function(){return this.rendering.isMapCollapsed()},setDrawClearColor:function(e){return this.rendering.setClearColor(e),this},setTargetVSyncInterval:function(e){return this._frameRateModule.setTargetVSyncInterval(e),this},setThrottledTargetFrameInterval:function(e){return this._frameRateModule.setThrottledTargetFrameInterval(e),this},setIdleSecondsBeforeThrottle:function(e){return this._frameRateModule.setIdleSecondsBeforeThrottle(e),this},setThrottleWhenIdleEnabled:function(e){return this._frameRateModule.setThrottleWhenIdleEnabled(e),this},cancelFrameRateThrottle:function(){return this._frameRateModule.cancelThrottle(),this},isHardwareAccelerationAvailable:function(){const e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0},n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!!(n&&n instanceof WebGLRenderingContext)},_getAngleFromCameraToHorizon:function(){const e=this.getCameraDistanceToInterest(),t=6378100;return Math.acos(t/(t+e))},_isLatLngBehindEarth:function(e,t,n){const i=y(e);return t.x*i.x+t.y*i.y+t.z*i.z<Math.cos(n)},_updateLayerVisibility:function(){const e=Object.keys(this._layersOnMap),n=y(this.getCenter()),i=this._getAngleFromCameraToHorizon();e.forEach(e=>{const o=this._layersOnMap[e];if(void 0===o)return;const r=(e=>e.getLatLng?e.getLatLng():e.getBounds&&e.getBounds().isValid()?e.getBounds().getCenter():null)(o);if(null===r||o instanceof t.FeatureGroup)return;const a=this._isLatLngBehindEarth(r,n,i),s=this.hasLayer(o),l=this._isVisibleForCurrentMapState(o);s||a||!l?!s||!a&&l||t.Map.prototype.removeLayer.call(this,o):t.Map.prototype.addLayer.call(this,o)})},_isVisibleForCurrentMapState:function(e){const t=!this.indoors.isIndoors(),n=!(e=>null!==r(e))(e);return"currentMap"===e.options?.displayOption||(t?n:!n&&((e,t,n,i)=>{var l=(e=>o(e,"displayOption")||"currentFloor")(i);return"always"===l||"currentIndoorMap"===l&&e===r(i)||!("currentFloor"!==l||e!==r(i)||!((e,t,n)=>e===a(n)||t===s(n))(t,n,i))})(this.indoors.getActiveIndoorMap()?.getIndoorMapId(),this.indoors.getFloor()?.getFloorZOrder(),this.indoors.getFloor()?.getFloorIndex(),e))},_rawPanBy:function(){}});function M(e,t,n,i,o,r,a,s,l){var u=t,h=e,d=(e,t,n,i)=>{var o=h.createElement(t);for(var r in n)o.setAttribute(r,n[r]);for(var a in i)o.style[a]=i[a];return e.appendChild(o),o};this.mapContainer=(e=>{var t=d(e,"div",{class:"wrld-map-container",id:s},{position:"relative",width:"100%",height:"100%","line-height":"0px",padding:"0px",margin:"0px",overflow:"hidden",cursor:"default"}),n=document.createElement("style");return n.type="text/css",n.innerHTML=".leaflet-dragging .wrld-map-container { cursor: move; cursor: -webkit-grabbing; cursor: -moz-grabbing; }",document.head.appendChild(n),t.onmousedown=e=>{if(1===e.button)return!1},void 0===t.onwheel&&(t.onwheel=null),t})(n),this.loadingSpinnerIcon=(e=>d(this.mapContainer,"div",{},{position:"absolute",width:"18px",height:"18px","z-index":"20","background-image":"url('https://cdn-webgl.wrld3d.com/wrldjs/resources/loading_spinner.png')"}))(),this.overlay=(e=>d(this.mapContainer,"div",{class:"wrld-leaflet-overlay"},{position:"absolute",overflow:"hidden",width:"100%",height:"100%",background:"transparent","pointer-events":"none"}))(),this.indoorMapWatermark=(e=>d(this.mapContainer,"img",{id:"wrld-indoor-map-watermark"+l,class:"wrld-indoor-map-watermark",draggable:"false"},{position:"absolute","z-index":"20",display:"block",margin:"auto auto 0 auto",left:"0",right:"0",bottom:"-50px",transition:"all 500ms"}))(),this.canvas=((e,t,n,i,o)=>{var r={class:"wrld-map-canvas",id:t,oncontextmenu:"event.preventDefault();",width:n.toString(),height:i.toString()};return d(e,"canvas",r,{"background-color":o})})(this.mapContainer,i,o,r,a),this.loadingSpinner=new A(u,this.loadingSpinnerIcon),this.loadingSpinner.startSpinning(),this.onInitialized=()=>{this.loadingSpinner.stopSpinning(),this.loadingSpinnerIcon.parentNode.removeChild(this.loadingSpinnerIcon)},this.onError=e=>{this.loadingSpinner.stopSpinning(),((e,t)=>{d(this.mapContainer,"div",{class:"wrld-error-message"},{position:"absolute",left:"0px",bottom:"0px","line-height":"normal",color:"white","font-family":"sans-serif","font-weight":"bold",margin:"0.5em"}).textContent=t})(0,e)},this.width=()=>this.mapContainer.clientWidth,this.height=()=>this.mapContainer.clientHeight,this.onRemove=()=>{this.mapContainer.parentElement&&this.mapContainer.parentElement.removeChild(this.mapContainer)}}function A(e,t){var n=e,i=t,o=!1,r=e=>{o&&(i.style.transform="rotate("+(e||0)/1e3*360%360+"deg)",n.requestAnimationFrame(r))};this.startSpinning=()=>{o=!0,r()},this.stopSpinning=()=>{o=!1}}const L=(e,n,i=!1)=>{t.DomUtil.setPosition(e,n),!i&&t.Browser.any3d&&(e.style[t.DomUtil.TRANSFORM]+=" rotate(0.0001deg)")};var E;!function(e){e.HEIGHT_ABOVE_GROUND="heightAboveGround",e.HEIGHT_ABOVE_SEA_LEVEL="heightAboveSeaLevel"}(E||(E={}));const w=e=>e===E.HEIGHT_ABOVE_GROUND||e===E.HEIGHT_ABOVE_SEA_LEVEL,C=e=>{let t=1;return e&&e.toLowerCase()===E.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase()&&(t=0),t},F=t.Marker.extend({initialize:function(e,n){t.Marker.prototype.initialize.call(this,e,n),this.on("dragstart",this._onDragStart),this.on("drag",this._onDrag),this.on("dragend",this._onDragEnd),this._elevationBeforeDrag=0,this._isDragging=!1,this._latOffsetForDrag=0,this._lngOffsetForDrag=0},options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode},setIndoorMapWithFloorId:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorId=t,null!==this._map&&this._map._createPointMapping(this),this},setIndoorMapWithFloorIndex:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorIndex=t,null!==this._map&&this._map._createPointMapping(this),this},setOutdoor:function(){return delete this.options.indoorMapId,delete this.options.indoorMapFloorId,delete this.options.indoorMapFloorIndex,null!==this._map&&this._map._createPointMapping(this),this},setLatLng:function(e){const n=t.Marker.prototype.setLatLng.call(this,e);return this._map&&this._map._createPointMapping(this),n},update:function(){if(this._icon){const e=this._map.latLngsForLayer(this);let t;t=this._map.latLngToLayerPoint(this._isDragging?this.getLatLng():e[0]),this._setPos(t)}return this},_setPos:function(e){const n=t.Browser.gecko?L:t.DomUtil.setPosition;n(this._icon,e),this._shadow&&n(this._shadow,e),this._zIndex=1e4*e.y+1e4*this.options.zIndexOffset,this._resetZIndex()},bindPopup:function(e,n){let i=e;var o,r;return e instanceof t.Popup||(n||(n={}),"elevation"in n||(n.elevation=this.getElevation()),"elevationMode"in n||(n.elevationMode=this.options.elevationMode),l(o=this.options,r=n,"indoorMapId","indoorMapId"),l(o,r,"indoorMapFloorId","indoorMapFloorId"),l(o,r,"indoorMapFloorIndex","indoorMapFloorIndex"),l(o,r,"indoorFloorIndex","indoorMapFloorIndex"),i=new h(n,this).setContent(e)),t.Marker.prototype.bindPopup.call(this,i,n)},_onDragStart:function(){this._isDragging=!0,this._elevationBeforeDrag=this.getElevation();const e=t.DomUtil.getPosition(this._icon),n=this._map.layerPointToLatLng(e),i=this.getLatLng();this._latOffsetForDrag=i.lat-n.lat,this._lngOffsetForDrag=i.lng-n.lng,this.setLatLng(n)},_onDrag:function(){this._map._createPointMapping(this)},_onDragEnd:function(){const e=this.getLatLng();this.options.indoorMapId?this.setLatLng(new t.LatLng(e.lat+this._latOffsetForDrag,e.lng+this._lngOffsetForDrag,this._elevationBeforeDrag)):(this.setLatLng(new t.LatLng(e.lat,e.lng)),this.options.elevation=0),this._map._createPointMapping(this),this._latOffsetForDrag=0,this._lngOffsetForDrag=0,this._elevationBeforeDrag=0,this._isDragging=!1}}),B=u(F);function P(e,n){var i=e,o=n,r={},a=t.layerGroup([]),s=t.icon({iconUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker.png",iconRetinaUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker@2.png",iconSize:[48,48],iconAnchor:[24,48]}),l=e=>{var t=B(e.getLatLng(),{title:e.getIndoorMapName(),icon:s});return t.on("click",function(){o.enter(e)}),t},u=()=>{i.addLayer(a)};u(),o.on("indoorentranceadd",e=>{var t=e.entrance,n=t.getIndoorMapId(),i=l(t);i.addTo(a),r[n]=i}),o.on("indoorentranceremove",e=>{var t=e.entrance.getIndoorMapId();a.removeLayer(r[t]),delete r[t]}),o.on("indoormapenter",()=>{i.removeLayer(a)}),o.on("indoormapexit",u),this.removeAllEntranceMarkers=()=>{a.clearLayers(),r={}}}const S=["move","movestart","moveend","drag","dragstart","dragend","pan","panstart","panend","rotate","rotatestart","rotateend","tilt","tiltstart","tiltend","zoom","zoomstart","zoomend","transitionstart","transitionend"];class D{constructor(e){this._onEvent=void 0,this.setEventCallbacks=e=>{e.setEventCallback(this._onEvent)},this._onEvent=t=>{void 0!==typeof S[t]&&e.fire(S[t])}}}const T={onUpdate:e=>{},onDraw:e=>{},onInitialized:()=>{},onInitialStreamingCompleted:()=>{}};var x,N,O;!function(e){e.Spring="Spring",e.Summer="Summer",e.Autumn="Autumn",e.Winter="Winter"}(x||(x={})),function(e){e.Dawn="Dawn",e.Day="Day",e.Dusk="Dusk",e.Night="Night"}(N||(N={})),function(e){e.Clear="Default",e.Overcast="Overcast",e.Foggy="Foggy",e.Rainy="Rainy",e.Snowy="Snowy"}(O||(O={}));var k={__proto__:null,get season(){return x},get time(){return N},get weather(){return O}};class R extends class{onUpdate(e){}onDraw(e){}onInitialized(){}onInitialStreamingCompleted(){}}{constructor(e){super(),this._emscriptenApi=void 0,this._ready=void 0,this._season=void 0,this._time=void 0,this._weather=void 0,this._shouldChangeTheme=void 0,this._shouldChangeState=void 0,this._updateTheme=()=>{this._ready&&(this._shouldChangeTheme&&(this._emscriptenApi.themesApi?.setTheme(this._season),this._shouldChangeTheme=!1),this._shouldChangeState&&(this._emscriptenApi.themesApi?.setState(this._time+this._weather,1),this._shouldChangeState=!1))},this._tryMatchBuiltIn=(e,t,n)=>{const i=(e,t)=>{const n=e.toUpperCase();return t.find(function(e){return 0===n.localeCompare(e.toUpperCase())})||e};return{season:i(e,Object.values(e)),time:i(t,Object.values(t)),weather:i(n,Object.values(n))}},this._onThemesStreamingCompleted=()=>{this._ready=!0,this._updateTheme()},this.setTheme=(e,t,n)=>{const i=this._tryMatchBuiltIn(e,t,n);i.season!==this._season&&(this._shouldChangeTheme=!0),i.time===this._time&&i.weather===this._weather||(this._shouldChangeState=!0),this._season=i.season,this._time=i.time,this._weather=i.weather,this._updateTheme()},this.setSeason=e=>{this.setTheme(e,this._time,this._weather)},this.getSeason=()=>this._season,this.setTime=e=>{this.setTheme(this._season,e,this._weather)},this.getTime=()=>this._time,this.setWeather=e=>{this.setTheme(this._season,this._time,e)},this.getWeather=()=>this._weather,this.setEnvironmentThemesManifest=e=>{this._ready&&this._emscriptenApi.themesApi?.setThemeManifest(e)},this._emscriptenApi=e,this._ready=!1,this._season=x.Summer,this._time=N.Day,this._weather=O.Clear,this._shouldChangeTheme=!1,this._shouldChangeState=!1}onInitialized(){this._emscriptenApi.themesApi?.registerStreamingCompletedCallback(this._onThemesStreamingCompleted)}}class H{constructor(e,t,n,i,o,r,a){this._indoorMapId=void 0,this._indoorMapName=void 0,this._indoorMapSourceVendor=void 0,this._floorCount=void 0,this._floors=void 0,this._searchTags=void 0,this.exit=void 0,this._indoorMapId=e,this._indoorMapName=t,this._indoorMapSourceVendor=n,this._floorCount=i,this._floors=o,this._searchTags=r,this.exit=a}getIndoorMapId(){return this._indoorMapId}getIndoorMapName(){return this._indoorMapName}getIndoorMapSourceVendor(){return this._indoorMapSourceVendor}getFloorCount(){return this._floorCount}getFloors(){return this._floors}getSearchTags(){return this._searchTags}}class z{constructor(e,t,n){this._indoorMapId=void 0,this._indoorMapName=void 0,this._latLng=void 0,this._indoorMapId=e,this._indoorMapName=t,this._latLng=n}getIndoorMapId(){return this._indoorMapId}getIndoorMapName(){return this._indoorMapName}getLatLng(){return this._latLng}}class G{constructor(e,t,n,i){this._floorId=void 0,this._floorIndex=void 0,this._floorName=void 0,this._floorShortName=void 0,this._floorId=e,this._floorIndex=t,this._floorName=n,this._floorShortName=i}getFloorId(){return this._floorShortName}_getFloorId(){return this._floorId}getFloorZOrder(){return this._floorId}getFloorIndex(){return this._floorIndex}getFloorName(){return this._floorName}getFloorShortName(){return this._floorShortName}}var U={__proto__:null,IndoorMap:H,IndoorMapEntrance:z,IndoorMapFloor:G};function V(e,t){var n=null,i="wrld-indoor-map-watermark"+e,o=t,r="eegeo",a=e=>{var t=e.toLowerCase();return t===r&&(t="wrld"),"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor-vendors/"+t+"_logo.png"};[r,"micello"].forEach(function(e){var t=a(e);(new Image).src=t}),this.showWatermarkForVendor=e=>{if(e!==r||o){var t=a(e);null===n&&(n=document.getElementById(i)),n.src=t,n.style.bottom=0}},this.hideWatermark=()=>{null!==n&&(n.style.bottom="-50px")}}function W(e,n,i,o,r,a,s,l,u,h){var d=e,p=n,c=null,m={},g=!1,f=null,_=!1,b=new V(i,u),v=o,y=r,I=a,M=s,A=l,L=h,E=()=>{var e=d.indoorsApi.getActiveIndoorMapId(),t=d.indoorsApi.getActiveIndoorMapName(),n=d.indoorsApi.getActiveIndoorMapSourceVendor(),i=d.indoorsApi.getActiveIndoorMapFloorCount(),o=w(i),r=C();return new H(e,t,n,i,o,r,this.exit)},w=e=>{for(var t=[],n=0;n<e;++n){var i=n,o=d.indoorsApi.getFloorName(n),r=d.indoorsApi.getFloorShortName(n),a=d.indoorsApi.getFloorNumber(n),s=new G(a,i,o,r);t.push(s)}return t},C=()=>{var e;try{e=JSON.parse(d.indoorsApi.getActiveIndoorMapUserData())}catch(e){return[]}if("object"!=typeof e.search_menu_items)return[];if(!(e.search_menu_items.items instanceof Array))return[];var t=[];return e.search_menu_items.items.forEach(e=>{t.push({name:e.name,search_tag:e.search_tag,icon_key:e.icon_key})}),t},F=()=>{c=E(),this.fire("indoormapenter",{indoorMap:c})},B=()=>{this.fire("indoormapenterfailed",{})},P=()=>{var e=c;c=null,b.hideWatermark(),this.fire("indoormapexit",{indoorMap:e})},S=()=>{this.fire("indoormapfloorchange",{floor:this.getFloor()})},D=(e,n,i)=>{var o=new z(e,n,t.latLng([i.lat,i.lng]));m[o.getIndoorMapId()]=o,this.fire("indoorentranceadd",{entrance:o})},T=(e,t,n)=>{var i=new z(e,t,n);delete m[i.getIndoorMapId()],this.fire("indoorentranceremove",{entrance:i})},x=e=>{this.fire("indoormapload",{indoorMapId:e})},N=e=>{this.fire("indoormapunload",{indoorMapId:e})},O=e=>{var t=e.split("|");this.fire("indoorentityclick",{ids:t})},k=()=>{this.fire("collapsestart")},R=()=>{this.fire("collapse")},U=()=>{this.fire("collapseend")},W=()=>{this.fire("expandstart")},j=()=>{this.fire("expand")},Z=()=>{this.fire("expandend")},K=e=>{this.fire("indoormapenterrequested"),d.indoorsApi.enterIndoorMap(e)},q=e=>{_=!0,g?(d.cameraApi.setView({location:e.latLng,distance:e.distance,allowInterruption:!1,headingDegrees:e.orientation,animate:!("animate"in e)||e.animate}),p._setIndoorTransitionCompleteEventListener(function(){K(e.indoorMapId)}),this.once("indoormapenter",()=>{_=!1;var e=c.getIndoorMapSourceVendor();b.showWatermarkForVendor(e)}),this.once("indoormapenterfailed",()=>{_=!1})):f=e};this.onInitialized=()=>{d.indoorsApi.onInitialized(),d.indoorsApi.setNotificationCallbacks(F,B,P,S,D,T,x,N),d.indoorEntityApi.onInitialized(),d.indoorEntityApi.registerIndoorEntityPickedCallback(O),d.expandFloorsApi.setCollapseStartCallback(k),d.expandFloorsApi.setCollapseCallback(R),d.expandFloorsApi.setCollapseEndCallback(U),d.expandFloorsApi.setExpandStartCallback(W),d.expandFloorsApi.setExpandCallback(j),d.expandFloorsApi.setExpandEndCallback(Z),d.indoorsApi.setBackgroundColor(L)},this.onInitialStreamingCompleted=()=>{g=!0,v&&(this.enter(v,{latLng:I,zoom:A,indoorMapId:v,orientation:M}),y&&this.once("indoormapenter",function(){this.setFloor(Number(y))})),null!==f&&(q(f),f=null)},this.exit=()=>(d.ready()&&(d.indoorsApi.exitIndoorMap(),b.hideWatermark()),f=null,_=!1,this),this.isIndoors=()=>null!==c,this.getActiveIndoorMap=()=>c,this.getFloor=()=>{if(this.isIndoors()){var e=d.indoorsApi.getSelectedFloorIndex();return c.getFloors()[e]}return null},this.setFloor=e=>{if(!this.isIndoors())return!1;var t=null,n=c.getFloors();if("number"==typeof e)t=e;else if("object"==typeof e){var i=n.indexOf(e);t=i>=0?i:null}else if("string"==typeof e)for(var o=0;o<n.length;++o)if(n[o].getFloorShortName()===e){t=o;break}return null!==t&&d.indoorsApi.setSelectedFloorIndex(t)},this.moveUp=e=>{var t=void 0===e?1:e,n=this.getFloor();return null!==n&&this.setFloor(n.getFloorIndex()+t)},this.moveDown=e=>this.moveUp(void 0===e?-1:-e),this.enter=(e,t)=>{if(this.isIndoors()||_)return!1;var n=null;"object"==typeof e&&"getIndoorMapId"in e&&"function"==typeof e.getIndoorMapId?n=e.getIndoorMapId():"string"==typeof e&&(n=e);var i=m[n]||null,o=null;return null!==i?o=i.getLatLng():t&&t.latLng&&(o=t.latLng),null===o?!!g&&(K(n),!0):(q(Object.assign({latLng:o,distance:400,indoorMapId:n,orientation:0},t)),!0)},this.getFloorInterpolation=()=>null!==c?d.expandFloorsApi.getFloorParam()/c.getFloorCount():0,this.getFloorHeightAboveSeaLevel=e=>this.isIndoors()&&e>=0&&e<c.getFloorCount()?d.indoorsApi.getFloorHeightAboveSeaLevel(e):null,this.tryGetReadableName=e=>d.ready()?d.indoorsApi.tryGetReadableName(e):null,this.tryGetFloorReadableName=(e,t)=>d.ready()?d.indoorsApi.tryGetFloorReadableName(e,t):null,this.tryGetFloorShortName=(e,t)=>d.ready()?d.indoorsApi.tryGetFloorShortName(e,t):null,this.setFloorInterpolation=e=>{if(null!==c){var t=e*c.getFloorCount();d.expandFloorsApi.setFloorParam(t)}return this},this.setFloorFromInterpolation=e=>{if(null===c)return!1;var t=void 0===e?this.getFloorInterpolation():e,n=Math.round(t*c.getFloorCount());return this.setFloor(n)},this.expand=()=>(d.expandFloorsApi.expandIndoorMap(),this),this.collapse=()=>(d.expandFloorsApi.collapseIndoorMap(),this),this.setEntityHighlights=(e,t,n,i)=>{g&&(n=$(n),i=J(i),d.indoorEntityApi.setHighlights(e,t,n,i))},this.clearEntityHighlights=(e,t)=>{g&&(t=$(t),d.indoorEntityApi.clearHighlights(e,t))};var J=e=>(null==e&&(e=.5),e),$=e=>(null==e&&null!==c&&(e=c.getIndoorMapId()),e);this.setBackgroundColor=e=>{L=e,g&&d.indoorsApi.setBackgroundColor(e)},this.hideLabelsForEntity=e=>this.hideLabelsForEntities([e]),this.hideLabelsForEntities=e=>(d.ready()&&d.indoorsApi.hideLabelsForEntities(e),this),this.showLabelsForEntity=e=>this.showLabelsForEntities([e]),this.showLabelsForEntities=e=>(d.ready()&&d.indoorsApi.showLabelsForEntities(e),this),this.showAllLabels=()=>(d.ready()&&d.indoorsApi.showAllLabels(),this)}var j=t.extend({},T,t.Mixin.Events);function Z(){var e={};this.insertObject=function(t,n){return e[t]=n,t},this.removeObjectById=function(t){var n=e[t];return delete e[t],n},this.idForObject=function(t){for(var n in e)if(e[n]===t)return n;return null},this.getObjectById=function(t){return e[t]},this.forEachItem=function(t){for(var n in e)t(n,e[n])}}W.prototype=j;class K{constructor(e){this._succeeded=void 0,this.getSucceeded=()=>this._succeeded,this._succeeded=e}}function q(e){var t=e;this.cancel=function(){t.cancel()}}function J(e,n,i){var o=t.latLng(e),r=n,a=i,s=!1,l=e=>{a(new K(e))};this.getCentre=()=>o,this.getRadius=()=>r,this.cancel=()=>{s=!0},this.isCancelled=()=>s,this.notifyComplete=()=>{l(!0)},this.notifyCancelled=()=>{l(!1)}}function $(e){var t=e,n=new Z,i=[],o=!1,r=e=>{var i=t.precacheApi.beginPrecacheOperation(e);return n.insertObject(i,e),i},a=e=>{n.removeObjectById(e).notifyComplete()},s=e=>{n.removeObjectById(e).notifyCancelled()};this.getMaximumPrecacheRadius=()=>16e3,this.precache=(e,t,a)=>{var s=((e,t)=>t>16e3||t<=0?new Error("radius outside of valid (0.0, 16000] range."):null)(0,t);if(null!==s)throw s;var l=new J(e,t,a);if(o){var u=r(l);n.insertObject(u,l)}else i.push(l);return new q(l)},this.onInitialized=()=>{o=!0,t.precacheApi.registerCallbacks(a,s),i.forEach(e=>{e.isCancelled()?e.notifyCancelled():r(e)}),i=[]},this.onUpdate=e=>{if(o){var i=[];n.forEachItem(function(e,t){t.isCancelled()&&i.push(e)}),i.forEach(e=>{t.precacheApi.cancelPrecacheOperation(e)})}}}function X(e,n,i,o){var r=e,a=!1,s=null,l=null,u=n,h=o,d=function(e){a?r.cameraApi.setView(e):s=null===s?{}:Object.assign(s,e)},p=function(e){a?r.cameraApi.setViewToBounds(e):l=e},c=function(e){h=e,a&&r.cameraApi.setVerticallyLocked(h)};this.setView=function(e){d(e)},this.setViewToBounds=function(e){p(e)},this.onInitialized=function(){a=!0,c(h),a&&(null!==s&&(d(s),s=null),null!==l&&(p(l),l=null))},this.getCurrentZoomLevel=function(){return a?r.cameraApi.getZoomLevel():parseFloat(s.zoom)||0},this.getCenter=function(){return t.latLng(u=a?r.cameraApi.getInterestLatLong():s.location||u)},this.getDistanceToInterest=function(){return a?r.cameraApi.getDistanceToInterest():0},this.getPitchDegrees=function(){return a?r.cameraApi.getPitchDegrees():0},this.getTiltDegrees=function(){return a?90-r.cameraApi.getPitchDegrees():0},this.setTiltDegrees=function(e){return function(e){d({tiltDegrees:e,animate:!0})}(e)},this.getHeadingDegrees=function(){return a?r.cameraApi.getHeadingDegrees():parseFloat(s.headingDegrees)||0},this.setHeadingDegrees=function(e){return function(e){return d({headingDegrees:e,animate:!0})}(e)},this.setVerticallyLocked=function(e){c(e)}}function Y(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.geofenceApi.createGeofence(e.getPoints(),e.getHoles(),e._getConfig());return n[i]=e,i};this.addPolygon=e=>{o?r(e):i.push(e)},this.removePolygon=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.geofenceApi.removeGeofence(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=function(){o&&Object.keys(n).forEach(e=>{var i=n[e];i._colorNeedsChanged()&&(t.geofenceApi.setGeofenceColor(e,i.getColor()),i._onColorChanged())})},this.onInitialized=()=>{o=!0,i.forEach(function(e){r(e)}),i=[]}}function Q(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.polylineApi.createPolyline(e);return n[i]=e,i};this.addPolyline=e=>{o?r(e):i.push(e)},this.removePolyline=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.polylineApi.destroyPolyline(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=()=>{o&&Object.keys(n).forEach(e=>{t.polylineApi.updateNativeState(e,n[e])})},this.onInitialized=()=>{o=!0,i.forEach(e=>{r(e)}),i=[]}}function ee(e,t){var n=e,i=t,o=(e,t)=>{var n="{"+t+":",i=e.indexOf(n);if(-1!==i){var o=e.slice(i+n.length),r=o.indexOf("}");if(-1!==r)return o.substring(0,r)}return null},r=e=>{for(var t=[],n=0;n<e.length;n++){var i=e[n].name,r=o(i,"level");if("multiple"!==r){var a={},s=[];a.indoorMapId=o(i,"bid"),"e2657c93-2d13-412a-89fe-0949a14e7eea"===a.indoorMapId?a.indoorMapId="westport_house":"c857d08d-7de1-4447-9ff8-6747649a00e0"===a.indoorMapId&&(a.indoorMapId="70f9b00f-8c4f-4570-9a23-62bd80a76f8a"),r&&(a.indoorMapFloorId=parseInt(r));for(var l=e[n].geometry.coordinates,u=0;u<l.length;u++){var h=l[u];s.push([h[1],h[0]])}a.points=s,t.push(a)}}return t},a=e=>{for(var t=e.routes,n=[],i=0;i<t.length;++i)for(var o=t[i].legs,a=0;a<o.length;++a){var s=r(o[a].steps);n.push(s)}return n};this.getRoute=(e,t,o,r)=>{r=r||"walking";for(var s="https://routing.wrld3d.com/v1/route?loc=",l=0;l<e.length;++l)s+=e[l].join(","),l<e.length-1&&(s+="%3B");s+="&apikey="+n,s+="&limit=400",s+="&travelmode="+r;var u=new XMLHttpRequest;u.open("GET",s,!0),u.onload=((e,t,n)=>()=>{var i,o=JSON.parse(e.responseText);if("Ok"===o.code)if("type"in o&&"multipart"===o.type)for(var r=o.routes,s=0;s<r.length;++s)i=a(r[s]),t(i);else i=a(o),t(i);else null!=n&&n(o)})(u,t,o),i.on("indoormapexit",(e=>()=>{e.abort()})(u)),u.send()}}function te(e,t){var n=e,i=!1,o=t,r=!1;this.onInitialized=()=>{n.renderingApi.setClearColor(o),n.renderingApi.setMapCollapsed(i),r=!0},this.ready=()=>r,this.setMapCollapsed=e=>{i=e,r&&n.renderingApi.setMapCollapsed(i)},this.isMapCollapsed=()=>i,this.setClearColor=e=>{o=e,r&&n.renderingApi.setClearColor(o)},this.getCameraRelativePosition=e=>r?n.renderingApi.getCameraRelativePosition(e):null,this.getNorthFacingOrientationMatrix=e=>r?n.renderingApi.getNorthFacingOrientationMatrix(e):null,this.getCameraProjectionMatrix=()=>r?n.renderingApi.getCameraProjectionMatrix():null,this.getCameraOrientationMatrix=()=>r?n.renderingApi.getCameraOrientationMatrix():null,this.getLightingData=()=>r?n.renderingApi.getLightingData():null}function ne(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.buildingsApi.createBuildingHighlight(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addBuildingHighlight=e=>{r?s(e):o.push(e)},this.removeBuildingHighlight=e=>{if(r){var i=e.getId();void 0!==i&&(t.buildingsApi.destroyBuildingHighlight(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.notifyBuildingHighlightChanged=e=>{if(r){var n=e.getId();if(void 0===n)return;t.buildingsApi.setHighlightColor(n,e.getColor())}},this.findIntersectionWithBuilding=e=>{if(r)return t.buildingsApi.findIntersectionWithBuilding(e)},this.findBuildingAtScreenPoint=e=>{if(r){var n=t.spacesApi.screenPointToRay(e);return this.findIntersectionWithBuilding(n)}},this.findBuildingAtLatLng=e=>{if(r){var n=t.spacesApi.latLongToVerticallyDownRay(e);return this.findIntersectionWithBuilding(n)}},this.onInitialized=()=>{r=!0,t.buildingsApi.registerBuildingInformationReceivedCallback(l),o.forEach(e=>{s(e)}),o=[]},this.isReady=()=>r,this.setBuildingInformationReceivedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e],o=t.buildingsApi.tryGetBuildingInformation(e);null!==o&&i._setBuildingInformation(o),null!==a&&a(i)}}function ie(e){var t=new ne(e),n=this,i=e=>{n.fire("buildinginformationreceived",{buildingHighlight:e})};this.findBuildingAtScreenPoint=e=>t.findBuildingAtScreenPoint(e),this.findBuildingAtLatLng=e=>t.findBuildingAtLatLng(e),this.onInitialized=()=>{t.setBuildingInformationReceivedCallback(i),t.onInitialized()},this._getImpl=()=>t}$.prototype=T,X.prototype=T,Y.prototype=T,Q.prototype=T,ee.prototype=T,te.prototype=T;var oe=t.extend({},T,t.Mixin.Events);function re(e){var t=e,n=[],i=new Z,o=!1,r=!1,a="",s=!1,l=!1,u=e=>{for(var n=[],o=[],r=[],a=[],s=[],l=[],u=[],h=[],d=[],p=0;p<e.length;++p){var c=e[p];n.push(c.getIndoorMapId()),o.push(c.getIndoorMapFloorId()),r.push(c.getName()),a.push(c.getLocation().lat),s.push(c.getLocation().lng),l.push(c.getElevation()),u.push(c.getElevationMode()),h.push(c.getHeadingDegrees()),d.push(c.getGeometryId())}var m=t.propsApi.createProps(n,o,r,a,s,l,u,h,d);for(p=0;p<m.length;++p)i.insertObject(m[p],e[p])},h=(e,t)=>{this.fire("indoormapentitysetpropsloaded",{indoorMapId:e,floorId:t})},d=(e,t)=>{this.fire("indoormappopulationrequestcomplete",{succeeded:0!==e,httpStatusCode:t})};this.addProp=e=>{l?(e=>{var n=t.propsApi.createProp(e.getIndoorMapId(),e.getIndoorMapFloorId(),e.getName(),e.getLocation().lat,e.getLocation().lng,e.getElevation(),e.getElevationMode(),e.getHeadingDegrees(),e.getGeometryId());i.insertObject(n,e)})(e):n.push(e)},this.addProps=e=>{l?u(e):n=n.concat(e)},this.removeProp=e=>{if(l&&0===n.length){var o=i.idForObject(e);null!==o&&(t.propsApi.destroyProp(o),i.removeObjectById(o))}else{var r=n.indexOf(e);r>-1&&n.splice(r,1)}},this.removeProps=e=>{var o=0;if(l&&0===n.length){for(var r=[];o<e.length;++o){var a=i.idForObject(e[o]);i.removeObjectById(a),r.push(parseInt(a))}t.propsApi.destroyProps(r)}else for(;o<e.length;++o){var s=n.indexOf(e[o]);s>-1&&n.splice(s,1)}},this.onInitialized=()=>{l=!0,0!==n.length&&(u(n),n=[]),o&&this.setAutomaticIndoorMapPopulationEnabled(r),s&&this.setIndoorMapPopulationServiceUrl(a),t.propsApi.setIndoorMapEntitySetPropsLoadedCallback(h),t.propsApi.setIndoorMapPopulationRequestCompletedCallback(d),t.propsApi.onInitialized()},this.onUpdate=e=>{l&&i.forEachItem((e,n)=>{n._locationNeedsChanged()&&(t.propsApi.setLocation(e,n.getLocation().lat,n.getLocation().lng),n._onLocationChanged()),n._headingDegreesNeedsChanged()&&(t.propsApi.setHeadingDegrees(e,n.getHeadingDegrees()),n._onHeadingDegreesChanged()),n._elevationNeedsChanged()&&(t.propsApi.setElevation(e,n.getElevation()),n._onElevationChanged()),n._elevationModeNeedsChanged()&&(t.propsApi.setElevationMode(e,n.getElevationMode()),n._onElevationModeChanged()),n._geometryIdNeedsChanged()&&(t.propsApi.setGeometryId(e,n.getGeometryId()),n._onGeometryIdChanged())})},this.setAutomaticIndoorMapPopulationEnabled=e=>{l?t.propsApi.setAutomaticIndoorMapPopulationEnabled(e):(r=e,o=!0)},this.isAutomaticIndoorMapPopulationEnabled=()=>l?t.propsApi.isAutomaticIndoorMapPopulationEnabled():r,this.setIndoorMapPopulationServiceUrl=e=>{if(l)return t.propsApi.setIndoorMapPopulationServiceUrl(e);a=e,s=!0},this.getIndoorMapEntitySetProps=(e,n)=>l?t.propsApi.tryGetIndoorMapEntitySetProps(e,n):null}ie.prototype=oe;var ae=t.extend({},T,t.Mixin.Events);function se(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.indoorMapEntityInformationApi.createIndoorMapEntityInformation(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addIndoorMapEntityInformation=e=>{r?s(e):o.push(e)},this.removeIndoorMapEntityInformation=e=>{if(r){var i=e.getNativeId();void 0!==i&&(t.indoorMapEntityInformationApi.destroyIndoorMapEntityInformation(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.onInitialized=()=>{r=!0,t.indoorMapEntityInformationApi.registerIndoorMapEntityInformationChangedCallback(l),o.forEach(function(e){s(e)}),o=[]},this.setIndoorMapEntityInformationChangedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e],o=t.indoorMapEntityInformationApi.tryGetIndoorMapEntityInformation(e);null!==o&&i._setData(o),null!==a&&a(i)}}function le(e){var t=new se(e),n=e=>{this.fire("indoormapentityinformationchanged",{indoorMapEntityInformation:e})};this.onInitialized=()=>{t.setIndoorMapEntityInformationChangedCallback(n),t.onInitialized()},this._getImpl=()=>t}re.prototype=ae;var ue=t.extend({},T,t.Mixin.Events);function he(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.indoorMapFloorOutlineInformationApi.createIndoorMapFloorOutlineInformation(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addIndoorMapFloorOutlineInformation=e=>{r?s(e):o.push(e)},this.removeIndoorMapFloorOutlineInformation=e=>{if(r){var i=e.getId();void 0!==i&&(t.indoorMapFloorOutlineInformationApi.destroyIndoorMapFloorOutlineInformation(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.onInitialized=()=>{r=!0,t.indoorMapFloorOutlineInformationApi.registerIndoorMapFloorOutlineInformationLoadedCallback(l),o.forEach(e=>{s(e)}),o=[]},this.setIndoorMapFloorOutlineInformationLoadedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e];if(t.indoorMapFloorOutlineInformationApi.getIndoorMapFloorOutlineInformationLoaded(e)){var o=t.indoorMapFloorOutlineInformationApi.tryGetIndoorMapFloorOutlineInformation(e);null!==o&&(i._setData(o),null!==a&&a(i))}}}function de(e){var t=new he(e),n=e=>{this.fire("indoormapflooroutlineinformationloaded",{indoorMapFloorOutlineInformation:e})};this.onInitialized=()=>{t.setIndoorMapFloorOutlineInformationLoadedCallback(n),t.onInitialized()},this._getImpl=()=>t}le.prototype=ue;var pe=t.extend({},T,t.Mixin.Events);function ce(e){var n=e,i=!1,o=null,r=!1,a="",s=0,l=0,u=0,h=!1,d=!0;this.isEnabled=()=>r,this.setEnabled=e=>{r=!!e},this.getLocation=()=>o,this.setLocation=e=>{o=t.latLng(e),h=!0},this.getIndoorMapId=()=>a,this.getIndoorMapFloorId=()=>s,this.setIndoorMap=(e,t)=>{a=e,s=t},this.setOutdoor=()=>{this.setIndoorMap("",0)},this.isOrientationVisible=()=>d,this.getHeadingDegrees=()=>l,this.setHeadingDegrees=e=>{l=e,h=!0},this.getElevation=()=>u,this.setElevation=e=>{u=e,h=!0},this.showOrientation=e=>{d=e,h=!0},this.onInitialized=()=>{i=!0,n.blueSphereApi.updateNativeState(this)},this.onUpdate=()=>{i&&h&&(n.blueSphereApi.updateNativeState(this),h=!1)}}function me(e){var t=e,n=!1;this.Pause=()=>{n&&t.mapRuntimeApi.onPause()},this.Resume=()=>{n&&t.mapRuntimeApi.onResume()},this.Remove=()=>{n&&t.mapRuntimeApi.onRemove()},this.onInitialized=()=>{n=!0}}de.prototype=pe,ce.prototype=T,me.prototype=T;var ge=t.point(-100,-100);function fe(e){var n=e,i=null,o=!1,l={},u=[];this.onInitialized=()=>{o=!0,i=n.spacesApi,this._createPendingLayers()};var h=e=>e.reduce(function(e,t){return e.concat(Array.isArray(t)?h(t):t)},[]);this._getLayerId=e=>t.stamp(e),this._useWrldSdkPointMappingForLayer=e=>"function"==typeof e.getLatLng||"function"==typeof e.getLatLngs,this._createAndAdd=e=>{if(this._useWrldSdkPointMappingForLayer(e)){var t=this._getLayerId(e);t in l&&this.removePointMapping(e);var i="function"==typeof e.getLatLngs?e.getLatLngs():[e.getLatLng()],o=h(i),u=e.options.elevation||0,d=C(e.options.elevationMode),p=n.layerPointMappingApi,c=r(e),m=s(e);if(1==(null!==c&&null!==m))p.createPointMappingWithFloorIndex(t,u,d,c,m,o);else{var g=a(e),f=null!==c&&null!==g;p.createPointMapping(t,u,d,!0===f?c:"",!0===f?g:0,o)}l[t]=p.getLatLngsForLayer(t,o.length)}},this._createPendingLayers=()=>{u.forEach(e=>{this._createAndAdd(e)}),u=[]},this.createPointMapping=e=>{this._useWrldSdkPointMappingForLayer(e)&&(o?this._createAndAdd(e):u.push(e))},this.removePointMapping=e=>{if(o){var t=this._getLayerId(e);t in l&&(n.layerPointMappingApi.removePointMapping(t),delete l[t])}else{var i=u.indexOf(e);i>-1&&u.splice(i,1)}},this._updateMappings=()=>{if(o){var e=n.layerPointMappingApi;for(var t in l)l[t]=e.getLatLngsForLayer(t,l[t].length)}},this.onDraw=()=>{o&&this._updateMappings()},this._getDefaultLatLngsFromLayer=e=>"function"==typeof e.getLatLngs?e.getLatLngs():"function"==typeof e.getLatLng?[e.getLatLng()]:null,this.latLngsForLayer=e=>{if(!o)return this._getDefaultLatLngsFromLayer(e);var t=this._getLayerId(e);return t in l?l[t]:this._getDefaultLatLngsFromLayer(e)},this.projectLatlngs=(e,t,n,i)=>{if(!o)return!1;if(!this._useWrldSdkPointMappingForLayer(e))return!1;var r=this.latLngsForLayer(e);return null!==r&&(this._projectLatlngsRecursive(t,r,0,n,i),!0)},this._latLngToLayerPoint=e=>o?i.worldToScreen(e).toPoint():ge,this._projectLatlngsRecursive=(e,n,i,o,r)=>{var a,s,l=e.length;if(e[0]instanceof t.LatLng){for(s=[],a=0;a<l;a++,i++)s[a]=this._latLngToLayerPoint(n[i]),r.extend(s[a]);o.push(s)}else for(a=0;a<l;a++)i=this._projectLatlngsRecursive(e[a],n,i,o,r);return i}}function _e(e){var t=e,n=!1;this.getVersion=()=>n?t.versionApi.getPlatformVersion():null,this.getVersionHash=()=>n?t.versionApi.getPlatformVersionHash():null,this.onInitialized=()=>{n=!0}}function be(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.heatmapApi.createHeatmap(e);return n[i]=e,i};this.addHeatmap=e=>{o?r(e):i.push(e)},this.removeHeatmap=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.heatmapApi.destroyHeatmap(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=()=>{o&&Object.keys(n).forEach(e=>{t.heatmapApi.updateNativeState(e,n[e])})},this.onInitialized=()=>{o=!0,i.forEach(function(e){r(e)}),i=[]}}function ve(e,t,n,i,o){var r=e,a=t,s=n,l=i,u=o,h=!1;this.onInitialized=()=>{r.frameRateApi.setTargetVSyncInterval(a),r.frameRateApi.setThrottledTargetFrameInterval(s),r.frameRateApi.setIdleSecondsBeforeThrottle(l),r.frameRateApi.setThrottleWhenIdleEnabled(u),h=!0},this.ready=()=>h,this.setTargetVSyncInterval=e=>{a=e,h&&r.frameRateApi.setTargetVSyncInterval(a)},this.setThrottledTargetFrameInterval=e=>{s=e,h&&r.frameRateApi.setThrottledTargetFrameInterval(s)},this.setIdleSecondsBeforeThrottle=e=>{l=e,h&&r.frameRateApi.setIdleSecondsBeforeThrottle(l)},this.setThrottleWhenIdleEnabled=e=>{u=e,h&&r.frameRateApi.setThrottleWhenIdleEnabled(u)},this.cancelThrottle=()=>{h&&r.frameRateApi.cancelThrottle()}}fe.prototype=T,_e.prototype=T,be.prototype=T,ve.prototype=T;const ye=(e,t)=>{var n=e.lastIndexOf(".");return e.slice(n)===t?e.slice(0,n):e};function Ie(e,n,i,o,r,a,s,l,u){var h={canvasId:"canvas",width:void 0,height:void 0,indoorsEnabled:!1,displayEntranceMarkers:!0,coverageTreeManifest:"",environmentThemesManifest:"",headingDegrees:0,center:t.latLng([37.7858,-122.401]),zoom:16,doubleClickZoom:!0,zoomControl:!1,zoomAnimation:!1,minZoom:0,maxZoom:20,zoomSnap:0,viewVerticallyLocked:!1,showIndoorWrldWatermark:!0,trafficEnabled:!0,trafficDisableWhenEnteringIndoorMaps:!0,indoorLabelsAlwaysHidden:!1,targetVSyncInterval:1,frameRateThrottleWhenIdleEnabled:!1,throttledTargetFrameIntervalMilliseconds:1e3,idleSecondsBeforeFrameRateThrottle:30,drawClearColor:"#000000ff",indoorMapBackgroundColor:"#000000c0",indoorSelectionTimeoutDuration:30};l=t.extend(h,l);var d=e,p=n,c=r,m=a,g=new R(n),f=new $(n),_=new X(n,l.center,l.zoom,l.viewVerticallyLocked),b=new W(n,this,d,l.indoorId,l.floorIndex,l.center,l.headingDegrees,l.zoom,l.showIndoorWrldWatermark,l.indoorMapBackgroundColor),v=new Y(n),y=new Q(n),A=new fe(n),L=new ee(o,b),E=new te(n,l.drawClearColor),w=new ie(n),C=new re(n),F=new le(n),B=new de(n),S=new ce(n),T=new me(n),x=new _e(n),N=new be(n),O=new ve(n,l.targetVSyncInterval,l.throttledTargetFrameIntervalMilliseconds,l.idleSecondsBeforeFrameRateThrottle,l.frameRateThrottleWhenIdleEnabled),k=u,H=d?l.canvasId+d:l.canvasId,z=l.width||i.clientWidth,G=l.height||i.clientHeight,U="wrld-map-container"+d,V=new M(m,c,i,H,z,G,l.drawClearColor,U,d),j=V.canvas,Z=s;Z.canvas=j;var K=t.latLng(l.center),q=l.zoom,J=l.headingDegrees,ne=l.indoorsEnabled?"1":"0",oe=ye(l.coverageTreeManifest,".gz"),ae=ye(l.environmentThemesManifest,".gz"),se=l.doubleClickZoom?"1":"0",ue=l.trafficEnabled?"1":"0",he=l.trafficDisableWhenEnteringIndoorMaps?"1":"0",pe=l.indoorLabelsAlwaysHidden?"1":"0",ge=l.indoorSelectionTimeoutDuration;Z.arguments=[H,d.toString(),z.toString(),G.toString(),o,K.lat.toString(),K.lng.toString(),q.toString(),J.toString(),ne,oe,ae,se,U,ue,he,pe,ge.toString()],this.leafletMap=new I(c,V.overlay,l,function(){k(),Le.leafletMap._initEvents(!0,j),Le._indoorEntranceMarkerUpdater&&Le._indoorEntranceMarkerUpdater.removeAllEntranceMarkers(),V.onRemove();var e=Z.ctx||Z.K;e&&"getExtension"in e&&e.getExtension("WEBGL_lose_context").loseContext()},_,f,g,b,v,y,A,L,E,w,C,F,B,S,T,x,N,O),this.leafletMap._initEvents(!1,j);var Ie=new D(this.leafletMap),Me=[A,g,b,f,_,v,y,E,w,C,F,B,S,T,x,N,O];this._indoorEntranceMarkerUpdater=null,l.displayEntranceMarkers&&(this._indoorEntranceMarkerUpdater=new P(this.leafletMap,b));var Ae=null;this.onInitialized=function(e,t){V.onInitialized(),Ae=Z.cwrap("resizeCanvas",null,["number","number"]),p.onInitialized(e,t,Ee,we,Ce),Ie.setEventCallbacks(p.cameraApi),Me.forEach(function(e){e.onInitialized()}),this.leafletMap.onInitialized(p)},this.onError=function(e){V.onError(e)},this._setIndoorTransitionCompleteEventListener=function(e){this.leafletMap.once("moveend",e)};var Le=this,Ee=function(e){var t,n;t=V.width(),n=V.height(),t===z&&n===G||(Ae(t,n),z=t,G=n),Me.forEach(function(t){t.onUpdate(e)}),Le.leafletMap._onUpdate()},we=function(e){Me.forEach(function(t){t.onDraw(e)}),Le.leafletMap._onDraw()},Ce=function(){Me.forEach(function(e){e.onInitialStreamingCompleted()}),Le.leafletMap.onInitialStreamingCompleted()}}function Me(e){var t=e;this.readDoubles=(e,n)=>{for(var i=[],o=0;o<n;++o){var r=t.getValue(e+8*o,"double");i.push(r)}return i},this.passDoubles=(e,n)=>{for(var i=t._malloc(8*e.length),o=0;o<e.length;++o)t.setValue(i+8*o,e[o],"double");n(i,e.length),t._free(i)},this.passString=(e,n)=>{var i=t.lengthBytesUTF8(e),o=t._malloc(i);t.stringToUTF8(e,o,i),n(o),t._free(o)},this.passStrings=(e,n)=>{for(var i=t._malloc(4*e.length),o=[],r=0;r<e.length;++r){var a=t.lengthBytesUTF8(e[r])+1,s=t._malloc(a);t.stringToUTF8(e[r],s,a),t.setValue(i+4*r,s,"*"),o.push(s)}n(i,e.length);for(var l=0;l<o.length;++l)t._free(o[l]);t._free(i)},this.passInt32s=(e,n)=>{for(var i=t._malloc(4*e.length),o=0;o<e.length;++o)t.setValue(i+4*o,e[o],"i32");n(i,e.length),t._free(i)},this.stringifyPointer=e=>t.UTF8ToString(e),this.createInt8Buffer=e=>({ptr:t._malloc(e),element_count:e,element_type:"i8",element_size_bytes:1}),this.createInt32Buffer=e=>({ptr:t._malloc(4*e),element_count:e,element_type:"i32",element_size_bytes:4}),this.createDoubleBuffer=e=>({ptr:t._malloc(8*e),element_count:e,element_type:"double",element_size_bytes:8}),this.createBufferFromArray=(e,n)=>{for(var i=n(e.length),o=0;o<i.element_count;++o)t.setValue(i.ptr+o*i.element_size_bytes,e[o],i.element_type);return i},this.consumeBufferToArray=e=>{for(var n=[],i=0;i<e.element_count;++i){var o=t.getValue(e.ptr+i*e.element_size_bytes,e.element_type);n.push(o)}return t._free(e.ptr),n},this.freeBuffer=e=>{t._free(e.ptr)},this.createUtf8BufferFromString=e=>{var n=t.lengthBytesUTF8(e)+1,i=this.createInt8Buffer(n);return t.stringToUTF8(e,i.ptr,n),i},this.consumeUtf8BufferToString=e=>{var n=t.UTF8ToString(e.ptr);return t._free(e.ptr),n}}const Ae=e=>((255&e.x)<<24)+((255&e.y)<<16)+((255&e.z)<<8)+(255&e.w),Le=e=>{if("string"==typeof e)return(e=>{var t=255;8===(e=e.replace(/^#/,"")).length?t=255&parseInt(e.slice(6,8),16):4===e.length&&(t=255&parseInt(e.slice(3,4).repeat(2),16));var n=16777215;return 6===e.length||8===e.length?n=16777215&parseInt(e.substring(0,6),16):3!==e.length&&4!==e.length||(n=16777215&parseInt(e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2),16)),(n<<8)+t})(e);if(Array.isArray(e))return Ae((e=>{var t,n,i,o=255;if(!(Array.isArray(e)&&e.length>=3))throw new Error("Unable to parse color from array: "+String(e));if(t=e[0],n=e[1],i=e[2],e.length>3&&(o=e[3]),isNaN(t)||isNaN(n)||isNaN(i)||isNaN(o))throw new Error("Unable to parse color - value out of range: "+String(e));return new c(t,n,i,o)})(e));if("object"==typeof e)return Ae((e=>{var t=void 0,n=void 0,i=void 0,o=255;if("object"!=typeof e)throw new Error("Unable to parse color: "+String(e));if("r"in e?t=e.r:"x"in e&&(t=e.x),"g"in e?n=e.g:"y"in e&&(n=e.y),"b"in e?i=e.b:"z"in e&&(i=e.z),"a"in e?o=e.a:"w"in e&&(o=e.w),isNaN(t)||isNaN(n)||isNaN(i)||isNaN(o))throw new Error("Unable to parse color - value out of range: "+String(e));return new c(t,n,i,o)})(e));throw new Error("Unable to parse color: "+String(e))};function Ee(e,t,n){var i=e,o=n,r=t("removeGeofence",null,["number","number"]),a=t("setGeofenceColor",null,["number","number","number","number","number","number"]),s=t("createGeofenceFromRawCoords",null,["number","number","number","number","number","number","number","string","number","number"]);this._getElevationIsAboveSeaLevelFromConfig=e=>void 0!==e.elevationMode?e.elevationMode.toLowerCase()===E.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase():e.offsetFromSeaLevel||!1,this._getAltitudeOffsetFromConfig=e=>void 0!==e.elevation?e.elevation:e.altitudeOffset||0,this.createGeofence=(e,t,n)=>{var r=[],a=[];a.push(e.length),e.forEach(e=>{r.push(e.lat),r.push(e.lng)}),t.forEach(e=>{a.push(e.length),e.forEach(e=>{r.push(e.lat),r.push(e.lng)})});for(var l=o._malloc(8*r.length),u=0;u<r.length;++u)o.setValue(l+8*u,r[u],"double");for(var h=o._malloc(4*a.length),d=0;d<a.length;++d)o.setValue(h+4*d,a[d],"i32");var p=n.indoorMapId||"",c=this._getElevationIsAboveSeaLevelFromConfig(n),m=this._getAltitudeOffsetFromConfig(n),g=s(i,l,r.length,h,a.length,c,m,p,p.length,n.indoorMapFloorId||0);return o._free(l),o._free(h),g},this.removeGeofence=e=>{r(i,e)},this.setGeofenceColor=(e,t)=>{var n=(e=>{return t=Le(e),new c(t>>24&255,t>>16&255,t>>8&255,255&t);var t})(t);a(i,e,n.x/255,n.y/255,n.z/255,n.w/255)}}function we(e,n,i,o){var r=e,a=o,s=n("indoorsApi_RegisterIndoorMapCallbacks",null,["number","number","number","number","number","number","number","number","number"]),l=n("indoorsApi_EnterIndoorMap",null,["number","string"]),u=n("indoorsApi_ExitIndoorMap",null,["number"]),h=n("indoorsApi_HasActiveIndoorMap","number",["number"]),d=n("indoorsApi_GetActiveIndoorMapId","string",["number"]),p=n("indoorsApi_GetActiveIndoorMapName","string",["number"]),c=n("indoorsApi_GetActiveIndoorMapSourceVendor","string",["number"]),m=n("indoorsApi_GetActiveIndoorMapFloorCount","number",["number"]),g=n("indoorsApi_GetActiveIndoorMapUserData","string",["number"]),f=n("indoorsApi_GetSelectedFloorIndex","number",["number"]),_=n("indoorsApi_SetSelectedFloorIndex","number",["number","number"]),b=n("indoorsApi_GetFloorName","string",["number","number"]),v=n("indoorsApi_GetFloorShortName","string",["number","number"]),y=n("indoorsApi_GetFloorNumber","number",["number","number"]),I=n("indoorsApi_GetFloorHeightAboveSeaLevel","number",["number","number"]),M=n("indoorsApi_TryGetReadableNameBufferSize","number",["number","string","number","number"]),A=n("indoorsApi_TryGetReadableName","number",["number","string","number","number","number"]),L=n("indoorsApi_TryGetFloorReadableNameBufferSize","number",["number","string","number","number","number"]),E=n("indoorsApi_TryGetFloorReadableName","number",["number","string","number","number","number","number"]),w=n("indoorsApi_TryGetFloorShortNameBufferSize","number",["number","string","number","number","number"]),C=n("indoorsApi_TryGetFloorShortName","number",["number","string","number","number","number","number"]),F=n("indoorsApi_SetBackgroundColor",null,["number","number"]),B=n("indoorsApi_HideLabelsForEntities",null,["number","number","number"]),P=n("indoorsApi_ShowLabelsForEntities",null,["number","number","number"]),S=n("indoorsApi_ShowAllLabels",null,["number"]),D=null,T=null,x=null,N=null,O=null,k=null,R=null,H=null,z=()=>{null!==D&&D()},G=()=>{null!==T&&T()},U=()=>{null!==x&&x()},V=()=>{null!==N&&N()},W=(e,n,i,o)=>{var r=a.stringifyPointer(n),s=a.stringifyPointer(i),l=a.readDoubles(o,3);e(r,s,t.latLng(l))},j=(e,t,n)=>{null!==O&&W(O,e,t,n)},Z=(e,t,n)=>{null!==k&&W(k,e,t,n)},K=e=>{if(null!==R){var t=a.stringifyPointer(e);R(t)}},q=e=>{if(null!==H){var t=a.stringifyPointer(e);H(t)}};this.onInitialized=()=>{s(r,i.addFunction(z),i.addFunction(G),i.addFunction(U),i.addFunction(V),i.addFunction(j),i.addFunction(Z),i.addFunction(K),i.addFunction(q))},this.setNotificationCallbacks=(e,t,n,i,o,r,a,s)=>{D=e,T=t,x=n,N=i,O=o,k=r,R=a,H=s},this.enterIndoorMap=e=>l(r,e),this.exitIndoorMap=()=>{u(r)},this.hasActiveIndoorMap=()=>!!h(r),this.getActiveIndoorMapId=()=>d(r),this.getActiveIndoorMapName=()=>p(r),this.getActiveIndoorMapSourceVendor=()=>c(r),this.getActiveIndoorMapFloorCount=()=>m(r),this.getActiveIndoorMapUserData=()=>g(r),this.getSelectedFloorIndex=()=>f(r),this.setSelectedFloorIndex=e=>!!_(r,e),this.getFloorName=e=>b(r,e),this.getFloorShortName=e=>v(r,e),this.getFloorNumber=e=>y(r,e),this.getFloorHeightAboveSeaLevel=e=>I(r,e),this.tryGetReadableName=e=>{var t=a.createInt32Buffer(1),n=M(r,e,e.length,t.ptr);if(!n)return null;var i=a.consumeBufferToArray(t)[0],o=a.createInt8Buffer(i);return(n=A(r,e,e.length,o.ptr,i))?a.consumeUtf8BufferToString(o):null};var J=(e,t,n,i)=>{var o=a.createInt32Buffer(1),s=n(r,e,e.length,t,o.ptr);if(!s)return null;var l=a.consumeBufferToArray(o)[0],u=a.createInt8Buffer(l);return(s=i(r,e,e.length,t,u.ptr,l))?a.consumeUtf8BufferToString(u):null};this.tryGetFloorReadableName=(e,t)=>J(e,t,L,E),this.tryGetFloorShortName=(e,t)=>J(e,t,w,C),this.setBackgroundColor=e=>{var t=Le(e);F(r,t)},this.hideLabelsForEntities=e=>{a.passStrings(e,(e,t)=>{B(r,e,t)})},this.showLabelsForEntities=e=>{a.passStrings(e,(e,t)=>{P(r,e,t)})},this.showAllLabels=()=>{S(r)}}function Ce(e,t,n){var i=e,o=null,r=null,a=null,s=null,l=null;this.registerCallbacks=(e,o)=>{null!==l&&n.removeFunction(l),l=n.addFunction(e),null!==s&&n.removeFunction(s),s=n.addFunction(o),(a=a||t("precacheApi_setPrecacheCallbacks",null,["number","number","number"]))(i,l,s)},this.beginPrecacheOperation=e=>{o=o||t("precacheApi_beginPrecacheOperation","number",["number","number","number","number"]);var n=e.getCentre();return o(i,n.lat,n.lng,e.getRadius())},this.cancelPrecacheOperation=e=>{(r=r||t("precacheApi_cancelPrecacheOperation",null,["number","number"]))(i,e)}}function Fe(e,n,i,o){var r=e,a=o,s=null,l=null,u=null,h=null,d=null,c=null,m=null,g=null,f=n("spacesApi_ScreenPointToRay",null,["number","number","number","number"]),_=n("spacesApi_LatLongToVerticallyDownRay",null,["number","number","number","number"]),b=(e,n,i)=>{var o=[0,0,0],s=!1;return a.passDoubles(o,function(t,l){var u=i(r,e,n,t);s=!!u,o=a.readDoubles(t,3)}),s?t.latLng(o):null};this.worldToScreen=e=>{var i=t.latLng(e);return((e,t,i)=>{s=s||n("worldToScreen",null,["number","number","number","number","number"]);var o=[0,0,0];return a.passDoubles(o,function(n,l){s(r,e,t,i,n),o=a.readDoubles(n,3)}),new p(o)})(i.lat,i.lng,i.alt||0)},this.screenToTerrainPoint=e=>{var i,o,r=t.point(e);return i=r.x,o=r.y,l=l||n("screenToTerrainPoint","number",["number","number","number","number"]),b(i,o,l)},this.screenToIndoorPoint=e=>{var i,o,r=t.point(e);return i=r.x,o=r.y,u=u||n("screenToIndoorPoint","number",["number","number","number","number"]),b(i,o,u)},this.screenToWorldPoint=e=>this.screenToIndoorPoint(e)||this.screenToTerrainPoint(e),this.getAltitudeAtLatLng=e=>{return i=(e=t.latLng(e)).lat,o=e.lng,(h=h||n("getAltitudeAtLatLng","number",["number","number","number"]))(r,i,o);var i,o},this.getUpdatedAltitudeAtLatLng=(e,t,i)=>((e,t,i,o)=>{d=d||n("getUpdatedAltitudeAtLatLng","number",["number","number","number","number","number","number"]);var s=[0,0],l=!1;return a.passDoubles(s,(n,u)=>{var h=d(r,e,t,i,o,n);(l=!!h)&&(s=a.readDoubles(n,2))}),l?s:null})(e.lat,e.lng,t,i),this.screenPointToRay=e=>{var n=t.point(e),i=a.createDoubleBuffer(6);f(r,n.x,n.y,i.ptr);var o=a.consumeBufferToArray(i);return{origin:new p(o[0],o[1],o[2]),direction:new p(o[3],o[4],o[5])}},this.latLongToVerticallyDownRay=e=>{var t=a.createDoubleBuffer(6);_(r,e.lat,e.lng,t.ptr);var n=a.consumeBufferToArray(t);return{origin:new p(n[0],n[1],n[2]),direction:new p(n[3],n[4],n[5])}},this.getMortonKeyAtLatLng=e=>{var i=t.latLng(e);return((e,t)=>{c=c||n("getMortonKeyAtLatLng",null,["number","number","number"]);var i="";return a.passString(i,n=>{c(e,t,n),i=a.stringifyPointer(n)}),i})(i.lat,i.lng)},this.getMortonKeyCenter=e=>(e=>{m=m||n("getMortonKeyCenter",null,["string","number"]);var i=[0,0];return a.passDoubles(i,(t,n)=>{m(e,t),i=a.readDoubles(t,2)}),i.forEach((e,t)=>{isNaN(e)&&(i[t]=0)}),t.latLng(i)})(e),this.getMortonKeyCorners=(e,i)=>((e,i)=>{g=g||n("getMortonKeyCorners",null,["string","number","number"]);var o=[0,0,0,0,0,0,0,0];return a.passDoubles(o,(t,n)=>{g(e,i,t),o=a.readDoubles(t,8)}),o.forEach((e,t)=>{isNaN(e)&&(o[t]=0)}),[t.latLng(o.slice(0,2)),t.latLng(o.slice(2,4)),t.latLng(o.slice(4,6)),t.latLng(o.slice(6))]})(e,i||0)}function Be(e,t,n){var i=e,o=null,r=null,a=null,s=null;this.setTheme=e=>{(o=o||t("setTheme",null,["number","string"]))(i,e)},this.setState=(e,n)=>{(r=r||t("setState",null,["number","string","number"]))(i,e,n)},this.setThemeManifest=e=>{(a=a||t("setThemeManifest",null,["number","string"]))(i,e)},this.registerStreamingCompletedCallback=e=>{(s=s||t("setStreamingCompletedCallback",null,["number","number"]))(i,n.addFunction(e))}}function Pe(e,n,i,o){var r=e,a=o,s=n("cameraApi_setViewUsingZenithAngle","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),l=n("cameraApi_setViewToBounds",null,["number","number","number","number","number","number","number","number","number"]),u=n("cameraApi_getDistanceToInterest","number",["number"]),h=n("cameraApi_getInterestLatLong",null,["number","number"]),d=n("cameraApi_getPitchDegrees","number",["number"]),p=n("cameraApi_getHeadingDegrees","number",["number"]),c=n("cameraApi_setEventCallback",null,["number","number"]),m=n("cameraApi_getDistanceFromZoomLevel","number",["number","number"]),g=n("cameraApi_getZoomLevel","number",["number"]),f=n("cameraApi_setVerticallyLocked",null,["number","number"]);this.setView=e=>{return n=!("animate"in e)||e.animate,i="location"in e?t.latLng(e.location):null,o="zoom"in e?this.getDistanceFromZoomLevel(e.zoom):"distance"in e?e.distance:null,h=!0,null===i&&(i={lat:0,lng:0,alt:0},h=!1),s(r,n,i.lat||0,i.lng||0,i.alt||0,h,o||0,null!==o,(a="headingDegrees"in e?e.headingDegrees:null)||0,null!==a,(l="tiltDegrees"in e?e.tiltDegrees:null)||0,null!==l,(u="durationSeconds"in e?e.durationSeconds:null)||0,null!==u,!("animate"in e&&!0===e.animate),!("allowInterruption"in e)||e.allowInterruption);var n,i,o,a,l,u,h},this.setViewToBounds=e=>{var n,i,o=t.latLngBounds(e.bounds);l(r,(n=o._northEast).lat,n.lng,n.alt||0,(i=o._southWest).lat,i.lng,i.alt||0,!("animate"in e)||e.animate,!("allowInterruption"in e)||e.allowInterruption)},this.getDistanceToInterest=()=>u(r),this.getInterestLatLong=()=>{var e=[0,0];return a.passDoubles(e,(t,n)=>{h(r,t),e=a.readDoubles(t,2)}),e},this.getPitchDegrees=()=>d(r),this.getHeadingDegrees=()=>p(r),this.setEventCallback=e=>{c(r,i.addFunction(e))},this.getDistanceFromZoomLevel=e=>m(r,e),this.getZoomLevel=()=>g(r),this.setVerticallyLocked=e=>{f(r,e)}}function Se(e,t,n){var i=e,o=null,r=null,a=null,s=null,l=null,u=null,h=null,d=null,p=null,c=null;this.expandIndoorMap=()=>(a=a||t("expandIndoorMap","number",["number"]))(i),this.collapseIndoorMap=()=>(s=s||t("collapseIndoorMap",null,["number"]))(i),this.getFloorParam=()=>(o=o||t("getFloorParam",null,["number"]))(i),this.setFloorParam=e=>(r=r||t("setFloorParam",null,["number","number"]))(i,e),this.setCollapseStartCallback=e=>{(l=l||t("setCollapseStartCallback",null,["number","number"]))(i,n.addFunction(e))},this.setCollapseCallback=e=>{(u=u||t("setCollapseCallback",null,["number","number"]))(i,n.addFunction(e))},this.setCollapseEndCallback=e=>{(h=h||t("setCollapseEndCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandStartCallback=e=>{(d=d||t("setExpandStartCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandCallback=e=>{(p=p||t("setExpandCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandEndCallback=e=>{(c=c||t("setExpandEndCallback",null,["number","number"]))(i,n.addFunction(e))}}function De(e,t,n,i){var o=e,r=i,a=t("indoorEntityApi_SetIndoorEntityPickedCallback",null,["number","number"]),s=t("indoorEntityApi_SetHighlightsWithBorderThickness",null,["number","string","number","number","number","number"]),l=t("indoorEntityApi_ClearHighlights",null,["number","string","number","number"]),u=t("indoorEntityApi_ClearAllHighlights",null,["number"]),h=null,d=e=>{if(null!==h){var t=r.stringifyPointer(e);h(t)}};this.onInitialized=()=>{a(o,n.addFunction(d))},this.registerIndoorEntityPickedCallback=e=>{h=e},this.setHighlights=(e,t,n,i)=>{null!=n&&("string"==typeof e&&(e=[e]),((e,t,n,i)=>{r.passStrings(e,(e,a)=>{r.passDoubles(t,(t,r)=>{s(o,n,e,a,t,i)})})})(e,t,n,i))},this.clearHighlights=(e,t)=>{if(void 0===e)u(o);else{if(null==t)return;"string"==typeof e&&(e=[e]),((e,t)=>{r.passStrings(e,(e,n)=>{l(o,t,e,n)})})(e,t)}}}class Te{constructor(e){this._options=void 0,this._id=void 0,this._map=void 0,this._color=void 0,this._buildingInformation=void 0,this.getColor=()=>new c(this._color),this.getOptions=()=>this._options,this.setColor=e=>(this._color=new c(e),null!==this._map&&this._map.buildings._getImpl().notifyBuildingHighlightChanged(this),this),this.getId=()=>this._id,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,this._map.buildings._getImpl().addBuildingHighlight(this),this),this.remove=()=>(null!==this._map&&(this._map.buildings._getImpl().removeBuildingHighlight(this),this._map=null),this),this.getBuildingInformation=()=>this._buildingInformation,this._setNativeHandle=e=>{this._id=e},this._setBuildingInformation=e=>{this._buildingInformation=e},this._options=e,this._id=null,this._map=null,this._color=e.getColor(),this._buildingInformation=null}}const xe=u(Te);var Ne;!function(e){e.SELECT_AT_LOCATION="selectAtLocation",e.SELECT_AT_SCREEN_POINT="selectAtScreenPoint"}(Ne||(Ne={}));class Oe{constructor(){this._selectionLocationLatLng=void 0,this._selectionScreenPoint=void 0,this._selectionMode=void 0,this._color=void 0,this._informationOnly=void 0,this.highlightBuildingAtLocation=e=>(this._selectionMode=Ne.SELECT_AT_LOCATION,this._selectionLocationLatLng=t.latLng(e),this),this.highlightBuildingAtScreenPoint=e=>(this._selectionMode=Ne.SELECT_AT_SCREEN_POINT,this._selectionScreenPoint=t.point(e),this),this.color=e=>(this._color=e,this),this.informationOnly=()=>(this._informationOnly=!0,this),this.getSelectionMode=()=>this._selectionMode,this.getSelectionLocation=()=>this._selectionLocationLatLng,this.getSelectionScreenPoint=()=>this._selectionScreenPoint,this.getColor=()=>new c(this._color),this.getIsInformationOnly=()=>this._informationOnly,this._selectionLocationLatLng=t.latLng([0,0]),this._selectionScreenPoint=t.point(0,0),this._selectionMode=Ne.SELECT_AT_LOCATION,this._color=[255,255,0,128],this._informationOnly=!1}}const ke=u(Oe);class Re{constructor(e,t,n){this._buildingId=void 0,this._buildingDimensions=void 0,this._buildingContours=void 0,this.getBuildingId=()=>this._buildingId,this.getBuildingDimensions=()=>this._buildingDimensions,this.getBuildingContours=()=>this._buildingContours,this.toJson=()=>({building_id:this._buildingId,building_dimensions:this._buildingDimensions.toJson(),building_contours:this._buildingContours.map(e=>e.toJson())}),this._buildingId=e,this._buildingDimensions=t,this._buildingContours=n}}class He{constructor(e,t,n){this._baseAltitude=void 0,this._topAltitude=void 0,this._centroid=void 0,this.getBaseAltitude=()=>this._baseAltitude,this.getTopAltitude=()=>this._topAltitude,this.getCentroid=()=>this._centroid,this.toJson=()=>({base_altitude:this._baseAltitude,top_altitude:this._topAltitude,centroid:this._centroid}),this._baseAltitude=e,this._topAltitude=t,this._centroid=n}}class ze{constructor(e,t,n){this._bottomAltitude=void 0,this._topAltitude=void 0,this._points=void 0,this.getBottomAltitude=()=>this._bottomAltitude,this.getTopAltitude=()=>this._topAltitude,this.getPoints=()=>this._points,this.toJson=()=>({bottom_altitude:this._bottomAltitude,top_altitude:this._topAltitude,points:this._points}),this._bottomAltitude=e,this._topAltitude=t,this._points=n}}var Ge,Ue={__proto__:null,buildingHighlight:xe,BuildingHighlight:Te,buildingHighlightOptions:ke,BuildingHighlightOptions:Oe,get BuildingHighlightSelectionType(){return Ne},BuildingInformation:Re,BuildingDimensions:He,BuildingContour:ze};function Ve(e,n,i,o){var r=e,a=o,s=n("buildingsApi_SetBuildingHighlightChangedCallback",null,["number","number"]),l=n("buildingsApi_CreateHighlightAtLocation",null,["number","number","number","number","number","number","number","number"]),u=n("buildingsApi_CreateHighlightAtScreenPoint",null,["number","number","number","number","number","number","number","number"]),h=n("buildingsApi_DestroyHighlight",null,["number","number"]),d=n("buildingsApi_SetHighlightColor",null,["number","number","number","number","number","number"]),p=n("buildingsApi_TryGetBuildingInformationBufferSizes","number",["number","number","number","number"]),c=n("buildingsApi_TryGetBuildingInformation","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),m=n("buildingsApi_TryFindIntersectionWithBuilding","number",["number","number","number"]);this.registerBuildingInformationReceivedCallback=e=>{s(r,i.addFunction(e))},this.createBuildingHighlight=e=>{var t=0,n=e.getOptions(),i=e.getColor(),o=n.getIsInformationOnly()?0:1;if(n.getSelectionMode()===Ne.SELECT_AT_LOCATION){var a=n.getSelectionLocation();t=l(r,a.lat,a.lng,i.x/255,i.y/255,i.z/255,i.w/255,o)}else{var s=n.getSelectionScreenPoint();t=u(r,s.x,s.y,i.x/255,i.y/255,i.z/255,i.w/255,o)}return t},this.destroyBuildingHighlight=e=>{h(r,e)},this.setHighlightColor=(e,t)=>{d(r,e,t.x/255,t.y/255,t.z/255,t.w/255)},this.tryGetBuildingInformation=e=>{var n=a.createInt32Buffer(1),i=a.createInt32Buffer(1),o=a.createInt32Buffer(1),s=p(r,e,n.ptr,i.ptr,o.ptr),l=a.consumeBufferToArray(n)[0],u=a.consumeBufferToArray(i)[0],h=a.consumeBufferToArray(o)[0];if(!s)return null;var d=a.createInt8Buffer(l),m=a.createDoubleBuffer(1),g=a.createDoubleBuffer(1),f=a.createBufferFromArray([0,0],a.createDoubleBuffer),_=a.createDoubleBuffer(2*u),b=a.createInt32Buffer(h),v=a.createDoubleBuffer(h),y=a.createDoubleBuffer(h);s=c(r,e,d.ptr,l,m.ptr,g.ptr,f.ptr,_.ptr,_.element_count,b.ptr,b.element_count,v.ptr,v.element_count,y.ptr,y.element_count);for(var I=a.consumeUtf8BufferToString(d),M=a.consumeBufferToArray(m),A=a.consumeBufferToArray(g),L=t.latLng(a.consumeBufferToArray(f)),E=new He(M,A,L),w=a.consumeBufferToArray(_),C=a.consumeBufferToArray(b),F=a.consumeBufferToArray(v),B=a.consumeBufferToArray(y),P=[],S=0,D=0;D<b.element_count;++D){for(var T=C[D],x=[],N=0;N<T;++N){var O=w[S++],k=w[S++];x.push(t.latLng(O,k))}var R=new ze(F[D],B[D],x);P.push(R)}return s?new Re(I,E,P):null},this.findIntersectionWithBuilding=e=>{var n=a.createBufferFromArray([e.origin.x,e.origin.y,e.origin.z,e.direction.x,e.direction.y,e.direction.z],a.createDoubleBuffer),i=a.createDoubleBuffer(3),o=m(r,n.ptr,i.ptr);a.freeBuffer(n);var s=a.consumeBufferToArray(i);return{found:o,point:t.latLng(s)}}}function We(e,t,n,i){var o=e,r=i,a=t("renderingApi_SetMapCollapsed",null,["number","number"]),s=t("renderingApi_SetClearColor",null,["number","number"]),l=t("renderingApi_GetCameraRelativePosition",null,["number","number","number","number","number","number"]),u=t("renderingApi_GetCameraProjectionMatrix",null,["number","number","number"]),h=t("renderingApi_GetCameraOrientationMatrix",null,["number","number","number"]),d=t("renderingApi_GetLightingData",null,["number","number","number"]),c=t("renderingApi_GetNorthFacingOrientationMatrix",null,["number","number","number","number","number"]);this.setMapCollapsed=e=>{a(o,e?1:0)},this.setClearColor=e=>{var t=Le(e);s(o,t)},this.getCameraRelativePosition=e=>{var t=new Array(3);return r.passDoubles(t,(n,i)=>{l(o,e.lat,e.lng,e.alt||0,i,n),t=r.readDoubles(n,i)}),new p(t)},this.getNorthFacingOrientationMatrix=e=>{var t=new Array(16);return r.passDoubles(t,(n,i)=>{c(o,e.lat,e.lng,i,n),t=r.readDoubles(n,i)}),t},this.getCameraProjectionMatrix=()=>{var e=new Array(16);return r.passDoubles(e,(t,n)=>{u(o,n,t),e=r.readDoubles(t,n)}),e},this.getCameraOrientationMatrix=()=>{var e=new Array(16);return r.passDoubles(e,(t,n)=>{h(o,n,t),e=r.readDoubles(t,n)}),e},this.getLightingData=()=>{var e=new Array(21);return r.passDoubles(e,(t,n)=>{d(o,n,t),e=r.readDoubles(t,n)}),{key:{direction:new p(e[0],e[1],e[2]),color:new p(e[9],e[10],e[11])},back:{direction:new p(e[3],e[4],e[5]),color:new p(e[12],e[13],e[14])},fill:{direction:new p(e[6],e[7],e[8]),color:new p(e[15],e[16],e[17])},ambient:{color:new p(e[18],e[19],e[20])}}}}function je(e,n,i,o){var r=e,a=o,s=null,l=null,u=null,h=null;this._createLatLngsNumberArray=function(e){for(var t=new Array(2*e.length),n=0;n<e.length;n++){var i=e[n],o=2*n;t[o]=i.lat,t[o+1]=i.lng}return t},this.createPointMapping=(e,t,i,o,l,u)=>{s=s||n("createLayerMapping",null,["number","number","number","number","string","number","number","number","number"]);var h=this._createLatLngsNumberArray(u);a.passDoubles(h,(n,a)=>{s(r,e,t,i,o,o.length,l,n,a)})},this.createPointMappingWithFloorIndex=(e,t,i,o,s,u)=>{l=l||n("createLayerMappingWithFloorIndex",null,["number","number","number","number","string","number","number","number","number"]);var h=this._createLatLngsNumberArray(u);a.passDoubles(h,(n,a)=>{l(r,e,t,i,o,o.length,s,n,a)})},this.removePointMapping=e=>{(u=u||n("removeLayerMapping",null,["number","number"]))(r,e)},this.getLatLngsForLayer=(e,i)=>{h=h||n("getPointsOnMapForLayer","number",["number","number","number"]);var o=new Array(3*i);a.passDoubles(o,(t,n)=>{var i=h(r,e,t);if(o.length!==i)throw new Error("_getPointsOnMapForLayer : unexpected array length. Expected '"+i+"' but was '"+o.length+"'.");o=a.readDoubles(t,i)});for(var s=new Array(i),l=0,u=0;u<o.length;u+=3)s[l++]=t.latLng(o[u],o[u+1],o[u+2]);return s}}class Ze{constructor(e,t,n,i,o,r,a,s){this._indoorMapId=void 0,this._floorId=void 0,this._name=void 0,this._geometryId=void 0,this._location=void 0,this._elevation=void 0,this._elevationMode=void 0,this._headingDegrees=void 0,this._indoorMapId=e,this._floorId=t,this._name=n,this._geometryId=i,this._location=o,this._elevation=r,this._elevationMode=a,this._headingDegrees=s}getIndoorMapId(){return this._indoorMapId}getIndoorMapFloorId(){return this._floorId}getName(){return this._name}getGeometryId(){return this._geometryId}getLocation(){return this._location}getElevation(){return this._elevation}getElevationMode(){return this._elevationMode}getHeadingDegrees(){return this._headingDegrees}}function Ke(e,n,i,o){var r=e,a=o,s=null,l=null,u=null,h=null,d=null,p=null,c=null,m=null,g=null,f=null,_=null,b=null,v=null,y=null,I=null,M=null,A=null,L=null,w=null;this.onInitialized=()=>{this.registerIndoorMapEntitySetPropsLoadedHandler(F)},this.createProp=(e,t,i,o,a,l,u,h,d)=>{s=s||n("propsApi_createProp","number",["number","string","number","string","number","number","number","number","number","string"]);var p=C(u);return s(r,e,t,i,o,a,l,p,h,d)},this.createProps=(e,t,i,o,s,u,h,d,p)=>{var c=e.length;if(t.length!==c||i.length!==c||o.length!==c||s.length!==c||u.length!==c||h.length!==c||d.length!==c||p.length!==c)throw new Error("Unequal array element counts in call to createProps.");l=l||n("propsApi_createProps",null,["number","number","number","number","number","number","number","number","number","number","number","number"]);var m=a.createInt32Buffer(c),g=[];h.forEach(function(e){g.push(C(e))});var f=a.createBufferFromArray(t,a.createInt32Buffer),_=a.createBufferFromArray(o,a.createDoubleBuffer),b=a.createBufferFromArray(s,a.createDoubleBuffer),v=a.createBufferFromArray(u,a.createDoubleBuffer),y=a.createBufferFromArray(g,a.createInt32Buffer),I=a.createBufferFromArray(d,a.createDoubleBuffer);return a.passStrings(e,(e,t)=>{a.passStrings(i,(t,n)=>{a.passStrings(p,(n,i)=>{l(r,c,e,f.ptr,t,_.ptr,b.ptr,v.ptr,y.ptr,I.ptr,n,m.ptr)})})}),a.freeBuffer(I),a.freeBuffer(y),a.freeBuffer(v),a.freeBuffer(_),a.freeBuffer(b),a.freeBuffer(f),a.consumeBufferToArray(m)},this.destroyProp=e=>{(u=u||n("propsApi_destroyProp",null,["number","number"]))(r,e)},this.destroyProps=e=>{h=h||n("propsApi_destroyProps",null,["number","number","number"]),a.passInt32s(e,(e,t)=>{h(r,e,t)})},this.propExists=e=>(d=d||n("propsApi_propExists","number",["number","number"]))(r,e),this.setLocation=(e,t,i)=>{(p=p||n("propsApi_setLocation",null,["number","number","number","number"]))(r,e,t,i)},this.setElevation=(e,t)=>{(c=c||n("propsApi_setElevation",null,["number","number","number"]))(r,e,t)},this.setElevationMode=(e,t)=>{m=m||n("propsApi_setElevationMode",null,["number","number","number"]);var i=C(t);m(r,e,i)},this.setGeometryId=(e,t)=>{(g=g||n("propsApi_setGeometryId",null,["number","number","string"]))(r,e,t)},this.setHeadingDegrees=(e,t)=>{(f=f||n("propsApi_setHeadingDegrees",null,["number","number","number","number"]))(r,e,t)},this.setAutomaticIndoorMapPopulationEnabled=e=>{(_=_||n("propsApi_setAutomaticIndoorMapPopulationEnabled",null,["number","number"]))(r,e)},this.isAutomaticIndoorMapPopulationEnabled=()=>(b=b||n("propsApi_isAutomaticIndoorMapPopulationEnabled","number",["number"]))(r),this.tryGetIndoorMapEntitySetProps=(e,i)=>{var o=(v=v||n("propsApi_getIndoorMapPropCount","number",["number","string","number"]))(r,e,i),s=a.createInt32Buffer(o),l=a.createInt32Buffer(o),u=a.createInt32Buffer(2),h=(y=y||n("propsApi_tryGetIndoorMapPropDataBufferSizes","number",["number","string","number","number","number","number","number"]))(r,e,i,o,s.ptr,l.ptr,u.ptr);if(!h)return null;var d=a.consumeBufferToArray(s),p=a.consumeBufferToArray(l),c=a.consumeBufferToArray(u),m=c[1],g=a.createInt8Buffer(c[0]),f=a.createInt8Buffer(m),_=a.createDoubleBuffer(2*o),b=a.createDoubleBuffer(o),M=a.createDoubleBuffer(o);if(!(h=(I=I||n("propsApi_tryGetIndoorMapPropData","number",["number","string","number","number","number","number","number","number","number"]))(r,e,i,o,g.ptr,f.ptr,_.ptr,b.ptr,M.ptr)))return null;for(var A=a.consumeUtf8BufferToString(g),L=a.consumeUtf8BufferToString(f),w=a.consumeBufferToArray(_),C=a.consumeBufferToArray(b),F=a.consumeBufferToArray(M),B=[],P=0,S=0,D=0;D<o;D++){var T=P+d[D],x=A.slice(P,T);P=T;var N=S+p[D],O=L.slice(S,N);S=N;var k=t.latLng(w[2*D],w[2*D+1]),R=new Ze(e,i,x,O,k,C[D],E.HEIGHT_ABOVE_GROUND,F[D]);B.push(R)}return B},this.setIndoorMapPopulationServiceUrl=e=>{(M=M||n("propsApi_setIndoorMapPopulationServiceUrl",null,["number","string"]))(r,e)};var F=(e,t)=>{if(null!==w){var n=a.stringifyPointer(e);w(n,t)}};this.setIndoorMapEntitySetPropsLoadedCallback=e=>{w=e},this.registerIndoorMapEntitySetPropsLoadedHandler=e=>{(A=A||n("propsApi_setIndoorMapEntitySetPropsLoadedCallback",null,["number","number"]))(r,i.addFunction(e))},this.setIndoorMapPopulationRequestCompletedCallback=e=>{(L=L||n("propsApi_setIndoorMapPopulationRequestCompletedCallback",null,["number","number","number"]))(r,i.addFunction(e))}}!function(e){e.NONE="None",e.PARTIAL="Partial",e.COMPLETE="Complete"}(Ge||(Ge={}));class qe{constructor(e){this._nativeId=void 0,this._map=void 0,this._indoorMapId=void 0,this._indoorMapEntities=void 0,this._loadState=void 0,this.getIndoorMapId=()=>this._indoorMapId,this.getIndoorMapEntities=()=>this._indoorMapEntities,this.getLoadState=()=>this._loadState,this.getId=()=>this._nativeId,this.getNativeId=()=>this._nativeId,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,this._map.indoorMapEntities._getImpl().addIndoorMapEntityInformation(this),this),this.remove=()=>(null!==this._map&&(this._map.indoorMapEntities._getImpl().removeIndoorMapEntityInformation(this),this._map=null),this),this._setNativeHandle=e=>{this._nativeId=e},this._setData=e=>{switch(this._indoorMapEntities=e.IndoorMapEntities,e.LoadState){case 0:this._loadState=Ge.NONE;break;case 1:this._loadState=Ge.PARTIAL;break;case 2:this._loadState=Ge.COMPLETE}},this._nativeId=null,this._map=null,this._indoorMapId=e,this._indoorMapEntities=[],this._loadState=Ge.NONE}}const Je=u(qe);class $e{constructor(e,t,n,i){this._indoorMapEntityId=void 0,this._indoorMapFloorId=void 0,this._position=void 0,this._outline=void 0,this._indoorMapEntityId=e,this._indoorMapFloorId=t,this._position=n,this._outline=i}getIndoorMapEntityId(){return this._indoorMapEntityId}getIndoorMapFloorId(){return this._indoorMapFloorId}getPosition(){return this._position}getOutline(){return this._outline}}var Xe,Ye={__proto__:null,indoorMapEntityInformation:Je,IndoorMapEntityInformation:qe,IndoorMapEntity:$e};function Qe(e,n,i,o){var r=e,a=o,s=n("indoorEntityInformationApi_IndoorMapEntityInformationChangedCallback",null,["number","number"]),l=n("indoorMapEntityInformation_CreateIndoorMapEntityInformation","number",["number","string"]),u=n("indoorMapEntityInformation_DestroyIndoorMapEntityInformation",null,["number","number"]),h=n("indoorEntityInformationApi_TryGetIndoorMapEntityCountBuffer","number",["number","number","number"]),d=n("indoorEntityInformationApi_TryGetIndoorMapEntityInformationLoadState","number",["number","number","number"]),p=n("indoorEntityInformationApi_TryGetIndoorMapEntityBuffersSize","number",["number","number","number","number","number"]),c=n("indoorEntityInformationApi_TryGetIndoorMapEntityModels","number",["number","number","number","number","number","number","number","number","number","number","number","number"]);this.registerIndoorMapEntityInformationChangedCallback=e=>{s(r,i.addFunction(e))},this.createIndoorMapEntityInformation=e=>{var t=e.getIndoorMapId();return l(r,t)},this.destroyIndoorMapEntityInformation=e=>{u(r,e)},this.tryGetIndoorMapEntityInformation=e=>{var n=a.createInt32Buffer(1),i=d(r,e,n.ptr),o=a.consumeBufferToArray(n);if(!i)return null;var s=a.createInt32Buffer(1);i=h(r,e,s.ptr);var l=a.consumeBufferToArray(s)[0];if(!i)return null;var u=a.createInt32Buffer(3),m=a.createInt32Buffer(l);i=p(r,e,l,m.ptr,u.ptr);var g=a.consumeBufferToArray(u),f=a.consumeBufferToArray(m),_=g[0],b=g[1],v=g[2];if(!i)return null;var y=a.createInt8Buffer(_),I=a.createInt32Buffer(l),M=a.createDoubleBuffer(2*l),A=a.createInt32Buffer(l),L=a.createInt32Buffer(b),E=a.createDoubleBuffer(v);i=c(r,e,l,y.ptr,_,I.ptr,M.ptr,A.ptr,L.ptr,b,E.ptr,v);var w=a.consumeUtf8BufferToString(y),C=a.consumeBufferToArray(I),F=a.consumeBufferToArray(M),B=a.consumeBufferToArray(A),P=a.consumeBufferToArray(L),S=a.consumeBufferToArray(E);if(!i)return null;for(var D=[],T=0,x=0,N=0,O=0;O<l;O++){var k=T+f[O],R=w.slice(T,k);T=k;for(var H=C[O],z=t.latLng(F[2*O],F[2*O+1]),G=[],U=x+B[O],V=x;V<U;V++){for(var W=[],j=N+P[V],Z=N;Z<j;Z++)W.push(t.latLng(S[2*Z],S[2*Z+1])),N++;G.push(W),x++}var K=new $e(R,H,z,G);D.push(K)}return{LoadState:o[0],IndoorMapEntities:D}}}class et{constructor(e,t){this._outerRing=void 0,this._innerRings=void 0,this._outerRing=e,this._innerRings=t}getOuterRing(){return this._outerRing}getInnerRings(){return this._innerRings}}class tt{constructor(e){this._latLngPoints=void 0,this._latLngPoints=e}getLatLngPoints(){return this._latLngPoints}}function nt(e,n,i,o){var r=e,a=o,s=n("indoorMapFloorOutlineInformationApi_IndoorMapFloorOutlineInformationLoadedCallback",null,["number","number"]),l=n("indoorMapFloorOutlineInformationApi_CreateIndoorMapFloorOutlineInformation","number",["number","string","number"]),u=n("indoorMapFloorOutlineInformationApi_DestroyIndoorMapFloorOutlineInformation",null,["number","number"]),h=n("indoorMapFloorOutlineInformationApi_GetIndoorMapFloorOutlineInformationLoaded","number",["number","number"]),d=n("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlineBufferSize","number",["number","number","number"]),p=n("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygonBufferSizes","number",["number","number","number","number","number","number"]),c=n("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygon","number",["number","number","number","number","number","number","number","number"]);this.registerIndoorMapFloorOutlineInformationLoadedCallback=e=>{s(r,i.addFunction(e))},this.createIndoorMapFloorOutlineInformation=e=>{var t=e.getIndoorMapId(),n=e.getIndoorMapFloorId();return l(r,t,n)},this.destroyIndoorMapFloorOutlineInformation=e=>{u(r,e)},this.getIndoorMapFloorOutlineInformationLoaded=e=>h(r,e),this.tryGetIndoorMapFloorOutlineInformation=e=>{var t=a.createInt32Buffer(1),n=d(r,e,t.ptr),i=a.consumeBufferToArray(t)[0];if(!n)return null;var o,s=[];for(o=0;o<i;o++){var l=a.createInt32Buffer(1),u=a.createInt32Buffer(1),h=a.createInt32Buffer(1);n=p(r,e,o,l.ptr,u.ptr,h.ptr);var g=a.consumeBufferToArray(l)[0],f=a.consumeBufferToArray(u)[0],_=a.consumeBufferToArray(h)[0];if(!n)return null;var b=a.createDoubleBuffer(2*g),v=a.createInt32Buffer(f),y=a.createDoubleBuffer(2*_);n=c(r,e,o,b.ptr,b.element_count,v.ptr,v.element_count,y.ptr,y.element_count);for(var I=a.consumeBufferToArray(b),M=a.consumeBufferToArray(v),A=a.consumeBufferToArray(y),L=m(I,0,g),E=0,w=[],C=0;C<f;C++){var F=M[C],B=m(A,E,F);E+=2*F,w.push(B)}if(!n)return null;var P=new et(L,w);s.push(P)}return s};var m=(e,n,i)=>{for(var o=n,r=[],a=0;a<i;++a){var s=e[o++],l=e[o++];r.push(t.latLng(s,l))}return new tt(r)}}function it(e,t,n,i){var o=e,r=i,a=t("polylineApi_createPolyline","number",["number","string","number","number","number","number","number","number","number","number","number","number","number"]),s=t("polylineApi_destroyPolyline",null,["number","number"]),l=t("polylineApi_setIndoorMap",null,["number","number","string","number","number"]),u=t("polylineApi_setElevation",null,["number","number","number"]),h=t("polylineApi_setStyleAttributes",null,["number","number","number","number","number"]);this.createPolyline=e=>{var t=[],n=[],i=!1;e.getLatLngs().forEach(e=>{t.push(e.lat),t.push(e.lng);var o=0;void 0!==e.alt&&(i=!0,o=e.alt),n.push(o)}),i||(n=[]);var s=r.createBufferFromArray(t,r.createDoubleBuffer),l=r.createBufferFromArray(n,r.createDoubleBuffer),u=e.getIndoorMapId(),h=e.getIndoorMapFloorId(),d=e.getElevation(),p=C(e.getElevationMode()),c=e.getWidth(),m=Le(e.getColor()),g=e.getMiterLimit(),f=a(o,u,u.length,h,d,p,s.ptr,s.element_count,l.ptr,l.element_count,c,m,g);return r.freeBuffer(s),r.freeBuffer(l),f},this.destroyPolyline=e=>{s(o,e)},this.updateNativeState=(e,t)=>{if(t._needsNativeUpdate){t._needsNativeUpdate=!1;var n=t.getIndoorMapId(),i=C(t.getElevationMode()),r=Le(t.getColor());l(o,e,n,n.length,t.getIndoorMapFloorId()),u(o,e,t.getElevation(),i),h(o,e,t.getWidth(),r,t.getMiterLimit())}}}function ot(e,t,n,i){var o=e,r=t("blueSphereApi_setEnabled",null,["number","number"]),a=t("blueSphereApi_setCoordinate",null,["number","number","number"]),s=t("blueSphereApi_setElevation",null,["number","number"]),l=t("blueSphereApi_setIndoorMap",null,["number","string","number","number"]),u=t("blueSphereApi_setHeadingDegrees",null,["number","number"]),h=t("blueSphereApi_showOrientation",null,["number","number"]);this.updateNativeState=e=>{var t=e.getLocation(),n=e.getIndoorMapId();t?(r(o,e.isEnabled()),a(o,t.lat,t.lng),s(o,e.getElevation()),l(o,n,n.length,e.getIndoorMapFloorId()),u(o,e.getHeadingDegrees()),h(o,e.isOrientationVisible())):r(o,!1)}}function rt(e,t,n,i){var o=e,r=t("webglPause",null,["number"]),a=t("webglResume",null,["number"]),s=t("webglRemove",null,["number"]);this.onPause=()=>{r(o)},this.onResume=()=>{a(o)},this.onRemove=()=>{s(o)}}function at(e,t,n){var i=e,o=n,r=t("versionApi_GetPlatformVersionStringSize","number",["number"]),a=t("versionApi_TryGetPlatformVersionString","number",["number","number","number"]),s=t("versionApi_GetPlatformHashStringSize","number",["number"]),l=t("versionApi_TryGetPlatformHashString","number",["number","number","number"]),u=(e,t)=>{var n=e(i),r=o.createInt8Buffer(n);return t(i,r.ptr,n)?o.consumeUtf8BufferToString(r):null};this.getPlatformVersion=()=>u(r,a),this.getPlatformVersionHash=()=>u(s,l)}!function(e){e.GROUND="ground",e.BUILDINGS="buildings",e.TREES="trees",e.TRANSPORT="transport"}(Xe||(Xe={}));const st=(t.Layer?t.Layer:t.Class).extend({options:{dataCoordProperty:"latLng",dataWeightProperty:"weight",elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,polygonPoints:[],weightMin:0,weightMax:1,resolutionPixels:512,textureBorderPercent:.05,useApproximation:!0,densityStops:[{stop:0,radius:5,gain:1},{stop:1,radius:15,gain:1}],densityBlend:0,interpolateDensityByZoom:!1,zoomMin:15,zoomMax:18,colorGradient:[{stop:0,color:"#ffffff00"},{stop:.2,color:"#ffffb2ff"},{stop:.4,color:"#fecc5cff"},{stop:.6,color:"#fd8d3cff"},{stop:.8,color:"#f03b20ff"},{stop:1,color:"#bd0026ff"}],opacity:1,intensityBias:0,intensityScale:1,occludedMapFeatures:[Xe.BUILDINGS,Xe.TREES],occludedAlpha:.85,occludedSaturation:.7,occludedBrightness:.7},_loadPointData:function(e){const n=[],i=this.options.dataCoordProperty,o=this.options.dataWeightProperty;return e.forEach(e=>{let r,a=1;if(i in e){const n=e;r=t.latLng(n[i]),o in e&&(a=n[o])}else{if(!Array.isArray(e))throw new Error("Expected {latLng, weight} or [<lat>, lng, weight] when parsing pointData.");r=t.latLng(e[0],e[1]),e.length>2&&(a=e[2])}n.push({latLng:r,weight:a})}),n},_getArrayDepth:function(e){let t=0,n=e;do{n=n[0],t++}while(Array.isArray(n));return t},_loadLatLngAlts:function(e){return e.map(t.latLng)},_loadPolygonRings:function(e){let t=[];const n=this._getArrayDepth(e);if(2===n)t.push(this._loadLatLngAlts(e=e));else if(3===n)(e=e).forEach(e=>{t.push(this._loadLatLngAlts(e))},this);else{if(0!==e.length)throw new Error("Incorrect array depth for heatmap options.polygonPoints.");t=[]}return t},_loadDensityParams:function(e){let t=0,n=0,i=0;if(Array.isArray(e)){if(e.length<2)throw new Error("Expected array [<stop>, <radius>, <(optional) gain>] when parsing options.densityStops");t=e[0],n=e[1],i=e.length>2?e[2]:1}else{if(void 0===e.stop||void 0===e.radius)throw new Error("Expected object {stop:<stop>, radius:<radius>, (optional) gain:<gain>} when parsing options.densityStops");t=e.stop,n=e.radius,i=e.gain||1}if(isNaN(t))throw new Error("Expected Number for heatmap density stop parameter: "+String(t));if(isNaN(n))throw new Error("Expected Number for heatmap radius parameter: "+String(n));if(isNaN(i))throw new Error("Expected Number for heatmap gain parameter: "+String(i));return{stop:t,radius:n,gain:i}},_loadDensityStops:function(e){const t=[],n=this._getArrayDepth(e);if(1===n&&Array.isArray(e)&&"number"==typeof e[0])t.push(this._loadDensityParams(e));else{if(!(n<=2))throw new Error("Incorrect array depth for heatmap options.densityStops.");e.forEach(e=>{t.push(this._loadDensityParams(e))},this)}return t},_loadColorStop:function(e){let t=0,n="#ffffffff";if(Array.isArray(e)){if(e.length<2)throw new Error("Expected array [<stop>, <color>] when parsing options.colorGradient");t=e[0],n=e[1]}else{if(void 0===e.stop||void 0===e.color)throw new Error("Expected object {stop:<stop>, color:<color>} when parsing options.colorGradient");t=e.stop,n=e.color}if(isNaN(t))throw new Error("Expected Number for color stop parameter: "+String(t));return{stop:t,color:n}},_loadColorGradient:function(e){const t=[],n=this._getArrayDepth(e);if(1===n&&"number"==typeof e[0])t.push(this._loadColorStop(e=e));else{if(!(n<=2&&Array.isArray(e)))throw new Error("Incorrect array depth for heatmap options.colorGradient.");(e=e).forEach(e=>{t.push(this._loadColorStop(e))},this)}return t},initialize:function(e,t){this.setOptions(t||{}),this._pointData=this._loadPointData(e)},getData:function(){return this._pointData},setData:function(e){return this._pointData=this._loadPointData(e),this._changedFlags.data=!0,this},getPolygonPoints:function(){return this.options.polygonPoints},getIndoorMapId:function(){return this.options.indoorMapId},getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWeightMin:function(){return this.options.weightMin},getWeightMax:function(){return this.options.weightMax},getResolutionPixels:function(){return this.options.resolutionPixels},getTextureBorderPercent:function(){return this.options.textureBorderPercent},getUseApproximation:function(){return this.options.useApproximation},getDensityStops:function(){return this.options.densityStops},getDensityBlend:function(){return this.options.densityBlend},getInterpolateDensityByZoom:function(){return this.options.interpolateDensityByZoom},getZoomMin:function(){return this.options.zoomMin},getZoomMax:function(){return this.options.zoomMax},getColorGradient:function(){return this.options.colorGradient},getOpacity:function(){return this.options.opacity},getIntensityBias:function(){return this.options.intensityBias},getIntensityScale:function(){return this.options.intensityScale},getOccludedMapFeatures:function(){return this.options.occludedMapFeatures},getOccludedAlpha:function(){return this.options.occludedAlpha},getOccludedSaturation:function(){return this.options.occludedSaturation},getOccludedBrightness:function(){return this.options.occludedBrightness},setIndoorMapWithFloorId:function(e,t){if(isNaN(t))throw new Error("Heatmap indoorMapFloorId cannot be NaN");return this.options.indoorMapId=e||st.prototype.options.indoorMapId,this.options.indoorMapFloorId=t,this._changedFlags.indoorMap=!0,this},setElevation:function(e){if(isNaN(e))throw new Error("Heatmap elevation cannot be NaN");return this.options.elevation=e,this._changedFlags.elevation=!0,this},setElevationMode:function(e){if(!w(e))throw new Error("Heatmap elevationMode must be valid");return this.options.elevationMode=e,this._changedFlags.elevation=!0,this},setDensityBlend:function(e){if(isNaN(e))throw new Error("Heatmap densityBlend cannot be NaN");return this.options.densityBlend=Math.min(Math.max(e,0),1),this._changedFlags.densityBlend=!0,this},setInterpolateDensityByZoom:function(e){return this.options.interpolateDensityByZoom=!!e,this._changedFlags.interpolateDensityByZoom=!0,this},setZoomMin:function(e){if(isNaN(e))throw new Error("Heatmap zoomMin cannot be NaN");return this.options.zoomMin=Math.max(e,0),this._changedFlags.interpolateDensityByZoom=!0,this},setZoomMax:function(e){if(isNaN(e))throw new Error("Heatmap zoomMax cannot be NaN");return this.options.zoomMax=Math.max(e,0),this._changedFlags.interpolateDensityByZoom=!0,this},setIntensityBias:function(e){if(isNaN(e))throw new Error("Heatmap intensityBias cannot be NaN");return this.options.intensityBias=Math.min(Math.max(e,0),1),this._changedFlags.intensityBias=!0,this},setIntensityScale:function(e){if(isNaN(e))throw new Error("Heatmap intensityScale cannot be NaN");return this.options.intensityScale=Math.max(e,0),this._changedFlags.intensityScale=!0,this},setOpacity:function(e){if(isNaN(e))throw new Error("Heatmap opacity cannot be NaN");return this.options.opacity=Math.min(Math.max(e,0),1),this._changedFlags.opacity=!0,this},setColorGradient:function(e){return this.options.colorGradient=this._loadColorGradient(e),this._changedFlags.colorGradient=!0,this},setResolution:function(e){if(isNaN(e))throw new Error("Heatmap resolutionPixels cannot be NaN");return this.options.resolutionPixels=Math.max(Math.min(e,2048),64),this._changedFlags.resolution=!0,this},setDensityStops:function(e){return this.options.densityStops=this._loadDensityStops(e),this._changedFlags.densityStops=!0,this},setUseApproximation:function(e){return this.options.useApproximation=!!e,this._changedFlags.useApproximation=!0,this},setWeightMin:function(e){if(isNaN(e))throw new Error("Heatmap weightMin cannot be NaN");return this.options.weightMin=e,this._changedFlags.data=!0,this},setWeightMax:function(e){if(isNaN(e))throw new Error("Heatmap weightMax cannot be NaN");return this.options.weightMax=e,this._changedFlags.data=!0,this},setPolygonPoints:function(e){return this.options.polygonPoints=this._loadPolygonRings(e),this._changedFlags.polygon=!0,this},setOptions:function(e){return t.setOptions(this,e),("indoorMapId"in e||"indooindoorMapFloorIdMapId"in e)&&this.setIndoorMapWithFloorId(this.options.indoorMapId,this.options.indoorMapFloorId),"elevation"in e&&this.setElevation(this.options.elevation),"elevationMode"in e&&this.setElevationMode(this.options.elevationMode),"densityBlend"in e&&this.setDensityBlend(this.options.densityBlend),"interpolateDensityByZoom"in e&&this.setInterpolateDensityByZoom(this.options.interpolateDensityByZoom),"zoomMin"in e&&this.setZoomMin(this.options.zoomMin),"zoomMax"in e&&this.setZoomMax(this.options.zoomMax),"intensityBias"in e&&this.setIntensityBias(this.options.intensityBias),"intensityScale"in e&&this.setIntensityScale(this.options.intensityScale),"opacity"in e&&this.setOpacity(this.options.opacity),"colorGradient"in e&&this.setColorGradient(this.options.colorGradient),"resolutionPixels"in e&&this.setResolution(this.options.resolutionPixels),"densityStops"in e&&this.setDensityStops(this.options.densityStops),"useApproximation"in e&&this.setUseApproximation(this.options.useApproximation),"weightMin"in e&&this.setWeightMin(this.options.weightMin),"weightMax"in e&&this.setWeightMax(this.options.weightMax),"polygonPoints"in e&&this.setPolygonPoints(this.options.polygonPoints),this},_update:function(){},beforeAdd:function(){},onAdd:function(){this._map.heatmaps.addHeatmap(this)},onRemove:function(){this._map.heatmaps.removeHeatmap(this)},redraw:function(){},_changedFlags:{indoorMap:!1,elevation:!1,densityBlend:!1,interpolateDensityByZoom:!1,intensityBias:!1,intensityScale:!1,opacity:!1,colorGradient:!1,occludedStyle:!1,resolution:!1,densityStops:!1,useApproximation:!1,data:!1,polygon:!1},_anyChanged:function(){return Object.values(this._changedFlags).some(Boolean)},_getChangedFlags:function(){return this._changedFlags},_clearChangedFlags:function(){Object.keys(this._changedFlags).forEach(e=>{this._changedFlags[e]=!1},this)}}),lt=u(st);function ut(e,t,n,i){var o=e,r=i,a=t("heatmapApi_createHeatmap","number",["number","string","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),s=t("heatmapApi_destroyHeatmap",null,["number","number"]),l=t("heatmapApi_setIndoorMap",null,["number","number","string","number","number"]),u=t("heatmapApi_setElevation",null,["number","number","number","number"]),h=t("heatmapApi_setDensityBlend",null,["number","number","number"]),d=t("heatmapApi_setInterpolateDensityByZoom",null,["number","number","number","number","number"]),p=t("heatmapApi_setIntensityBias",null,["number","number","number"]),c=t("heatmapApi_setIntensityScale",null,["number","number","number"]),m=t("heatmapApi_setOpacity",null,["number","number","number"]),g=t("heatmapApi_setColorGradient",null,["number","number","number","number","number","number"]),f=t("heatmapApi_setResolution",null,["number","number","number"]),_=t("heatmapApi_setHeatmapDensities",null,["number","number","number","number","number","number","number","number"]),b=t("heatmapApi_useApproximation",null,["number","number","number"]),v=t("heatmapApi_setData",null,["number","number","number","number","number","number"]);const y=e=>{var t=[];return e.forEach(e=>{t.push(e.latLng.lat),t.push(e.latLng.lng);var n=0;void 0!==e.latLng.alt&&(n=e.latLng.alt),t.push(n),t.push(e.weight)}),t};this.createHeatmap=e=>{var t=[],n=[];e.getPolygonPoints().forEach(e=>{n.push(e.length),e.forEach(e=>{t.push(e.lat),t.push(e.lng),t.push(e.alt?e.alt:0)})}),0===t.length&&n.push(0);var i=r.createBufferFromArray(t,r.createDoubleBuffer),s=r.createBufferFromArray(n,r.createInt32Buffer),l=e.getIndoorMapId(),u=e.getIndoorMapFloorId(),h=e.getElevation(),d=C(e.getElevationMode()),p=y(e.getData()),c=r.createBufferFromArray(p,r.createDoubleBuffer),m=[],g=[],f=[];e.getDensityStops().forEach(e=>{m.push(e.stop),g.push(e.radius),f.push(e.gain)});var _=[],b=[];e.getColorGradient().forEach(e=>{_.push(e.stop),b.push(Le(e.color))});var v=r.createBufferFromArray(m,r.createDoubleBuffer),I=r.createBufferFromArray(g,r.createDoubleBuffer),M=r.createBufferFromArray(f,r.createDoubleBuffer),A=r.createBufferFromArray(_,r.createDoubleBuffer),L=r.createBufferFromArray(b,r.createInt32Buffer),E=(e=>{var t=0;return e.forEach(function(e){e===Xe.GROUND?t|=1:e===Xe.BUILDINGS?t|=2:e===Xe.TREES?t|=4:e===Xe.TRANSPORT&&(t|=8)}),t})(e.getOccludedMapFeatures()),w=a(o,l,l.length,u,h,d,i.ptr,i.element_count,s.ptr,s.element_count,c.ptr,c.element_count,e.getWeightMin(),e.getWeightMax(),e.getResolutionPixels(),e.getTextureBorderPercent(),e.getUseApproximation()?1:0,v.ptr,v.element_count,I.ptr,I.element_count,M.ptr,M.element_count,A.ptr,A.element_count,L.ptr,L.element_count,e.getDensityBlend(),e.getInterpolateDensityByZoom(),e.getZoomMin(),e.getZoomMax(),e.getOpacity(),e.getIntensityBias(),e.getIntensityScale(),E,e.getOccludedAlpha(),e.getOccludedSaturation(),e.getOccludedBrightness());return r.freeBuffer(i),r.freeBuffer(s),r.freeBuffer(c),r.freeBuffer(v),r.freeBuffer(I),r.freeBuffer(M),r.freeBuffer(A),r.freeBuffer(L),w},this.destroyHeatmap=e=>{s(o,e)},this.updateNativeState=(e,t)=>{if(t._anyChanged()){var n=t._getChangedFlags();if(n.indoorMap){var i=t.getIndoorMapId();l(o,e,i,i.length,t.getIndoorMapFloorId())}if(n.elevation){var a=C(t.getElevationMode());u(o,e,t.getElevation(),a)}if(n.densityBlend&&h(o,e,t.getDensityBlend()),n.densityBlend&&d(o,e,t.getInterpolateDensityByZoom(),t.getZoomMin(),t.getZoomMax()),n.intensityBias&&p(o,e,t.getIntensityBias()),n.intensityScale&&c(o,e,t.getIntensityScale()),n.opacity&&m(o,e,t.getOpacity()),n.colorGradient){var s=[],I=[];t.getColorGradient().forEach(e=>{s.push(e.stop),I.push(Le(e.color))});var M=r.createBufferFromArray(s,r.createDoubleBuffer),A=r.createBufferFromArray(I,r.createInt32Buffer);g(o,e,M.ptr,M.element_count,A.ptr,A.element_count),r.freeBuffer(M),r.freeBuffer(A)}if(n.resolution&&f(o,e,t.getResolutionPixels()),n.densityStops){var L=[],E=[],w=[];t.getDensityStops().forEach(e=>{L.push(e.stop),E.push(e.radius),w.push(e.gain)});var F=r.createBufferFromArray(L,r.createDoubleBuffer),B=r.createBufferFromArray(E,r.createDoubleBuffer),P=r.createBufferFromArray(w,r.createDoubleBuffer);_(o,e,F.ptr,F.element_count,B.ptr,B.element_count,P.ptr,P.element_count),r.freeBuffer(F),r.freeBuffer(B),r.freeBuffer(P)}if(n.useApproximation&&b(o,e,t.getUseApproximation()?1:0),n.data){var S=y(t.getData()),D=r.createBufferFromArray(S,r.createDoubleBuffer);v(o,e,D.ptr,D.element_count,t.getWeightMin(),t.getWeightMax()),r.freeBuffer(D)}t._clearChangedFlags()}}}function ht(e,t,n,i){var o=e,r=t("frameRateApi_SetTargetVSyncInterval",null,["number","number"]),a=t("frameRateApi_SetThrottledTargetFrameInterval",null,["number","number"]),s=t("frameRateApi_SetIdleSecondsBeforeThrottle",null,["number","number"]),l=t("frameRateApi_SetThrottleWhenIdleEnabled",null,["number","number"]),u=t("frameRateApi_CancelThrottle",null,["number"]);this.setTargetVSyncInterval=e=>{r(o,e)},this.setThrottledTargetFrameInterval=e=>{a(o,e)},this.setIdleSecondsBeforeThrottle=e=>{s(o,e)},this.setThrottleWhenIdleEnabled=e=>{l(o,e?1:0)},this.cancelThrottle=()=>{u(o)}}function dt(e){var t=e,n=!1,i=null,o=null;this.geofenceApi=null,this.indoorsApi=null,this.precacheApi=null,this.spacesApi=null,this.themesApi=null,this.cameraApi=null,this.expandFloorsApi=null,this.indoorEntityApi=null,this.renderingApi=null,this.buildingsApi=null,this.layerPointMappingApi=null,this.propsApi=null,this.indoorMapEntityInformationApi=null,this.indoorMapFloorOutlineInformationApi=null,this.polylineApi=null,this.blueSphereApi=null,this.mapRuntimeApi=null,this.versionApi=null,this.heatmapApi=null,this.frameRateApi=null,this.onInitialized=(e,r,a,s,l)=>{i=e,o=r;var u=t.cwrap,h=new Me(t);this.geofenceApi=new Ee(i,u,t),this.spacesApi=new Fe(i,u,t,h),this.themesApi=new Be(i,u,t),this.expandFloorsApi=new Se(i,u,t),this.layerPointMappingApi=new je(o,u,t,h),this.buildingsApi=new Ve(o,u,t,h),this.indoorsApi=new we(o,u,t,h),this.cameraApi=new Pe(o,u,t,h),this.indoorEntityApi=new De(o,u,t,h),this.precacheApi=new Ce(o,u,t),this.indoorMapEntityInformationApi=new Qe(o,u,t,h),this.indoorMapFloorOutlineInformationApi=new nt(o,u,t,h),this.polylineApi=new it(o,u,t,h),this.blueSphereApi=new ot(o,u,t,h),this.mapRuntimeApi=new rt(o,u,t,h),this.versionApi=new at(o,u,h),this.heatmapApi=new ut(o,u,t,h),this.renderingApi=new We(o,u,t,h),this.frameRateApi=new ht(o,u,t,h),this.propsApi=new Ke(o,u,t,h),t.cwrap("setTopLevelCallbacks",null,["number","number","number","number"])(i,t.addFunction(a),t.addFunction(s),t.addFunction(l)),n=!0},this.ready=()=>n}const pt="https://cdn-webgl.wrld3d.com/eegeojs/public/v2117/",ct=[];let mt=!1,gt=!1,ft=[];const _t=()=>{gt=!0,ft.forEach(e=>{window.createWrldModule(e)}),ft=[]},bt=t.Circle.extend({options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND},_project:function(){const e=this._map.latLngsForLayer(this)[0],t=e.lat,n=e.lng,i=e.alt||0,o=this._map,r=Math.PI/180,a=this._mRadius/6378100/r,s=Math.sin(t*r),l=Math.cos(t*r);let u=Math.acos((Math.cos(a*r)-s*s)/(l*l))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(t*r));const h=o.getCameraHeadingDegrees()*r,d=[t+a*Math.cos(h),n+u*Math.sin(h),i],p=[t-a*Math.sin(h),n+u*Math.cos(h),i];this._point=o.latLngToLayerPoint([t,n,i]),this._radius=isNaN(u)?0:Math.max(Math.round(this._point.distanceTo(o.latLngToLayerPoint(p))),1),this._radiusY=Math.max(Math.round(this._point.distanceTo(o.latLngToLayerPoint(d))),1),this._updateBounds()},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),vt=u(bt),yt=t.Polygon.extend({options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,n,i){this._map._projectLatlngs(this,e,n,i)||t.Polygon.prototype._projectLatlngs.call(this,e,n,i)},setLatLngs:function(e){return this._setLatLngs(e),this._map&&this._map._createPointMapping(this),this.redraw()},_convertLatLngs:function(e){const n=t.Polygon.prototype._convertLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),n},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),It=u(yt),Mt=t.Polyline.extend({options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,n,i){this._map._projectLatlngs(this,e,n,i)||t.Polyline.prototype._projectLatlngs.call(this,e,n,i)},setLatLngs:function(e){const n=t.Polyline.prototype.setLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),n},addLatLng:function(e,n){const i=t.Polyline.prototype.addLatLng.call(this,e,n);return this._map&&this._map._createPointMapping(this),i},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),At=u(Mt),Lt=t.Rectangle.extend({options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,n,i){this._map._projectLatlngs(this,e,n,i)||t.Rectangle.prototype._projectLatlngs.call(this,e,n,i)},setLatLngs:function(e){const n=t.Rectangle.prototype.setLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),n},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),Et=u(Lt);class wt{constructor(e,n,i,o={}){this._map=void 0,this._name=void 0,this._geometryId=void 0,this.__geometryIdNeedsChanged=void 0,this._location=void 0,this.__locationNeedsChanged=void 0,this._indoorMapId=void 0,this._indoorMapFloorId=void 0,this._headingDegrees=void 0,this.__headingDegreesNeedsChanged=void 0,this._elevation=void 0,this.__elevationNeedsChanged=void 0,this._elevationMode=void 0,this.__elevationModeNeedsChanged=void 0,this.getLocation=()=>this._location,this.setLocation=e=>(this._location=t.latLng(e),this.__locationNeedsChanged=!0,this),this.getIndoorMapId=()=>this._indoorMapId,this.getIndoorMapFloorId=()=>this._indoorMapFloorId,this.getHeadingDegrees=()=>this._headingDegrees,this.setHeadingDegrees=e=>(this._headingDegrees=e,this.__headingDegreesNeedsChanged=!0,this),this.getElevation=()=>this._elevation,this.setElevation=e=>(this._elevation=e,this.__elevationNeedsChanged=!0,this),this.getElevationMode=()=>this._elevationMode,this.setElevationMode=e=>(w(e)&&(this._elevationMode=e,this.__elevationModeNeedsChanged=!0),this),this.getGeometryId=()=>this._geometryId,this.setGeometryId=e=>(this._geometryId=e,this.__geometryIdNeedsChanged=!0,this),this.getName=()=>this._name,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,e.props.addProp(this),this),this.remove=()=>(null!==this._map&&(this._map.props.removeProp(this),this._map=null),this),this._geometryIdNeedsChanged=()=>this.__geometryIdNeedsChanged,this._onGeometryIdChanged=()=>{this.__geometryIdNeedsChanged=!1},this._locationNeedsChanged=()=>this.__locationNeedsChanged,this._onLocationChanged=()=>{this.__locationNeedsChanged=!1},this._headingDegreesNeedsChanged=()=>this.__headingDegreesNeedsChanged,this._onHeadingDegreesChanged=()=>{this.__headingDegreesNeedsChanged=!1},this._elevationNeedsChanged=()=>this.__elevationNeedsChanged,this._onElevationChanged=()=>{this.__elevationNeedsChanged=!1},this._elevationModeNeedsChanged=()=>this.__elevationModeNeedsChanged,this._onElevationModeChanged=()=>{this.__elevationModeNeedsChanged=!1},this._map=null,this._name=e,this._geometryId=n,this.__geometryIdNeedsChanged=!1,this._location=t.latLng(i),this.__locationNeedsChanged=!1,this._indoorMapId=o.indoorMapId||"",this._indoorMapFloorId=o.indoorMapFloorId||0,this._headingDegrees=o.headingDegrees||0,this.__headingDegreesNeedsChanged=!1,this._elevation=o.elevation||0,this.__elevationNeedsChanged=!1,this._elevationMode=o.elevationMode||E.HEIGHT_ABOVE_GROUND,this.__elevationModeNeedsChanged=!1}}const Ct=u(wt);class Ft{constructor(e,t){this._map=void 0,this._outerRing=void 0,this._holes=void 0,this._config=void 0,this._color=void 0,this.__colorNeedsChanged=void 0,this.getColor=()=>this._color,this.setColor=e=>(this._color=e,this.__colorNeedsChanged=!0,this),this.addHole=e=>(this._holes.push(Bt(e)),this),this.getHoles=()=>this._holes,this.getPoints=()=>this._outerRing,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,e._polygonModule.addPolygon(this),this),this.remove=()=>(null!==this._map&&(this._map._polygonModule.removePolygon(this),this._map=null),this),this._getConfig=()=>this._config,this._colorNeedsChanged=()=>this.__colorNeedsChanged,this._onColorChanged=()=>{this.__colorNeedsChanged=!1},this._map=null,this._outerRing=[],this._holes=[],this._config=t||{};let n=0,i=e;do{i=i[0],n++}while(Array.isArray(i));if(2===n)this._outerRing=Bt(e);else{if(3!==n)throw new Error("Incorrect array input format.");this._outerRing=Bt(e[0]),e.splice(1).forEach(e=>{this._holes.push(Bt(e))})}this._color=this._config.color||[0,0,255,128],this.__colorNeedsChanged=!0}}const Bt=e=>{const n=[];return e.forEach(function(e){n.push(t.latLng(e))}),n},Pt=u(Ft),St=t.Polyline.extend({initialize:function(e,n){t.Polyline.prototype.initialize.call(this,e,n||{})},options:{elevation:0,elevationMode:E.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,weight:3,miterLimit:10},getPoints:function(){return this.getLatLngs()},getIndoorMapId:function(){return this.options.indoorMapId},getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWidth:function(){return this.options.weight},getColor:function(){return this.options.color},getMiterLimit:function(){return this.options.miterLimit},setIndoorMapWithFloorId:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorId=t,this._needsNativeUpdate=!0,this},setElevation:function(e){return this.options.elevation=e,this._needsNativeUpdate=!0,this},setElevationMode:function(e){return w(e)&&(this.options.elevationMode=e),this._needsNativeUpdate=!0,this},setOptions:function(e){return this.setStyle(e)},setStyle:function(e){return t.Polyline.prototype.setStyle.call(this,e),this._needsNativeUpdate=!0,this},_needsNativeUpdate:!1,_update:function(){},beforeAdd:function(){},onAdd:function(){this._map._polylineModule.addPolyline(this)},onRemove:function(){this._map._polylineModule.removePolyline(this)},redraw:function(){}});var Dt={__proto__:null,polygon:Pt,Polygon:Ft,polyline:u(St),Polyline:St};class Tt{constructor(e,t){this._nativeId=void 0,this._map=void 0,this._indoorMapId=void 0,this._indoorMapFloorId=void 0,this._outlinePolygons=void 0,this._isLoaded=void 0,this.remove=()=>(null!==this._map&&(this._map.indoorMapFloorOutlines._getImpl().removeIndoorMapFloorOutlineInformation(this),this._map=null),this),this._setNativeHandle=e=>{this._nativeId=e},this._setData=e=>{this._outlinePolygons=e,this._isLoaded=!0},this._nativeId=null,this._map=null,this._indoorMapId=e,this._indoorMapFloorId=t,this._outlinePolygons=[],this._isLoaded=!1}getIndoorMapId(){return this._indoorMapId}getIndoorMapFloorId(){return this._indoorMapFloorId}getIndoorMapFloorOutlinePolygons(){return this._outlinePolygons}getIsLoaded(){return this._isLoaded}getId(){return this._nativeId}addTo(e){return null!==this._map&&this.remove(),this._map=e,this._map.indoorMapFloorOutlines._getImpl().addIndoorMapFloorOutlineInformation(this),this}}const xt=u(Tt);var Nt=i({__proto__:null,Map:I,map:(e,t,n)=>{const i=(()=>{if(!mt){const e=document.createElement("script");e.src=`${pt}eeGeoWebGL.jgz`,e.onload=_t,document.body.appendChild(e),mt=!0}const e={locateFile:e=>`${pt}${e}`,onExit:t=>{if(1===t){let t="Error: wrld.js failed to initialize";e.ctx||(t="Error: WebGL unavailable in this browser"),ct.forEach(e=>{e.onError(t)})}}};return e})();e=(e=>{if(e instanceof HTMLElement)return e;if("string"==typeof e){const t=document.getElementById(e);if(t)return t}throw"No map container found"+(null===e?"":` with id "${e}"`)})(e);const o=document,r=window,a=ct.length,s=new dt(i),l=new Ie(a,s,e,t,r,o,i,n||{},()=>{delete ct[a]});var u;return ct.push(l),u=i,gt?window.createWrldModule(u):ft.push(u),l.leafletMap},indoors:U,space:_,themes:k,buildings:Ue,indoorMapEntities:Ye,indoorMapFloorOutlines:{__proto__:null,indoorMapFloorOutlineInformation:xt,IndoorMapFloorOutlineInformation:Tt,IndoorMapFloorOutlinePolygon:et,IndoorMapFloorOutlinePolygonRing:tt},native:Dt,getMapById:e=>ct[e],marker:B,Marker:F,circle:vt,Circle:bt,heatmap:lt,Heatmap:st,polygon:It,Polygon:yt,polyline:At,Polyline:Mt,rectangle:Et,Rectangle:Lt,popup:d,Popup:h,prop:Ct,Prop:wt},[e]);window.L.Wrld=Nt,n.Default.imagePath="https://unpkg.com/leaflet@1.0.1/dist/images/";export{Nt as default};
//# sourceMappingURL=wrld.module.js.map
