var e=require("leaflet");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}function i(e,t){return t.forEach(function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})}),e}var o=t(e),r=n(e);Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),n=t.length>>>0,i=arguments[1],o=0;o<n;o++)if(e.call(i,t[o],o,t))return o;return-1}),Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),i=n.length>>>0,o=arguments[1],r=0;r<i;r++)if(e.call(o,t=n[r],r,n))return t});const a=(e,t)=>void 0===e.options?null:t in e.options?e.options[t]:null,s=e=>{var t=a(e,"indoorMapId");return""===t?null:t},l=e=>a(e,"indoorMapFloorId"),u=e=>{var t=a(e,"indoorMapFloorIndex");return null!==t?t:a(e,"indoorFloorIndex")},d=(e,t,n,i)=>{n in e&&(i in t||(t[i]=e[n]))},h=e=>function(){return new e(...[].slice.call(arguments))},p=o.default.Popup.extend({options:{elevation:0,closeWhenMovedOffscreen:!1},_onScreen:!1,getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,this},getCloseWhenMovedOffscreen:function(){return this.options.closeWhenMovedOffscreen},setCloseWhenMovedOffscreen:function(e){return this.options.closeWhenMovedOffscreen=e,this},_updateContent:function(){if(!this._content)return;const e=this._contentNode,t="function"==typeof this._content?this._content(this._source||this):this._content;let n=!0;if(t.outerHTML&&t.outerHTML===e.innerHTML&&(n=!1),"string"==typeof t)e.innerHTML=t;else if(!e.hasChildNodes()||n){for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire("contentupdate")},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan(),this.options.closeWhenMovedOffscreen&&(this._onScreen&&this._checkOutOfBounds()?(this._onScreen=!1,this._close()):this._onScreen=!this._checkOutOfBounds()))},_updatePosition:function(){if(!this._map)return;const e=this._map.latLngsForLayer(this),t=this._map.latLngToLayerPoint(e[0]);let n=o.default.point(this.options.offset);const i=this._getAnchor();i.x=Math.round(i.x),i.y=Math.round(i.y),this._zoomAnimated?o.default.DomUtil.setPosition(this._container,t.add(i)):n=n.add(t).add(i);const r=this._containerBottom=-n.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+n.x,s=Math.round(r)+"px",l=Math.round(a)+"px";o.default.DomUtil.getStyle(this._container,"left")!==l&&(this._container.style.left=l),o.default.DomUtil.getStyle(this._container,"bottom")!==s&&(this._container.style.bottom=s)},_checkOutOfBounds:function(){const e=this._container.getBoundingClientRect(),t=e.bottom-e.top,n=e.right-e.left,i=this._map._container.getBoundingClientRect();return e.bottom>i.bottom+t/2||e.top<i.top-t/2||e.right>i.right+n/2||e.left<i.left-n/2}}),c=h(p);class m{constructor(){this.x=void 0,this.y=void 0,this.z=void 0;var e=[].slice.call(arguments);if("number"==typeof e[0]){const[t,n,i]=e;this.x=t,this.y=n,this.z=i||0}else{const t=e[0];this.x=Array.isArray(t)?t[0]:t.x,this.y=Array.isArray(t)?t[1]||0:t.y,this.z=Array.isArray(t)?t[2]||0:t.z}}toPoint(){return o.default.point(this.x,this.y)}}class g{constructor(){this.x=void 0,this.y=void 0,this.z=void 0,this.w=void 0;var e=[].slice.call(arguments);if("number"==typeof e[0]){const[t,n,i,o]=e;this.x=t,this.y=n,this.z=i||0,this.w=o||1}else{const t=e[0];this.x=Array.isArray(t)?t[0]:t.x,this.y=Array.isArray(t)?t[1]:t.y,this.z=Array.isArray(t)?t[2]||0:t.z,this.w=Array.isArray(t)?t[3]||1:t.w}}}const f=[27428700,14720762,8e6,4512909,2087317,1248854,660556,351205,185652,83092,41899,21377,11294,5818,3106,1890,1300,821,500,300,108,58,31,17,9,5],_=(e,t,n)=>e+n*(t-e),b=(e,t)=>{const n=f.findIndex(n=>t(e,n));return-1===n?f.length-1:n};var v={__proto__:null,Vector3:m,Vector4:g,zoomToDistance:e=>{let t=e;t<0?t=0:t>=f.length&&(t=f.length-1);const n=Math.floor(t),i=Math.ceil(t);return _(f[n],f[i],t-n)},distanceToZoom:e=>{const t=f.length-1;e<f[t]&&(e=f[t]),e>f[0]&&(e=f[0]);const n=(e=>{const t=b(e,(e,t)=>e>t);return Math.max(0,t-1)})(e),i=(e=>b(e,(e,t)=>e>=t))(e);return n===i?i:_(i,n,(e-f[i])/(f[n]-f[i]))}};const y=o.default.point(-100,-100),I=o.default.latLng(0,0),M=e=>{const t=e.lat*Math.PI/180,n=e.lng*Math.PI/180,i=Math.cos(t)*Math.cos(n),o=Math.cos(t)*Math.sin(n),r=Math.sin(t);return new m(i,o,r)};o.default.Renderer.include({_updateTransform:()=>{}});const A=o.default.Map.extend({initialize:function(e,t,n,i,r,a,s,l,u,d,h,p,c,m,g,f,_,b,v,y,I,M){this._browserWindow=e,this._onRemoveCallback=i,this._cameraModule=r,this._precacheModule=a,this._polygonModule=u,this._polylineModule=d,this._layerPointMappingModule=h,this._frameRateModule=M,this.themes=s,this.indoors=l,this.routes=p,this.rendering=c,this.buildings=m,this.props=g,this.indoorMapEntities=f,this.indoorMapFloorOutlines=_,this.blueSphere=b,this.versionModule=y,this.heatmaps=I,this._mapRuntimeModule=v,this._layersOnMap={},this._spacesApi=null,this._ready=!1,this._viewInitialized=!1,o.default.Map.prototype.initialize.call(this,t,n),this.dragging.disable(),this.touchZoom.disable(),this.doubleClickZoom.disable(),this.scrollWheelZoom.disable(),this.boxZoom.disable(),this.keyboard.disable(),this.attributionControl.setPrefix("<a href='http://leafletjs.com' title='A JS library for interactive maps' target='_blank'>Leaflet</a>"),this.attributionControl.addAttribution("3D Maps &copy; <a href='https://www.wrld3d.com' target='_blank'>WRLD</a> and <a href='https://www.wrld3d.com/legal/' target='_blank'>partners</a>")},_initEvents:function(e,t){if(!o.default.DomEvent||!t)return;this._targets={},this._targets[o.default.stamp(t)]=this;const n=e?"off":"on";o.default.DomEvent[n](t,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),o.default.DomEvent[n](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&o.default.DomEvent[n](this._browserWindow,"resize",this._onResize,this),o.default.Browser.any3d&&this.options.transform3DLimit&&this[n]("moveend",this._onMoveEnd)},_handleDOMEvent:function(e){if(o.default.Map.prototype._handleDOMEvent.call(this,e),"contextmenu"===e.type&&o.default.DomEvent.preventDefault(e),"mousedown"===e.type){let t=e.target;for(;t&&"string"==typeof t.className&&"wrld-map-container"!==t.className;){if(-1!==t.className.indexOf("leaflet-marker")){o.default.DomEvent.stopPropagation(e);break}t=t.parentNode}}},addLayer:function(e){const t=o.default.stamp(e);return t in this._layersOnMap||(this._createPointMapping(e),this._layersOnMap[t]=e,o.default.Map.prototype.addLayer.call(this,e)),this},removeLayer:function(e){const t=o.default.stamp(e);return t in this._layersOnMap?(this._removePointMapping(e),o.default.Map.prototype.removeLayer.call(this,e),delete this._layersOnMap[t],this):this},_removeAllLayers:function(){Object.keys(this._layersOnMap).forEach(e=>{const t=this._layersOnMap[e];void 0!==t&&this.removeLayer(t)})},onInitialized:function(e){this._spacesApi=e.spacesApi,this._ready=!0;const t=this.getPanes();t.mapPane.style.zIndex="10",t.mapPane.style.pointerEvents="auto",t.overlayPane.style.pointerEvents="none",this.fire("initialize")},onInitialStreamingCompleted:function(){this.fire("initialstreamingcomplete")},latLngToLayerPoint:function(e){return this._ready?this._spacesApi?.worldToScreen(e).toPoint():y},layerPointToLatLng:function(e){return(this._ready?this._spacesApi?.screenToWorldPoint(e):null)||I},latLngToContainerPoint:function(e){return this.latLngToLayerPoint(e)},containerPointToLatLng:function(e){return this.layerPointToLatLng(e)},containerPointToLayerPoint:function(e){return e},layerPointToContainerPoint:function(e){return e},latLngsForLayer:function(e){return this._layerPointMappingModule.latLngsForLayer(e)},_createPointMapping:function(e){this._layerPointMappingModule.createPointMapping(e)},_removePointMapping:function(e){this._layerPointMappingModule.removePointMapping(e)},_projectLatlngs:function(e,t,n,i){return this._layerPointMappingModule.projectLatlngs(e,t,n,i)},_updateZoom:function(){this._zoom=this.getZoom()},setView:function(e,t,n){this._viewInitialized||(o.default.Map.prototype.setView.call(this,e,t,{reset:!0}),this._viewInitialized=!0),t=void 0===t?this._zoom:this._limitZoom(t),e=this._limitCenter(o.default.latLng(e),t,this.options.maxBounds),"animate"in(n=n||{})||("object"==typeof n.pan&&"animate"in n.pan?n.animate=n.pan.animate:"object"==typeof n.zoom&&"animate"in n.zoom&&(n.animate=n.zoom.animate)),"allowInterruption"in n||("object"==typeof n.pan&&"allowInterruption"in n.pan?n.allowInterruption=n.pan.allowInterruption:"object"==typeof n.zoom&&"allowInterruption"in n.zoom&&(n.allowInterruption=n.zoom.allowInterruption));const i={...n,zoom:t,location:e};return this._cameraModule.setView(i),this},zoomIn:function(e){e=e||1;const t={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()+e,durationSeconds:.33,allowInterruption:!1};return t.zoom<=this.getMaxZoom()&&(this.fire("zoomstart"),this.once("transitionend",()=>{this.fire("zoomend")}),this._cameraModule.setView(t),this._updateZoom()),this},zoomOut:function(e){e=e||1;const t={location:this.getCenter(),zoom:this._cameraModule.getCurrentZoomLevel()-e,durationSeconds:.33,allowInterruption:!1};return t.zoom>=this.getMinZoom()&&(this.fire("zoomstart"),this.once("transitionend",()=>{this.fire("zoomend")}),this._cameraModule.setView(t),this._updateZoom()),this},setZoomAround:function(){return this},setViewVerticallyLocked:function(e){return this._cameraModule.setVerticallyLocked(e),this},fitBounds:function(e){return this._cameraModule.setViewToBounds({bounds:e}),this},fitWorld:function(){return this.setZoom(0)},panTo:function(e,t){return this._updateZoom(),o.default.Map.prototype.panTo.call(this,e,t)},panInsideBounds:function(e,t){return this._updateZoom(),o.default.Map.prototype.panInsideBounds.call(this,e,t)},panBy:function(){return this},getCenter:function(){return this._cameraModule.getCenter()},pause:function(){return this._mapRuntimeModule.Pause()},resume:function(){return this._mapRuntimeModule.Resume()},getZoom:function(){return this._zoom=this._cameraModule.getCurrentZoomLevel(),this._zoom},getBounds:function(){const e=this.layerPointToLatLng(new o.default.Point(0,0)),t=this.layerPointToLatLng(new o.default.Point(this.getContainer().clientWidth,0)),n=this.layerPointToLatLng(new o.default.Point(0,this.getContainer().clientHeight)),i=this.layerPointToLatLng(new o.default.Point(this.getContainer().clientWidth,this.getContainer().clientHeight));return o.default.latLngBounds([e,t,n,i])},locate:function(){return this},stopLocate:function(){return this},remove:function(){return this._removeAllLayers(),this._mapRuntimeModule.Remove(),this._onRemoveCallback(),this},openPopup:function(e,t,n){let i;if(e instanceof o.default.Popup)i=e;else{const o=e;i=new p(n).setLatLng(t).setContent(o)}return o.default.Map.prototype.openPopup.call(this,i,t,n)},_onUpdate:function(){this.fire("update")},_onDraw:function(){this._updateLayerVisibility(),this.eachLayer(e=>{e.update?e.update():e.redraw&&e.redraw()}),this.fire("draw")},getAltitudeAtLatLng:function(e){return this._ready?this._spacesApi?.getAltitudeAtLatLng(e):0},getMortonKeyAtLatLng:function(e){return this._ready?this._spacesApi?.getMortonKeyAtLatLng(e):null},getMortonKeyCenter:function(e){return this._ready?this._spacesApi?.getMortonKeyCenter(e):null},getMortonKeyCorners:function(e,t){return this._ready?this._spacesApi?.getMortonKeyCorners(e,t):null},getCameraDistanceToInterest:function(){return this._cameraModule.getDistanceToInterest()},getCameraPitchDegrees:function(){return this._cameraModule.getPitchDegrees()},setCameraTiltDegrees:function(e){return this._cameraModule.setTiltDegrees(e),this},getCameraTiltDegrees:function(){return this._cameraModule.getTiltDegrees()},getCameraHeadingDegrees:function(){return this._cameraModule.getHeadingDegrees()},setCameraHeadingDegrees:function(e){return this._cameraModule.setHeadingDegrees(e),this},getMaximumPrecacheRadius:function(){return this._precacheModule.getMaximumPrecacheRadius()},precache:function(e,t,n){return this.precacheWithDetailedResult(e,t,e=>{n(e.succeeded)})},precacheWithDetailedResult:function(e,t,n){return this._precacheModule.precache(e,t,n)},setMapCollapsed:function(e){return this.rendering.setMapCollapsed(e),this},isMapCollapsed:function(){return this.rendering.isMapCollapsed()},setDrawClearColor:function(e){return this.rendering.setClearColor(e),this},setTargetVSyncInterval:function(e){return this._frameRateModule.setTargetVSyncInterval(e),this},setThrottledTargetFrameInterval:function(e){return this._frameRateModule.setThrottledTargetFrameInterval(e),this},setIdleSecondsBeforeThrottle:function(e){return this._frameRateModule.setIdleSecondsBeforeThrottle(e),this},setThrottleWhenIdleEnabled:function(e){return this._frameRateModule.setThrottleWhenIdleEnabled(e),this},cancelFrameRateThrottle:function(){return this._frameRateModule.cancelThrottle(),this},isHardwareAccelerationAvailable:function(){const e=document.createElement("canvas"),t={failIfMajorPerformanceCaveat:!0},n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);return!!(n&&n instanceof WebGLRenderingContext)},_getAngleFromCameraToHorizon:function(){const e=this.getCameraDistanceToInterest(),t=6378100;return Math.acos(t/(t+e))},_isLatLngBehindEarth:function(e,t,n){const i=M(e);return t.x*i.x+t.y*i.y+t.z*i.z<Math.cos(n)},_updateLayerVisibility:function(){const e=Object.keys(this._layersOnMap),t=M(this.getCenter()),n=this._getAngleFromCameraToHorizon();e.forEach(e=>{const i=this._layersOnMap[e];if(void 0===i)return;const r=(e=>e.getLatLng?e.getLatLng():e.getBounds&&e.getBounds().isValid()?e.getBounds().getCenter():null)(i);if(null===r||i instanceof o.default.FeatureGroup)return;const a=this._isLatLngBehindEarth(r,t,n),s=this.hasLayer(i),l=this._isVisibleForCurrentMapState(i);s||a||!l?!s||!a&&l||o.default.Map.prototype.removeLayer.call(this,i):o.default.Map.prototype.addLayer.call(this,i)})},_isVisibleForCurrentMapState:function(e){const t=!this.indoors.isIndoors(),n=!(e=>null!==s(e))(e);return"currentMap"===e.options?.displayOption||(t?n:!n&&((e,t,n,i)=>{var o=(e=>a(e,"displayOption")||"currentFloor")(i);return"always"===o||"currentIndoorMap"===o&&e===s(i)||!("currentFloor"!==o||e!==s(i)||!((e,t,n)=>e===l(n)||t===u(n))(t,n,i))})(this.indoors.getActiveIndoorMap()?.getIndoorMapId(),this.indoors.getFloor()?.getFloorZOrder(),this.indoors.getFloor()?.getFloorIndex(),e))},_rawPanBy:function(){}});function L(e,t,n,i,o,r,a,s,l){var u=t,d=e,h=(e,t,n,i)=>{var o=d.createElement(t);for(var r in n)o.setAttribute(r,n[r]);for(var a in i)o.style[a]=i[a];return e.appendChild(o),o};this.mapContainer=(e=>{var t=h(e,"div",{class:"wrld-map-container",id:s},{position:"relative",width:"100%",height:"100%","line-height":"0px",padding:"0px",margin:"0px",overflow:"hidden",cursor:"default"}),n=document.createElement("style");return n.type="text/css",n.innerHTML=".leaflet-dragging .wrld-map-container { cursor: move; cursor: -webkit-grabbing; cursor: -moz-grabbing; }",document.head.appendChild(n),t.onmousedown=e=>{if(1===e.button)return!1},void 0===t.onwheel&&(t.onwheel=null),t})(n),this.loadingSpinnerIcon=(e=>h(this.mapContainer,"div",{},{position:"absolute",width:"18px",height:"18px","z-index":"20","background-image":"url('https://cdn-webgl.wrld3d.com/wrldjs/resources/loading_spinner.png')"}))(),this.overlay=(e=>h(this.mapContainer,"div",{class:"wrld-leaflet-overlay"},{position:"absolute",overflow:"hidden",width:"100%",height:"100%",background:"transparent","pointer-events":"none"}))(),this.indoorMapWatermark=(e=>h(this.mapContainer,"img",{id:"wrld-indoor-map-watermark"+l,class:"wrld-indoor-map-watermark",draggable:"false"},{position:"absolute","z-index":"20",display:"block",margin:"auto auto 0 auto",left:"0",right:"0",bottom:"-50px",transition:"all 500ms"}))(),this.canvas=((e,t,n,i,o)=>{var r={class:"wrld-map-canvas",id:t,oncontextmenu:"event.preventDefault();",width:n.toString(),height:i.toString()};return h(e,"canvas",r,{"background-color":o})})(this.mapContainer,i,o,r,a),this.loadingSpinner=new E(u,this.loadingSpinnerIcon),this.loadingSpinner.startSpinning(),this.onInitialized=()=>{this.loadingSpinner.stopSpinning(),this.loadingSpinnerIcon.parentNode.removeChild(this.loadingSpinnerIcon)},this.onError=e=>{this.loadingSpinner.stopSpinning(),((e,t)=>{h(this.mapContainer,"div",{class:"wrld-error-message"},{position:"absolute",left:"0px",bottom:"0px","line-height":"normal",color:"white","font-family":"sans-serif","font-weight":"bold",margin:"0.5em"}).textContent=t})(0,e)},this.width=()=>this.mapContainer.clientWidth,this.height=()=>this.mapContainer.clientHeight,this.onRemove=()=>{this.mapContainer.parentElement&&this.mapContainer.parentElement.removeChild(this.mapContainer)}}function E(e,t){var n=e,i=t,o=!1,r=e=>{o&&(i.style.transform="rotate("+(e||0)/1e3*360%360+"deg)",n.requestAnimationFrame(r))};this.startSpinning=()=>{o=!0,r()},this.stopSpinning=()=>{o=!1}}const w=(e,t,n=!1)=>{o.default.DomUtil.setPosition(e,t),!n&&o.default.Browser.any3d&&(e.style[o.default.DomUtil.TRANSFORM]+=" rotate(0.0001deg)")};var C;!function(e){e.HEIGHT_ABOVE_GROUND="heightAboveGround",e.HEIGHT_ABOVE_SEA_LEVEL="heightAboveSeaLevel"}(C||(C={}));const F=e=>e===C.HEIGHT_ABOVE_GROUND||e===C.HEIGHT_ABOVE_SEA_LEVEL,B=e=>{let t=1;return e&&e.toLowerCase()===C.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase()&&(t=0),t},P=o.default.Marker.extend({initialize:function(e,t){o.default.Marker.prototype.initialize.call(this,e,t),this.on("dragstart",this._onDragStart),this.on("drag",this._onDrag),this.on("dragend",this._onDragEnd),this._elevationBeforeDrag=0,this._isDragging=!1,this._latOffsetForDrag=0,this._lngOffsetForDrag=0},options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode},setIndoorMapWithFloorId:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorId=t,null!==this._map&&this._map._createPointMapping(this),this},setIndoorMapWithFloorIndex:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorIndex=t,null!==this._map&&this._map._createPointMapping(this),this},setOutdoor:function(){return delete this.options.indoorMapId,delete this.options.indoorMapFloorId,delete this.options.indoorMapFloorIndex,null!==this._map&&this._map._createPointMapping(this),this},setLatLng:function(e){const t=o.default.Marker.prototype.setLatLng.call(this,e);return this._map&&this._map._createPointMapping(this),t},update:function(){if(this._icon){const e=this._map.latLngsForLayer(this);let t;t=this._map.latLngToLayerPoint(this._isDragging?this.getLatLng():e[0]),this._setPos(t)}return this},_setPos:function(e){const t=o.default.Browser.gecko?w:o.default.DomUtil.setPosition;t(this._icon,e),this._shadow&&t(this._shadow,e),this._zIndex=1e4*e.y+1e4*this.options.zIndexOffset,this._resetZIndex()},bindPopup:function(e,t){let n=e;var i,r;return e instanceof o.default.Popup||(t||(t={}),"elevation"in t||(t.elevation=this.getElevation()),"elevationMode"in t||(t.elevationMode=this.options.elevationMode),d(i=this.options,r=t,"indoorMapId","indoorMapId"),d(i,r,"indoorMapFloorId","indoorMapFloorId"),d(i,r,"indoorMapFloorIndex","indoorMapFloorIndex"),d(i,r,"indoorFloorIndex","indoorMapFloorIndex"),n=new p(t,this).setContent(e)),o.default.Marker.prototype.bindPopup.call(this,n,t)},_onDragStart:function(){this._isDragging=!0,this._elevationBeforeDrag=this.getElevation();const e=o.default.DomUtil.getPosition(this._icon),t=this._map.layerPointToLatLng(e),n=this.getLatLng();this._latOffsetForDrag=n.lat-t.lat,this._lngOffsetForDrag=n.lng-t.lng,this.setLatLng(t)},_onDrag:function(){this._map._createPointMapping(this)},_onDragEnd:function(){const e=this.getLatLng();this.options.indoorMapId?this.setLatLng(new o.default.LatLng(e.lat+this._latOffsetForDrag,e.lng+this._lngOffsetForDrag,this._elevationBeforeDrag)):(this.setLatLng(new o.default.LatLng(e.lat,e.lng)),this.options.elevation=0),this._map._createPointMapping(this),this._latOffsetForDrag=0,this._lngOffsetForDrag=0,this._elevationBeforeDrag=0,this._isDragging=!1}}),S=h(P);function D(e,t){var n=e,i=t,r={},a=o.default.layerGroup([]),s=o.default.icon({iconUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker.png",iconRetinaUrl:"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor_map_entrance_marker@2.png",iconSize:[48,48],iconAnchor:[24,48]}),l=e=>{var t=S(e.getLatLng(),{title:e.getIndoorMapName(),icon:s});return t.on("click",function(){i.enter(e)}),t},u=()=>{n.addLayer(a)};u(),i.on("indoorentranceadd",e=>{var t=e.entrance,n=t.getIndoorMapId(),i=l(t);i.addTo(a),r[n]=i}),i.on("indoorentranceremove",e=>{var t=e.entrance.getIndoorMapId();a.removeLayer(r[t]),delete r[t]}),i.on("indoormapenter",()=>{n.removeLayer(a)}),i.on("indoormapexit",u),this.removeAllEntranceMarkers=()=>{a.clearLayers(),r={}}}const T=["move","movestart","moveend","drag","dragstart","dragend","pan","panstart","panend","rotate","rotatestart","rotateend","tilt","tiltstart","tiltend","zoom","zoomstart","zoomend","transitionstart","transitionend"];class x{constructor(e){this._onEvent=void 0,this.setEventCallbacks=e=>{e.setEventCallback(this._onEvent)},this._onEvent=t=>{void 0!==typeof T[t]&&e.fire(T[t])}}}const N={onUpdate:e=>{},onDraw:e=>{},onInitialized:()=>{},onInitialStreamingCompleted:()=>{}};var O,k,R;!function(e){e.Spring="Spring",e.Summer="Summer",e.Autumn="Autumn",e.Winter="Winter"}(O||(O={})),function(e){e.Dawn="Dawn",e.Day="Day",e.Dusk="Dusk",e.Night="Night"}(k||(k={})),function(e){e.Clear="Default",e.Overcast="Overcast",e.Foggy="Foggy",e.Rainy="Rainy",e.Snowy="Snowy"}(R||(R={}));var H={__proto__:null,get season(){return O},get time(){return k},get weather(){return R}};class z extends class{onUpdate(e){}onDraw(e){}onInitialized(){}onInitialStreamingCompleted(){}}{constructor(e){super(),this._emscriptenApi=void 0,this._ready=void 0,this._season=void 0,this._time=void 0,this._weather=void 0,this._shouldChangeTheme=void 0,this._shouldChangeState=void 0,this._updateTheme=()=>{this._ready&&(this._shouldChangeTheme&&(this._emscriptenApi.themesApi?.setTheme(this._season),this._shouldChangeTheme=!1),this._shouldChangeState&&(this._emscriptenApi.themesApi?.setState(this._time+this._weather,1),this._shouldChangeState=!1))},this._tryMatchBuiltIn=(e,t,n)=>{const i=(e,t)=>{const n=e.toUpperCase();return t.find(function(e){return 0===n.localeCompare(e.toUpperCase())})||e};return{season:i(e,Object.values(e)),time:i(t,Object.values(t)),weather:i(n,Object.values(n))}},this._onThemesStreamingCompleted=()=>{this._ready=!0,this._updateTheme()},this.setTheme=(e,t,n)=>{const i=this._tryMatchBuiltIn(e,t,n);i.season!==this._season&&(this._shouldChangeTheme=!0),i.time===this._time&&i.weather===this._weather||(this._shouldChangeState=!0),this._season=i.season,this._time=i.time,this._weather=i.weather,this._updateTheme()},this.setSeason=e=>{this.setTheme(e,this._time,this._weather)},this.getSeason=()=>this._season,this.setTime=e=>{this.setTheme(this._season,e,this._weather)},this.getTime=()=>this._time,this.setWeather=e=>{this.setTheme(this._season,this._time,e)},this.getWeather=()=>this._weather,this.setEnvironmentThemesManifest=e=>{this._ready&&this._emscriptenApi.themesApi?.setThemeManifest(e)},this._emscriptenApi=e,this._ready=!1,this._season=O.Summer,this._time=k.Day,this._weather=R.Clear,this._shouldChangeTheme=!1,this._shouldChangeState=!1}onInitialized(){this._emscriptenApi.themesApi?.registerStreamingCompletedCallback(this._onThemesStreamingCompleted)}}class G{constructor(e,t,n,i,o,r,a){this._indoorMapId=void 0,this._indoorMapName=void 0,this._indoorMapSourceVendor=void 0,this._floorCount=void 0,this._floors=void 0,this._searchTags=void 0,this.exit=void 0,this._indoorMapId=e,this._indoorMapName=t,this._indoorMapSourceVendor=n,this._floorCount=i,this._floors=o,this._searchTags=r,this.exit=a}getIndoorMapId(){return this._indoorMapId}getIndoorMapName(){return this._indoorMapName}getIndoorMapSourceVendor(){return this._indoorMapSourceVendor}getFloorCount(){return this._floorCount}getFloors(){return this._floors}getSearchTags(){return this._searchTags}}class U{constructor(e,t,n){this._indoorMapId=void 0,this._indoorMapName=void 0,this._latLng=void 0,this._indoorMapId=e,this._indoorMapName=t,this._latLng=n}getIndoorMapId(){return this._indoorMapId}getIndoorMapName(){return this._indoorMapName}getLatLng(){return this._latLng}}class V{constructor(e,t,n,i){this._floorId=void 0,this._floorIndex=void 0,this._floorName=void 0,this._floorShortName=void 0,this._floorId=e,this._floorIndex=t,this._floorName=n,this._floorShortName=i}getFloorId(){return this._floorShortName}_getFloorId(){return this._floorId}getFloorZOrder(){return this._floorId}getFloorIndex(){return this._floorIndex}getFloorName(){return this._floorName}getFloorShortName(){return this._floorShortName}}var W={__proto__:null,IndoorMap:G,IndoorMapEntrance:U,IndoorMapFloor:V};function j(e,t){var n=null,i="wrld-indoor-map-watermark"+e,o=t,r="eegeo",a=e=>{var t=e.toLowerCase();return t===r&&(t="wrld"),"https://cdn-webgl.wrld3d.com/wrldjs/resources/indoor-vendors/"+t+"_logo.png"};[r,"micello"].forEach(function(e){var t=a(e);(new Image).src=t}),this.showWatermarkForVendor=e=>{if(e!==r||o){var t=a(e);null===n&&(n=document.getElementById(i)),n.src=t,n.style.bottom=0}},this.hideWatermark=()=>{null!==n&&(n.style.bottom="-50px")}}function Z(e,t,n,i,r,a,s,l,u,d){var h=e,p=t,c=null,m={},g=!1,f=null,_=!1,b=new j(n,u),v=i,y=r,I=a,M=s,A=l,L=d,E=()=>{var e=h.indoorsApi.getActiveIndoorMapId(),t=h.indoorsApi.getActiveIndoorMapName(),n=h.indoorsApi.getActiveIndoorMapSourceVendor(),i=h.indoorsApi.getActiveIndoorMapFloorCount(),o=w(i),r=C();return new G(e,t,n,i,o,r,this.exit)},w=e=>{for(var t=[],n=0;n<e;++n){var i=n,o=h.indoorsApi.getFloorName(n),r=h.indoorsApi.getFloorShortName(n),a=h.indoorsApi.getFloorNumber(n),s=new V(a,i,o,r);t.push(s)}return t},C=()=>{var e;try{e=JSON.parse(h.indoorsApi.getActiveIndoorMapUserData())}catch(e){return[]}if("object"!=typeof e.search_menu_items)return[];if(!(e.search_menu_items.items instanceof Array))return[];var t=[];return e.search_menu_items.items.forEach(e=>{t.push({name:e.name,search_tag:e.search_tag,icon_key:e.icon_key})}),t},F=()=>{c=E(),this.fire("indoormapenter",{indoorMap:c})},B=()=>{this.fire("indoormapenterfailed",{})},P=()=>{var e=c;c=null,b.hideWatermark(),this.fire("indoormapexit",{indoorMap:e})},S=()=>{this.fire("indoormapfloorchange",{floor:this.getFloor()})},D=(e,t,n)=>{var i=new U(e,t,o.default.latLng([n.lat,n.lng]));m[i.getIndoorMapId()]=i,this.fire("indoorentranceadd",{entrance:i})},T=(e,t,n)=>{var i=new U(e,t,n);delete m[i.getIndoorMapId()],this.fire("indoorentranceremove",{entrance:i})},x=e=>{this.fire("indoormapload",{indoorMapId:e})},N=e=>{this.fire("indoormapunload",{indoorMapId:e})},O=e=>{var t=e.split("|");this.fire("indoorentityclick",{ids:t})},k=()=>{this.fire("collapsestart")},R=()=>{this.fire("collapse")},H=()=>{this.fire("collapseend")},z=()=>{this.fire("expandstart")},W=()=>{this.fire("expand")},Z=()=>{this.fire("expandend")},K=e=>{this.fire("indoormapenterrequested"),h.indoorsApi.enterIndoorMap(e)},q=e=>{_=!0,g?(h.cameraApi.setView({location:e.latLng,distance:e.distance,allowInterruption:!1,headingDegrees:e.orientation,animate:!("animate"in e)||e.animate}),p._setIndoorTransitionCompleteEventListener(function(){K(e.indoorMapId)}),this.once("indoormapenter",()=>{_=!1;var e=c.getIndoorMapSourceVendor();b.showWatermarkForVendor(e)}),this.once("indoormapenterfailed",()=>{_=!1})):f=e};this.onInitialized=()=>{h.indoorsApi.onInitialized(),h.indoorsApi.setNotificationCallbacks(F,B,P,S,D,T,x,N),h.indoorEntityApi.onInitialized(),h.indoorEntityApi.registerIndoorEntityPickedCallback(O),h.expandFloorsApi.setCollapseStartCallback(k),h.expandFloorsApi.setCollapseCallback(R),h.expandFloorsApi.setCollapseEndCallback(H),h.expandFloorsApi.setExpandStartCallback(z),h.expandFloorsApi.setExpandCallback(W),h.expandFloorsApi.setExpandEndCallback(Z),h.indoorsApi.setBackgroundColor(L)},this.onInitialStreamingCompleted=()=>{g=!0,v&&(this.enter(v,{latLng:I,zoom:A,indoorMapId:v,orientation:M}),y&&this.once("indoormapenter",function(){this.setFloor(Number(y))})),null!==f&&(q(f),f=null)},this.exit=()=>(h.ready()&&(h.indoorsApi.exitIndoorMap(),b.hideWatermark()),f=null,_=!1,this),this.isIndoors=()=>null!==c,this.getActiveIndoorMap=()=>c,this.getFloor=()=>{if(this.isIndoors()){var e=h.indoorsApi.getSelectedFloorIndex();return c.getFloors()[e]}return null},this.setFloor=e=>{if(!this.isIndoors())return!1;var t=null,n=c.getFloors();if("number"==typeof e)t=e;else if("object"==typeof e){var i=n.indexOf(e);t=i>=0?i:null}else if("string"==typeof e)for(var o=0;o<n.length;++o)if(n[o].getFloorShortName()===e){t=o;break}return null!==t&&h.indoorsApi.setSelectedFloorIndex(t)},this.moveUp=e=>{var t=void 0===e?1:e,n=this.getFloor();return null!==n&&this.setFloor(n.getFloorIndex()+t)},this.moveDown=e=>this.moveUp(void 0===e?-1:-e),this.enter=(e,t)=>{if(this.isIndoors()||_)return!1;var n=null;"object"==typeof e&&"getIndoorMapId"in e&&"function"==typeof e.getIndoorMapId?n=e.getIndoorMapId():"string"==typeof e&&(n=e);var i=m[n]||null,o=null;return null!==i?o=i.getLatLng():t&&t.latLng&&(o=t.latLng),null===o?!!g&&(K(n),!0):(q(Object.assign({latLng:o,distance:400,indoorMapId:n,orientation:0},t)),!0)},this.getFloorInterpolation=()=>null!==c?h.expandFloorsApi.getFloorParam()/c.getFloorCount():0,this.getFloorHeightAboveSeaLevel=e=>this.isIndoors()&&e>=0&&e<c.getFloorCount()?h.indoorsApi.getFloorHeightAboveSeaLevel(e):null,this.tryGetReadableName=e=>h.ready()?h.indoorsApi.tryGetReadableName(e):null,this.tryGetFloorReadableName=(e,t)=>h.ready()?h.indoorsApi.tryGetFloorReadableName(e,t):null,this.tryGetFloorShortName=(e,t)=>h.ready()?h.indoorsApi.tryGetFloorShortName(e,t):null,this.setFloorInterpolation=e=>{if(null!==c){var t=e*c.getFloorCount();h.expandFloorsApi.setFloorParam(t)}return this},this.setFloorFromInterpolation=e=>{if(null===c)return!1;var t=void 0===e?this.getFloorInterpolation():e,n=Math.round(t*c.getFloorCount());return this.setFloor(n)},this.expand=()=>(h.expandFloorsApi.expandIndoorMap(),this),this.collapse=()=>(h.expandFloorsApi.collapseIndoorMap(),this),this.setEntityHighlights=(e,t,n,i)=>{g&&(n=$(n),i=J(i),h.indoorEntityApi.setHighlights(e,t,n,i))},this.clearEntityHighlights=(e,t)=>{g&&(t=$(t),h.indoorEntityApi.clearHighlights(e,t))};var J=e=>(null==e&&(e=.5),e),$=e=>(null==e&&null!==c&&(e=c.getIndoorMapId()),e);this.setBackgroundColor=e=>{L=e,g&&h.indoorsApi.setBackgroundColor(e)},this.hideLabelsForEntity=e=>this.hideLabelsForEntities([e]),this.hideLabelsForEntities=e=>(h.ready()&&h.indoorsApi.hideLabelsForEntities(e),this),this.showLabelsForEntity=e=>this.showLabelsForEntities([e]),this.showLabelsForEntities=e=>(h.ready()&&h.indoorsApi.showLabelsForEntities(e),this),this.showAllLabels=()=>(h.ready()&&h.indoorsApi.showAllLabels(),this)}var K=o.default.extend({},N,o.default.Mixin.Events);function q(){var e={};this.insertObject=function(t,n){return e[t]=n,t},this.removeObjectById=function(t){var n=e[t];return delete e[t],n},this.idForObject=function(t){for(var n in e)if(e[n]===t)return n;return null},this.getObjectById=function(t){return e[t]},this.forEachItem=function(t){for(var n in e)t(n,e[n])}}Z.prototype=K;class J{constructor(e){this._succeeded=void 0,this.getSucceeded=()=>this._succeeded,this._succeeded=e}}function $(e){var t=e;this.cancel=function(){t.cancel()}}function X(e,t,n){var i=o.default.latLng(e),r=t,a=n,s=!1,l=e=>{a(new J(e))};this.getCentre=()=>i,this.getRadius=()=>r,this.cancel=()=>{s=!0},this.isCancelled=()=>s,this.notifyComplete=()=>{l(!0)},this.notifyCancelled=()=>{l(!1)}}function Y(e){var t=e,n=new q,i=[],o=!1,r=e=>{var i=t.precacheApi.beginPrecacheOperation(e);return n.insertObject(i,e),i},a=e=>{n.removeObjectById(e).notifyComplete()},s=e=>{n.removeObjectById(e).notifyCancelled()};this.getMaximumPrecacheRadius=()=>16e3,this.precache=(e,t,a)=>{var s=((e,t)=>t>16e3||t<=0?new Error("radius outside of valid (0.0, 16000] range."):null)(0,t);if(null!==s)throw s;var l=new X(e,t,a);if(o){var u=r(l);n.insertObject(u,l)}else i.push(l);return new $(l)},this.onInitialized=()=>{o=!0,t.precacheApi.registerCallbacks(a,s),i.forEach(e=>{e.isCancelled()?e.notifyCancelled():r(e)}),i=[]},this.onUpdate=e=>{if(o){var i=[];n.forEachItem(function(e,t){t.isCancelled()&&i.push(e)}),i.forEach(e=>{t.precacheApi.cancelPrecacheOperation(e)})}}}function Q(e,t,n,i){var r=e,a=!1,s=null,l=null,u=t,d=i,h=function(e){a?r.cameraApi.setView(e):s=null===s?{}:Object.assign(s,e)},p=function(e){a?r.cameraApi.setViewToBounds(e):l=e},c=function(e){d=e,a&&r.cameraApi.setVerticallyLocked(d)};this.setView=function(e){h(e)},this.setViewToBounds=function(e){p(e)},this.onInitialized=function(){a=!0,c(d),a&&(null!==s&&(h(s),s=null),null!==l&&(p(l),l=null))},this.getCurrentZoomLevel=function(){return a?r.cameraApi.getZoomLevel():parseFloat(s.zoom)||0},this.getCenter=function(){return o.default.latLng(u=a?r.cameraApi.getInterestLatLong():s.location||u)},this.getDistanceToInterest=function(){return a?r.cameraApi.getDistanceToInterest():0},this.getPitchDegrees=function(){return a?r.cameraApi.getPitchDegrees():0},this.getTiltDegrees=function(){return a?90-r.cameraApi.getPitchDegrees():0},this.setTiltDegrees=function(e){return function(e){h({tiltDegrees:e,animate:!0})}(e)},this.getHeadingDegrees=function(){return a?r.cameraApi.getHeadingDegrees():parseFloat(s.headingDegrees)||0},this.setHeadingDegrees=function(e){return function(e){return h({headingDegrees:e,animate:!0})}(e)},this.setVerticallyLocked=function(e){c(e)}}function ee(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.geofenceApi.createGeofence(e.getPoints(),e.getHoles(),e._getConfig());return n[i]=e,i};this.addPolygon=e=>{o?r(e):i.push(e)},this.removePolygon=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.geofenceApi.removeGeofence(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=function(){o&&Object.keys(n).forEach(e=>{var i=n[e];i._colorNeedsChanged()&&(t.geofenceApi.setGeofenceColor(e,i.getColor()),i._onColorChanged())})},this.onInitialized=()=>{o=!0,i.forEach(function(e){r(e)}),i=[]}}function te(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.polylineApi.createPolyline(e);return n[i]=e,i};this.addPolyline=e=>{o?r(e):i.push(e)},this.removePolyline=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.polylineApi.destroyPolyline(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=()=>{o&&Object.keys(n).forEach(e=>{t.polylineApi.updateNativeState(e,n[e])})},this.onInitialized=()=>{o=!0,i.forEach(e=>{r(e)}),i=[]}}function ne(e,t){var n=e,i=t,o=(e,t)=>{var n="{"+t+":",i=e.indexOf(n);if(-1!==i){var o=e.slice(i+n.length),r=o.indexOf("}");if(-1!==r)return o.substring(0,r)}return null},r=e=>{for(var t=[],n=0;n<e.length;n++){var i=e[n].name,r=o(i,"level");if("multiple"!==r){var a={},s=[];a.indoorMapId=o(i,"bid"),"e2657c93-2d13-412a-89fe-0949a14e7eea"===a.indoorMapId?a.indoorMapId="westport_house":"c857d08d-7de1-4447-9ff8-6747649a00e0"===a.indoorMapId&&(a.indoorMapId="70f9b00f-8c4f-4570-9a23-62bd80a76f8a"),r&&(a.indoorMapFloorId=parseInt(r));for(var l=e[n].geometry.coordinates,u=0;u<l.length;u++){var d=l[u];s.push([d[1],d[0]])}a.points=s,t.push(a)}}return t},a=e=>{for(var t=e.routes,n=[],i=0;i<t.length;++i)for(var o=t[i].legs,a=0;a<o.length;++a){var s=r(o[a].steps);n.push(s)}return n};this.getRoute=(e,t,o,r)=>{r=r||"walking";for(var s="https://routing.wrld3d.com/v1/route?loc=",l=0;l<e.length;++l)s+=e[l].join(","),l<e.length-1&&(s+="%3B");s+="&apikey="+n,s+="&limit=400",s+="&travelmode="+r;var u=new XMLHttpRequest;u.open("GET",s,!0),u.onload=((e,t,n)=>()=>{var i,o=JSON.parse(e.responseText);if("Ok"===o.code)if("type"in o&&"multipart"===o.type)for(var r=o.routes,s=0;s<r.length;++s)i=a(r[s]),t(i);else i=a(o),t(i);else null!=n&&n(o)})(u,t,o),i.on("indoormapexit",(e=>()=>{e.abort()})(u)),u.send()}}function ie(e,t){var n=e,i=!1,o=t,r=!1;this.onInitialized=()=>{n.renderingApi.setClearColor(o),n.renderingApi.setMapCollapsed(i),r=!0},this.ready=()=>r,this.setMapCollapsed=e=>{i=e,r&&n.renderingApi.setMapCollapsed(i)},this.isMapCollapsed=()=>i,this.setClearColor=e=>{o=e,r&&n.renderingApi.setClearColor(o)},this.getCameraRelativePosition=e=>r?n.renderingApi.getCameraRelativePosition(e):null,this.getNorthFacingOrientationMatrix=e=>r?n.renderingApi.getNorthFacingOrientationMatrix(e):null,this.getCameraProjectionMatrix=()=>r?n.renderingApi.getCameraProjectionMatrix():null,this.getCameraOrientationMatrix=()=>r?n.renderingApi.getCameraOrientationMatrix():null,this.getLightingData=()=>r?n.renderingApi.getLightingData():null}function oe(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.buildingsApi.createBuildingHighlight(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addBuildingHighlight=e=>{r?s(e):o.push(e)},this.removeBuildingHighlight=e=>{if(r){var i=e.getId();void 0!==i&&(t.buildingsApi.destroyBuildingHighlight(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.notifyBuildingHighlightChanged=e=>{if(r){var n=e.getId();if(void 0===n)return;t.buildingsApi.setHighlightColor(n,e.getColor())}},this.findIntersectionWithBuilding=e=>{if(r)return t.buildingsApi.findIntersectionWithBuilding(e)},this.findBuildingAtScreenPoint=e=>{if(r){var n=t.spacesApi.screenPointToRay(e);return this.findIntersectionWithBuilding(n)}},this.findBuildingAtLatLng=e=>{if(r){var n=t.spacesApi.latLongToVerticallyDownRay(e);return this.findIntersectionWithBuilding(n)}},this.onInitialized=()=>{r=!0,t.buildingsApi.registerBuildingInformationReceivedCallback(l),o.forEach(e=>{s(e)}),o=[]},this.isReady=()=>r,this.setBuildingInformationReceivedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e],o=t.buildingsApi.tryGetBuildingInformation(e);null!==o&&i._setBuildingInformation(o),null!==a&&a(i)}}function re(e){var t=new oe(e),n=this,i=e=>{n.fire("buildinginformationreceived",{buildingHighlight:e})};this.findBuildingAtScreenPoint=e=>t.findBuildingAtScreenPoint(e),this.findBuildingAtLatLng=e=>t.findBuildingAtLatLng(e),this.onInitialized=()=>{t.setBuildingInformationReceivedCallback(i),t.onInitialized()},this._getImpl=()=>t}Y.prototype=N,Q.prototype=N,ee.prototype=N,te.prototype=N,ne.prototype=N,ie.prototype=N;var ae=o.default.extend({},N,o.default.Mixin.Events);function se(e){var t=e,n=[],i=new q,o=!1,r=!1,a="",s=!1,l=!1,u=e=>{for(var n=[],o=[],r=[],a=[],s=[],l=[],u=[],d=[],h=[],p=0;p<e.length;++p){var c=e[p];n.push(c.getIndoorMapId()),o.push(c.getIndoorMapFloorId()),r.push(c.getName()),a.push(c.getLocation().lat),s.push(c.getLocation().lng),l.push(c.getElevation()),u.push(c.getElevationMode()),d.push(c.getHeadingDegrees()),h.push(c.getGeometryId())}var m=t.propsApi.createProps(n,o,r,a,s,l,u,d,h);for(p=0;p<m.length;++p)i.insertObject(m[p],e[p])},d=(e,t)=>{this.fire("indoormapentitysetpropsloaded",{indoorMapId:e,floorId:t})},h=(e,t)=>{this.fire("indoormappopulationrequestcomplete",{succeeded:0!==e,httpStatusCode:t})};this.addProp=e=>{l?(e=>{var n=t.propsApi.createProp(e.getIndoorMapId(),e.getIndoorMapFloorId(),e.getName(),e.getLocation().lat,e.getLocation().lng,e.getElevation(),e.getElevationMode(),e.getHeadingDegrees(),e.getGeometryId());i.insertObject(n,e)})(e):n.push(e)},this.addProps=e=>{l?u(e):n=n.concat(e)},this.removeProp=e=>{if(l&&0===n.length){var o=i.idForObject(e);null!==o&&(t.propsApi.destroyProp(o),i.removeObjectById(o))}else{var r=n.indexOf(e);r>-1&&n.splice(r,1)}},this.removeProps=e=>{var o=0;if(l&&0===n.length){for(var r=[];o<e.length;++o){var a=i.idForObject(e[o]);i.removeObjectById(a),r.push(parseInt(a))}t.propsApi.destroyProps(r)}else for(;o<e.length;++o){var s=n.indexOf(e[o]);s>-1&&n.splice(s,1)}},this.onInitialized=()=>{l=!0,0!==n.length&&(u(n),n=[]),o&&this.setAutomaticIndoorMapPopulationEnabled(r),s&&this.setIndoorMapPopulationServiceUrl(a),t.propsApi.setIndoorMapEntitySetPropsLoadedCallback(d),t.propsApi.setIndoorMapPopulationRequestCompletedCallback(h),t.propsApi.onInitialized()},this.onUpdate=e=>{l&&i.forEachItem((e,n)=>{n._locationNeedsChanged()&&(t.propsApi.setLocation(e,n.getLocation().lat,n.getLocation().lng),n._onLocationChanged()),n._headingDegreesNeedsChanged()&&(t.propsApi.setHeadingDegrees(e,n.getHeadingDegrees()),n._onHeadingDegreesChanged()),n._elevationNeedsChanged()&&(t.propsApi.setElevation(e,n.getElevation()),n._onElevationChanged()),n._elevationModeNeedsChanged()&&(t.propsApi.setElevationMode(e,n.getElevationMode()),n._onElevationModeChanged()),n._geometryIdNeedsChanged()&&(t.propsApi.setGeometryId(e,n.getGeometryId()),n._onGeometryIdChanged())})},this.setAutomaticIndoorMapPopulationEnabled=e=>{l?t.propsApi.setAutomaticIndoorMapPopulationEnabled(e):(r=e,o=!0)},this.isAutomaticIndoorMapPopulationEnabled=()=>l?t.propsApi.isAutomaticIndoorMapPopulationEnabled():r,this.setIndoorMapPopulationServiceUrl=e=>{if(l)return t.propsApi.setIndoorMapPopulationServiceUrl(e);a=e,s=!0},this.getIndoorMapEntitySetProps=(e,n)=>l?t.propsApi.tryGetIndoorMapEntitySetProps(e,n):null}re.prototype=ae;var le=o.default.extend({},N,o.default.Mixin.Events);function ue(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.indoorMapEntityInformationApi.createIndoorMapEntityInformation(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addIndoorMapEntityInformation=e=>{r?s(e):o.push(e)},this.removeIndoorMapEntityInformation=e=>{if(r){var i=e.getNativeId();void 0!==i&&(t.indoorMapEntityInformationApi.destroyIndoorMapEntityInformation(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.onInitialized=()=>{r=!0,t.indoorMapEntityInformationApi.registerIndoorMapEntityInformationChangedCallback(l),o.forEach(function(e){s(e)}),o=[]},this.setIndoorMapEntityInformationChangedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e],o=t.indoorMapEntityInformationApi.tryGetIndoorMapEntityInformation(e);null!==o&&i._setData(o),null!==a&&a(i)}}function de(e){var t=new ue(e),n=e=>{this.fire("indoormapentityinformationchanged",{indoorMapEntityInformation:e})};this.onInitialized=()=>{t.setIndoorMapEntityInformationChangedCallback(n),t.onInitialized()},this._getImpl=()=>t}se.prototype=le;var he=o.default.extend({},N,o.default.Mixin.Events);function pe(e){var t=e,n={},i={},o=[],r=!1,a=null,s=e=>{var o=t.indoorMapFloorOutlineInformationApi.createIndoorMapFloorOutlineInformation(e);return n[o]=e,e._setNativeHandle(o),o in i&&(delete i[o],u(o)),o};this.addIndoorMapFloorOutlineInformation=e=>{r?s(e):o.push(e)},this.removeIndoorMapFloorOutlineInformation=e=>{if(r){var i=e.getId();void 0!==i&&(t.indoorMapFloorOutlineInformationApi.destroyIndoorMapFloorOutlineInformation(i),delete n[i],e._setNativeHandle(null))}else{var a=o.indexOf(e);a>-1&&o.splice(a,1)}},this.onInitialized=()=>{r=!0,t.indoorMapFloorOutlineInformationApi.registerIndoorMapFloorOutlineInformationLoadedCallback(l),o.forEach(e=>{s(e)}),o=[]},this.setIndoorMapFloorOutlineInformationLoadedCallback=e=>{a=e};var l=e=>{e in n?u(e):i[e]=!0},u=e=>{var i=n[e];if(t.indoorMapFloorOutlineInformationApi.getIndoorMapFloorOutlineInformationLoaded(e)){var o=t.indoorMapFloorOutlineInformationApi.tryGetIndoorMapFloorOutlineInformation(e);null!==o&&(i._setData(o),null!==a&&a(i))}}}function ce(e){var t=new pe(e),n=e=>{this.fire("indoormapflooroutlineinformationloaded",{indoorMapFloorOutlineInformation:e})};this.onInitialized=()=>{t.setIndoorMapFloorOutlineInformationLoadedCallback(n),t.onInitialized()},this._getImpl=()=>t}de.prototype=he;var me=o.default.extend({},N,o.default.Mixin.Events);function ge(e){var t=e,n=!1,i=null,r=!1,a="",s=0,l=0,u=0,d=!1,h=!0;this.isEnabled=()=>r,this.setEnabled=e=>{r=!!e},this.getLocation=()=>i,this.setLocation=e=>{i=o.default.latLng(e),d=!0},this.getIndoorMapId=()=>a,this.getIndoorMapFloorId=()=>s,this.setIndoorMap=(e,t)=>{a=e,s=t},this.setOutdoor=()=>{this.setIndoorMap("",0)},this.isOrientationVisible=()=>h,this.getHeadingDegrees=()=>l,this.setHeadingDegrees=e=>{l=e,d=!0},this.getElevation=()=>u,this.setElevation=e=>{u=e,d=!0},this.showOrientation=e=>{h=e,d=!0},this.onInitialized=()=>{n=!0,t.blueSphereApi.updateNativeState(this)},this.onUpdate=()=>{n&&d&&(t.blueSphereApi.updateNativeState(this),d=!1)}}function fe(e){var t=e,n=!1;this.Pause=()=>{n&&t.mapRuntimeApi.onPause()},this.Resume=()=>{n&&t.mapRuntimeApi.onResume()},this.Remove=()=>{n&&t.mapRuntimeApi.onRemove()},this.onInitialized=()=>{n=!0}}ce.prototype=me,ge.prototype=N,fe.prototype=N;var _e=o.default.point(-100,-100);function be(e){var t=e,n=null,i=!1,r={},a=[];this.onInitialized=()=>{i=!0,n=t.spacesApi,this._createPendingLayers()};var d=e=>e.reduce(function(e,t){return e.concat(Array.isArray(t)?d(t):t)},[]);this._getLayerId=e=>o.default.stamp(e),this._useWrldSdkPointMappingForLayer=e=>"function"==typeof e.getLatLng||"function"==typeof e.getLatLngs,this._createAndAdd=e=>{if(this._useWrldSdkPointMappingForLayer(e)){var n=this._getLayerId(e);n in r&&this.removePointMapping(e);var i="function"==typeof e.getLatLngs?e.getLatLngs():[e.getLatLng()],o=d(i),a=e.options.elevation||0,h=B(e.options.elevationMode),p=t.layerPointMappingApi,c=s(e),m=u(e);if(1==(null!==c&&null!==m))p.createPointMappingWithFloorIndex(n,a,h,c,m,o);else{var g=l(e),f=null!==c&&null!==g;p.createPointMapping(n,a,h,!0===f?c:"",!0===f?g:0,o)}r[n]=p.getLatLngsForLayer(n,o.length)}},this._createPendingLayers=()=>{a.forEach(e=>{this._createAndAdd(e)}),a=[]},this.createPointMapping=e=>{this._useWrldSdkPointMappingForLayer(e)&&(i?this._createAndAdd(e):a.push(e))},this.removePointMapping=e=>{if(i){var n=this._getLayerId(e);n in r&&(t.layerPointMappingApi.removePointMapping(n),delete r[n])}else{var o=a.indexOf(e);o>-1&&a.splice(o,1)}},this._updateMappings=()=>{if(i){var e=t.layerPointMappingApi;for(var n in r)r[n]=e.getLatLngsForLayer(n,r[n].length)}},this.onDraw=()=>{i&&this._updateMappings()},this._getDefaultLatLngsFromLayer=e=>"function"==typeof e.getLatLngs?e.getLatLngs():"function"==typeof e.getLatLng?[e.getLatLng()]:null,this.latLngsForLayer=e=>{if(!i)return this._getDefaultLatLngsFromLayer(e);var t=this._getLayerId(e);return t in r?r[t]:this._getDefaultLatLngsFromLayer(e)},this.projectLatlngs=(e,t,n,o)=>{if(!i)return!1;if(!this._useWrldSdkPointMappingForLayer(e))return!1;var r=this.latLngsForLayer(e);return null!==r&&(this._projectLatlngsRecursive(t,r,0,n,o),!0)},this._latLngToLayerPoint=e=>i?n.worldToScreen(e).toPoint():_e,this._projectLatlngsRecursive=(e,t,n,i,r)=>{var a,s,l=e.length;if(e[0]instanceof o.default.LatLng){for(s=[],a=0;a<l;a++,n++)s[a]=this._latLngToLayerPoint(t[n]),r.extend(s[a]);i.push(s)}else for(a=0;a<l;a++)n=this._projectLatlngsRecursive(e[a],t,n,i,r);return n}}function ve(e){var t=e,n=!1;this.getVersion=()=>n?t.versionApi.getPlatformVersion():null,this.getVersionHash=()=>n?t.versionApi.getPlatformVersionHash():null,this.onInitialized=()=>{n=!0}}function ye(e){var t=e,n={},i=[],o=!1,r=e=>{var i=t.heatmapApi.createHeatmap(e);return n[i]=e,i};this.addHeatmap=e=>{o?r(e):i.push(e)},this.removeHeatmap=e=>{if(o){var r=Object.keys(n).find(t=>n[t]===e);void 0!==r&&(t.heatmapApi.destroyHeatmap(r),delete n[r])}else{var a=i.indexOf(e);a>-1&&i.splice(a,1)}},this.onUpdate=()=>{o&&Object.keys(n).forEach(e=>{t.heatmapApi.updateNativeState(e,n[e])})},this.onInitialized=()=>{o=!0,i.forEach(function(e){r(e)}),i=[]}}function Ie(e,t,n,i,o){var r=e,a=t,s=n,l=i,u=o,d=!1;this.onInitialized=()=>{r.frameRateApi.setTargetVSyncInterval(a),r.frameRateApi.setThrottledTargetFrameInterval(s),r.frameRateApi.setIdleSecondsBeforeThrottle(l),r.frameRateApi.setThrottleWhenIdleEnabled(u),d=!0},this.ready=()=>d,this.setTargetVSyncInterval=e=>{a=e,d&&r.frameRateApi.setTargetVSyncInterval(a)},this.setThrottledTargetFrameInterval=e=>{s=e,d&&r.frameRateApi.setThrottledTargetFrameInterval(s)},this.setIdleSecondsBeforeThrottle=e=>{l=e,d&&r.frameRateApi.setIdleSecondsBeforeThrottle(l)},this.setThrottleWhenIdleEnabled=e=>{u=e,d&&r.frameRateApi.setThrottleWhenIdleEnabled(u)},this.cancelThrottle=()=>{d&&r.frameRateApi.cancelThrottle()}}be.prototype=N,ve.prototype=N,ye.prototype=N,Ie.prototype=N;const Me=(e,t)=>{var n=e.lastIndexOf(".");return e.slice(n)===t?e.slice(0,n):e};function Ae(e,t,n,i,r,a,s,l,u){var d={canvasId:"canvas",width:void 0,height:void 0,indoorsEnabled:!1,displayEntranceMarkers:!0,coverageTreeManifest:"",environmentThemesManifest:"",headingDegrees:0,center:o.default.latLng([37.7858,-122.401]),zoom:16,doubleClickZoom:!0,zoomControl:!1,zoomAnimation:!1,minZoom:0,maxZoom:20,zoomSnap:0,viewVerticallyLocked:!1,showIndoorWrldWatermark:!0,trafficEnabled:!0,trafficDisableWhenEnteringIndoorMaps:!0,indoorLabelsAlwaysHidden:!1,targetVSyncInterval:1,frameRateThrottleWhenIdleEnabled:!1,throttledTargetFrameIntervalMilliseconds:1e3,idleSecondsBeforeFrameRateThrottle:30,drawClearColor:"#000000ff",indoorMapBackgroundColor:"#000000c0",indoorSelectionTimeoutDuration:30};l=o.default.extend(d,l);var h=e,p=t,c=r,m=a,g=new z(t),f=new Y(t),_=new Q(t,l.center,l.zoom,l.viewVerticallyLocked),b=new Z(t,this,h,l.indoorId,l.floorIndex,l.center,l.headingDegrees,l.zoom,l.showIndoorWrldWatermark,l.indoorMapBackgroundColor),v=new ee(t),y=new te(t),I=new be(t),M=new ne(i,b),E=new ie(t,l.drawClearColor),w=new re(t),C=new se(t),F=new de(t),B=new ce(t),P=new ge(t),S=new fe(t),T=new ve(t),N=new ye(t),O=new Ie(t,l.targetVSyncInterval,l.throttledTargetFrameIntervalMilliseconds,l.idleSecondsBeforeFrameRateThrottle,l.frameRateThrottleWhenIdleEnabled),k=u,R=h?l.canvasId+h:l.canvasId,H=l.width||n.clientWidth,G=l.height||n.clientHeight,U="wrld-map-container"+h,V=new L(m,c,n,R,H,G,l.drawClearColor,U,h),W=V.canvas,j=s;j.canvas=W;var K=o.default.latLng(l.center),q=l.zoom,J=l.headingDegrees,$=l.indoorsEnabled?"1":"0",X=Me(l.coverageTreeManifest,".gz"),oe=Me(l.environmentThemesManifest,".gz"),ae=l.doubleClickZoom?"1":"0",le=l.trafficEnabled?"1":"0",ue=l.trafficDisableWhenEnteringIndoorMaps?"1":"0",he=l.indoorLabelsAlwaysHidden?"1":"0",pe=l.indoorSelectionTimeoutDuration;j.arguments=[R,h.toString(),H.toString(),G.toString(),i,K.lat.toString(),K.lng.toString(),q.toString(),J.toString(),$,X,oe,ae,U,le,ue,he,pe.toString()],this.leafletMap=new A(c,V.overlay,l,function(){k(),Le.leafletMap._initEvents(!0,W),Le._indoorEntranceMarkerUpdater&&Le._indoorEntranceMarkerUpdater.removeAllEntranceMarkers(),V.onRemove();var e=j.ctx||j.K;e&&"getExtension"in e&&e.getExtension("WEBGL_lose_context").loseContext()},_,f,g,b,v,y,I,M,E,w,C,F,B,P,S,T,N,O),this.leafletMap._initEvents(!1,W);var me=new x(this.leafletMap),_e=[I,g,b,f,_,v,y,E,w,C,F,B,P,S,T,N,O];this._indoorEntranceMarkerUpdater=null,l.displayEntranceMarkers&&(this._indoorEntranceMarkerUpdater=new D(this.leafletMap,b));var Ae=null;this.onInitialized=function(e,t){V.onInitialized(),Ae=j.cwrap("resizeCanvas",null,["number","number"]),p.onInitialized(e,t,Ee,we,Ce),me.setEventCallbacks(p.cameraApi),_e.forEach(function(e){e.onInitialized()}),this.leafletMap.onInitialized(p)},this.onError=function(e){V.onError(e)},this._setIndoorTransitionCompleteEventListener=function(e){this.leafletMap.once("moveend",e)};var Le=this,Ee=function(e){var t,n;t=V.width(),n=V.height(),t===H&&n===G||(Ae(t,n),H=t,G=n),_e.forEach(function(t){t.onUpdate(e)}),Le.leafletMap._onUpdate()},we=function(e){_e.forEach(function(t){t.onDraw(e)}),Le.leafletMap._onDraw()},Ce=function(){_e.forEach(function(e){e.onInitialStreamingCompleted()}),Le.leafletMap.onInitialStreamingCompleted()}}function Le(e){var t=e;this.readDoubles=(e,n)=>{for(var i=[],o=0;o<n;++o){var r=t.getValue(e+8*o,"double");i.push(r)}return i},this.passDoubles=(e,n)=>{for(var i=t._malloc(8*e.length),o=0;o<e.length;++o)t.setValue(i+8*o,e[o],"double");n(i,e.length),t._free(i)},this.passString=(e,n)=>{var i=t.lengthBytesUTF8(e),o=t._malloc(i);t.stringToUTF8(e,o,i),n(o),t._free(o)},this.passStrings=(e,n)=>{for(var i=t._malloc(4*e.length),o=[],r=0;r<e.length;++r){var a=t.lengthBytesUTF8(e[r])+1,s=t._malloc(a);t.stringToUTF8(e[r],s,a),t.setValue(i+4*r,s,"*"),o.push(s)}n(i,e.length);for(var l=0;l<o.length;++l)t._free(o[l]);t._free(i)},this.passInt32s=(e,n)=>{for(var i=t._malloc(4*e.length),o=0;o<e.length;++o)t.setValue(i+4*o,e[o],"i32");n(i,e.length),t._free(i)},this.stringifyPointer=e=>t.UTF8ToString(e),this.createInt8Buffer=e=>({ptr:t._malloc(e),element_count:e,element_type:"i8",element_size_bytes:1}),this.createInt32Buffer=e=>({ptr:t._malloc(4*e),element_count:e,element_type:"i32",element_size_bytes:4}),this.createDoubleBuffer=e=>({ptr:t._malloc(8*e),element_count:e,element_type:"double",element_size_bytes:8}),this.createBufferFromArray=(e,n)=>{for(var i=n(e.length),o=0;o<i.element_count;++o)t.setValue(i.ptr+o*i.element_size_bytes,e[o],i.element_type);return i},this.consumeBufferToArray=e=>{for(var n=[],i=0;i<e.element_count;++i){var o=t.getValue(e.ptr+i*e.element_size_bytes,e.element_type);n.push(o)}return t._free(e.ptr),n},this.freeBuffer=e=>{t._free(e.ptr)},this.createUtf8BufferFromString=e=>{var n=t.lengthBytesUTF8(e)+1,i=this.createInt8Buffer(n);return t.stringToUTF8(e,i.ptr,n),i},this.consumeUtf8BufferToString=e=>{var n=t.UTF8ToString(e.ptr);return t._free(e.ptr),n}}const Ee=e=>((255&e.x)<<24)+((255&e.y)<<16)+((255&e.z)<<8)+(255&e.w),we=e=>{if("string"==typeof e)return(e=>{var t=255;8===(e=e.replace(/^#/,"")).length?t=255&parseInt(e.slice(6,8),16):4===e.length&&(t=255&parseInt(e.slice(3,4).repeat(2),16));var n=16777215;return 6===e.length||8===e.length?n=16777215&parseInt(e.substring(0,6),16):3!==e.length&&4!==e.length||(n=16777215&parseInt(e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2),16)),(n<<8)+t})(e);if(Array.isArray(e))return Ee((e=>{var t,n,i,o=255;if(!(Array.isArray(e)&&e.length>=3))throw new Error("Unable to parse color from array: "+String(e));if(t=e[0],n=e[1],i=e[2],e.length>3&&(o=e[3]),isNaN(t)||isNaN(n)||isNaN(i)||isNaN(o))throw new Error("Unable to parse color - value out of range: "+String(e));return new g(t,n,i,o)})(e));if("object"==typeof e)return Ee((e=>{var t=void 0,n=void 0,i=void 0,o=255;if("object"!=typeof e)throw new Error("Unable to parse color: "+String(e));if("r"in e?t=e.r:"x"in e&&(t=e.x),"g"in e?n=e.g:"y"in e&&(n=e.y),"b"in e?i=e.b:"z"in e&&(i=e.z),"a"in e?o=e.a:"w"in e&&(o=e.w),isNaN(t)||isNaN(n)||isNaN(i)||isNaN(o))throw new Error("Unable to parse color - value out of range: "+String(e));return new g(t,n,i,o)})(e));throw new Error("Unable to parse color: "+String(e))};function Ce(e,t,n){var i=e,o=n,r=t("removeGeofence",null,["number","number"]),a=t("setGeofenceColor",null,["number","number","number","number","number","number"]),s=t("createGeofenceFromRawCoords",null,["number","number","number","number","number","number","number","string","number","number"]);this._getElevationIsAboveSeaLevelFromConfig=e=>void 0!==e.elevationMode?e.elevationMode.toLowerCase()===C.HEIGHT_ABOVE_SEA_LEVEL.toLowerCase():e.offsetFromSeaLevel||!1,this._getAltitudeOffsetFromConfig=e=>void 0!==e.elevation?e.elevation:e.altitudeOffset||0,this.createGeofence=(e,t,n)=>{var r=[],a=[];a.push(e.length),e.forEach(e=>{r.push(e.lat),r.push(e.lng)}),t.forEach(e=>{a.push(e.length),e.forEach(e=>{r.push(e.lat),r.push(e.lng)})});for(var l=o._malloc(8*r.length),u=0;u<r.length;++u)o.setValue(l+8*u,r[u],"double");for(var d=o._malloc(4*a.length),h=0;h<a.length;++h)o.setValue(d+4*h,a[h],"i32");var p=n.indoorMapId||"",c=this._getElevationIsAboveSeaLevelFromConfig(n),m=this._getAltitudeOffsetFromConfig(n),g=s(i,l,r.length,d,a.length,c,m,p,p.length,n.indoorMapFloorId||0);return o._free(l),o._free(d),g},this.removeGeofence=e=>{r(i,e)},this.setGeofenceColor=(e,t)=>{var n=(e=>{return t=we(e),new g(t>>24&255,t>>16&255,t>>8&255,255&t);var t})(t);a(i,e,n.x/255,n.y/255,n.z/255,n.w/255)}}function Fe(e,t,n,i){var r=e,a=i,s=t("indoorsApi_RegisterIndoorMapCallbacks",null,["number","number","number","number","number","number","number","number","number"]),l=t("indoorsApi_EnterIndoorMap",null,["number","string"]),u=t("indoorsApi_ExitIndoorMap",null,["number"]),d=t("indoorsApi_HasActiveIndoorMap","number",["number"]),h=t("indoorsApi_GetActiveIndoorMapId","string",["number"]),p=t("indoorsApi_GetActiveIndoorMapName","string",["number"]),c=t("indoorsApi_GetActiveIndoorMapSourceVendor","string",["number"]),m=t("indoorsApi_GetActiveIndoorMapFloorCount","number",["number"]),g=t("indoorsApi_GetActiveIndoorMapUserData","string",["number"]),f=t("indoorsApi_GetSelectedFloorIndex","number",["number"]),_=t("indoorsApi_SetSelectedFloorIndex","number",["number","number"]),b=t("indoorsApi_GetFloorName","string",["number","number"]),v=t("indoorsApi_GetFloorShortName","string",["number","number"]),y=t("indoorsApi_GetFloorNumber","number",["number","number"]),I=t("indoorsApi_GetFloorHeightAboveSeaLevel","number",["number","number"]),M=t("indoorsApi_TryGetReadableNameBufferSize","number",["number","string","number","number"]),A=t("indoorsApi_TryGetReadableName","number",["number","string","number","number","number"]),L=t("indoorsApi_TryGetFloorReadableNameBufferSize","number",["number","string","number","number","number"]),E=t("indoorsApi_TryGetFloorReadableName","number",["number","string","number","number","number","number"]),w=t("indoorsApi_TryGetFloorShortNameBufferSize","number",["number","string","number","number","number"]),C=t("indoorsApi_TryGetFloorShortName","number",["number","string","number","number","number","number"]),F=t("indoorsApi_SetBackgroundColor",null,["number","number"]),B=t("indoorsApi_HideLabelsForEntities",null,["number","number","number"]),P=t("indoorsApi_ShowLabelsForEntities",null,["number","number","number"]),S=t("indoorsApi_ShowAllLabels",null,["number"]),D=null,T=null,x=null,N=null,O=null,k=null,R=null,H=null,z=()=>{null!==D&&D()},G=()=>{null!==T&&T()},U=()=>{null!==x&&x()},V=()=>{null!==N&&N()},W=(e,t,n,i)=>{var r=a.stringifyPointer(t),s=a.stringifyPointer(n),l=a.readDoubles(i,3);e(r,s,o.default.latLng(l))},j=(e,t,n)=>{null!==O&&W(O,e,t,n)},Z=(e,t,n)=>{null!==k&&W(k,e,t,n)},K=e=>{if(null!==R){var t=a.stringifyPointer(e);R(t)}},q=e=>{if(null!==H){var t=a.stringifyPointer(e);H(t)}};this.onInitialized=()=>{s(r,n.addFunction(z),n.addFunction(G),n.addFunction(U),n.addFunction(V),n.addFunction(j),n.addFunction(Z),n.addFunction(K),n.addFunction(q))},this.setNotificationCallbacks=(e,t,n,i,o,r,a,s)=>{D=e,T=t,x=n,N=i,O=o,k=r,R=a,H=s},this.enterIndoorMap=e=>l(r,e),this.exitIndoorMap=()=>{u(r)},this.hasActiveIndoorMap=()=>!!d(r),this.getActiveIndoorMapId=()=>h(r),this.getActiveIndoorMapName=()=>p(r),this.getActiveIndoorMapSourceVendor=()=>c(r),this.getActiveIndoorMapFloorCount=()=>m(r),this.getActiveIndoorMapUserData=()=>g(r),this.getSelectedFloorIndex=()=>f(r),this.setSelectedFloorIndex=e=>!!_(r,e),this.getFloorName=e=>b(r,e),this.getFloorShortName=e=>v(r,e),this.getFloorNumber=e=>y(r,e),this.getFloorHeightAboveSeaLevel=e=>I(r,e),this.tryGetReadableName=e=>{var t=a.createInt32Buffer(1),n=M(r,e,e.length,t.ptr);if(!n)return null;var i=a.consumeBufferToArray(t)[0],o=a.createInt8Buffer(i);return(n=A(r,e,e.length,o.ptr,i))?a.consumeUtf8BufferToString(o):null};var J=(e,t,n,i)=>{var o=a.createInt32Buffer(1),s=n(r,e,e.length,t,o.ptr);if(!s)return null;var l=a.consumeBufferToArray(o)[0],u=a.createInt8Buffer(l);return(s=i(r,e,e.length,t,u.ptr,l))?a.consumeUtf8BufferToString(u):null};this.tryGetFloorReadableName=(e,t)=>J(e,t,L,E),this.tryGetFloorShortName=(e,t)=>J(e,t,w,C),this.setBackgroundColor=e=>{var t=we(e);F(r,t)},this.hideLabelsForEntities=e=>{a.passStrings(e,(e,t)=>{B(r,e,t)})},this.showLabelsForEntities=e=>{a.passStrings(e,(e,t)=>{P(r,e,t)})},this.showAllLabels=()=>{S(r)}}function Be(e,t,n){var i=e,o=null,r=null,a=null,s=null,l=null;this.registerCallbacks=(e,o)=>{null!==l&&n.removeFunction(l),l=n.addFunction(e),null!==s&&n.removeFunction(s),s=n.addFunction(o),(a=a||t("precacheApi_setPrecacheCallbacks",null,["number","number","number"]))(i,l,s)},this.beginPrecacheOperation=e=>{o=o||t("precacheApi_beginPrecacheOperation","number",["number","number","number","number"]);var n=e.getCentre();return o(i,n.lat,n.lng,e.getRadius())},this.cancelPrecacheOperation=e=>{(r=r||t("precacheApi_cancelPrecacheOperation",null,["number","number"]))(i,e)}}function Pe(e,t,n,i){var r=e,a=i,s=null,l=null,u=null,d=null,h=null,p=null,c=null,g=null,f=t("spacesApi_ScreenPointToRay",null,["number","number","number","number"]),_=t("spacesApi_LatLongToVerticallyDownRay",null,["number","number","number","number"]),b=(e,t,n)=>{var i=[0,0,0],s=!1;return a.passDoubles(i,function(o,l){var u=n(r,e,t,o);s=!!u,i=a.readDoubles(o,3)}),s?o.default.latLng(i):null};this.worldToScreen=e=>{var n=o.default.latLng(e);return((e,n,i)=>{s=s||t("worldToScreen",null,["number","number","number","number","number"]);var o=[0,0,0];return a.passDoubles(o,function(t,l){s(r,e,n,i,t),o=a.readDoubles(t,3)}),new m(o)})(n.lat,n.lng,n.alt||0)},this.screenToTerrainPoint=e=>{var n,i,r=o.default.point(e);return n=r.x,i=r.y,l=l||t("screenToTerrainPoint","number",["number","number","number","number"]),b(n,i,l)},this.screenToIndoorPoint=e=>{var n,i,r=o.default.point(e);return n=r.x,i=r.y,u=u||t("screenToIndoorPoint","number",["number","number","number","number"]),b(n,i,u)},this.screenToWorldPoint=e=>this.screenToIndoorPoint(e)||this.screenToTerrainPoint(e),this.getAltitudeAtLatLng=e=>{return n=(e=o.default.latLng(e)).lat,i=e.lng,(d=d||t("getAltitudeAtLatLng","number",["number","number","number"]))(r,n,i);var n,i},this.getUpdatedAltitudeAtLatLng=(e,n,i)=>((e,n,i,o)=>{h=h||t("getUpdatedAltitudeAtLatLng","number",["number","number","number","number","number","number"]);var s=[0,0],l=!1;return a.passDoubles(s,(t,u)=>{var d=h(r,e,n,i,o,t);(l=!!d)&&(s=a.readDoubles(t,2))}),l?s:null})(e.lat,e.lng,n,i),this.screenPointToRay=e=>{var t=o.default.point(e),n=a.createDoubleBuffer(6);f(r,t.x,t.y,n.ptr);var i=a.consumeBufferToArray(n);return{origin:new m(i[0],i[1],i[2]),direction:new m(i[3],i[4],i[5])}},this.latLongToVerticallyDownRay=e=>{var t=a.createDoubleBuffer(6);_(r,e.lat,e.lng,t.ptr);var n=a.consumeBufferToArray(t);return{origin:new m(n[0],n[1],n[2]),direction:new m(n[3],n[4],n[5])}},this.getMortonKeyAtLatLng=e=>{var n=o.default.latLng(e);return((e,n)=>{p=p||t("getMortonKeyAtLatLng",null,["number","number","number"]);var i="";return a.passString(i,t=>{p(e,n,t),i=a.stringifyPointer(t)}),i})(n.lat,n.lng)},this.getMortonKeyCenter=e=>(e=>{c=c||t("getMortonKeyCenter",null,["string","number"]);var n=[0,0];return a.passDoubles(n,(t,i)=>{c(e,t),n=a.readDoubles(t,2)}),n.forEach((e,t)=>{isNaN(e)&&(n[t]=0)}),o.default.latLng(n)})(e),this.getMortonKeyCorners=(e,n)=>((e,n)=>{g=g||t("getMortonKeyCorners",null,["string","number","number"]);var i=[0,0,0,0,0,0,0,0];return a.passDoubles(i,(t,o)=>{g(e,n,t),i=a.readDoubles(t,8)}),i.forEach((e,t)=>{isNaN(e)&&(i[t]=0)}),[o.default.latLng(i.slice(0,2)),o.default.latLng(i.slice(2,4)),o.default.latLng(i.slice(4,6)),o.default.latLng(i.slice(6))]})(e,n||0)}function Se(e,t,n){var i=e,o=null,r=null,a=null,s=null;this.setTheme=e=>{(o=o||t("setTheme",null,["number","string"]))(i,e)},this.setState=(e,n)=>{(r=r||t("setState",null,["number","string","number"]))(i,e,n)},this.setThemeManifest=e=>{(a=a||t("setThemeManifest",null,["number","string"]))(i,e)},this.registerStreamingCompletedCallback=e=>{(s=s||t("setStreamingCompletedCallback",null,["number","number"]))(i,n.addFunction(e))}}function De(e,t,n,i){var r=e,a=i,s=t("cameraApi_setViewUsingZenithAngle","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),l=t("cameraApi_setViewToBounds",null,["number","number","number","number","number","number","number","number","number"]),u=t("cameraApi_getDistanceToInterest","number",["number"]),d=t("cameraApi_getInterestLatLong",null,["number","number"]),h=t("cameraApi_getPitchDegrees","number",["number"]),p=t("cameraApi_getHeadingDegrees","number",["number"]),c=t("cameraApi_setEventCallback",null,["number","number"]),m=t("cameraApi_getDistanceFromZoomLevel","number",["number","number"]),g=t("cameraApi_getZoomLevel","number",["number"]),f=t("cameraApi_setVerticallyLocked",null,["number","number"]);this.setView=e=>{return t=!("animate"in e)||e.animate,n="location"in e?o.default.latLng(e.location):null,i="zoom"in e?this.getDistanceFromZoomLevel(e.zoom):"distance"in e?e.distance:null,d=!0,null===n&&(n={lat:0,lng:0,alt:0},d=!1),s(r,t,n.lat||0,n.lng||0,n.alt||0,d,i||0,null!==i,(a="headingDegrees"in e?e.headingDegrees:null)||0,null!==a,(l="tiltDegrees"in e?e.tiltDegrees:null)||0,null!==l,(u="durationSeconds"in e?e.durationSeconds:null)||0,null!==u,!("animate"in e&&!0===e.animate),!("allowInterruption"in e)||e.allowInterruption);var t,n,i,a,l,u,d},this.setViewToBounds=e=>{var t,n,i=o.default.latLngBounds(e.bounds);l(r,(t=i._northEast).lat,t.lng,t.alt||0,(n=i._southWest).lat,n.lng,n.alt||0,!("animate"in e)||e.animate,!("allowInterruption"in e)||e.allowInterruption)},this.getDistanceToInterest=()=>u(r),this.getInterestLatLong=()=>{var e=[0,0];return a.passDoubles(e,(t,n)=>{d(r,t),e=a.readDoubles(t,2)}),e},this.getPitchDegrees=()=>h(r),this.getHeadingDegrees=()=>p(r),this.setEventCallback=e=>{c(r,n.addFunction(e))},this.getDistanceFromZoomLevel=e=>m(r,e),this.getZoomLevel=()=>g(r),this.setVerticallyLocked=e=>{f(r,e)}}function Te(e,t,n){var i=e,o=null,r=null,a=null,s=null,l=null,u=null,d=null,h=null,p=null,c=null;this.expandIndoorMap=()=>(a=a||t("expandIndoorMap","number",["number"]))(i),this.collapseIndoorMap=()=>(s=s||t("collapseIndoorMap",null,["number"]))(i),this.getFloorParam=()=>(o=o||t("getFloorParam",null,["number"]))(i),this.setFloorParam=e=>(r=r||t("setFloorParam",null,["number","number"]))(i,e),this.setCollapseStartCallback=e=>{(l=l||t("setCollapseStartCallback",null,["number","number"]))(i,n.addFunction(e))},this.setCollapseCallback=e=>{(u=u||t("setCollapseCallback",null,["number","number"]))(i,n.addFunction(e))},this.setCollapseEndCallback=e=>{(d=d||t("setCollapseEndCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandStartCallback=e=>{(h=h||t("setExpandStartCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandCallback=e=>{(p=p||t("setExpandCallback",null,["number","number"]))(i,n.addFunction(e))},this.setExpandEndCallback=e=>{(c=c||t("setExpandEndCallback",null,["number","number"]))(i,n.addFunction(e))}}function xe(e,t,n,i){var o=e,r=i,a=t("indoorEntityApi_SetIndoorEntityPickedCallback",null,["number","number"]),s=t("indoorEntityApi_SetHighlightsWithBorderThickness",null,["number","string","number","number","number","number"]),l=t("indoorEntityApi_ClearHighlights",null,["number","string","number","number"]),u=t("indoorEntityApi_ClearAllHighlights",null,["number"]),d=null,h=e=>{if(null!==d){var t=r.stringifyPointer(e);d(t)}};this.onInitialized=()=>{a(o,n.addFunction(h))},this.registerIndoorEntityPickedCallback=e=>{d=e},this.setHighlights=(e,t,n,i)=>{null!=n&&("string"==typeof e&&(e=[e]),((e,t,n,i)=>{r.passStrings(e,(e,a)=>{r.passDoubles(t,(t,r)=>{s(o,n,e,a,t,i)})})})(e,t,n,i))},this.clearHighlights=(e,t)=>{if(void 0===e)u(o);else{if(null==t)return;"string"==typeof e&&(e=[e]),((e,t)=>{r.passStrings(e,(e,n)=>{l(o,t,e,n)})})(e,t)}}}class Ne{constructor(e){this._options=void 0,this._id=void 0,this._map=void 0,this._color=void 0,this._buildingInformation=void 0,this.getColor=()=>new g(this._color),this.getOptions=()=>this._options,this.setColor=e=>(this._color=new g(e),null!==this._map&&this._map.buildings._getImpl().notifyBuildingHighlightChanged(this),this),this.getId=()=>this._id,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,this._map.buildings._getImpl().addBuildingHighlight(this),this),this.remove=()=>(null!==this._map&&(this._map.buildings._getImpl().removeBuildingHighlight(this),this._map=null),this),this.getBuildingInformation=()=>this._buildingInformation,this._setNativeHandle=e=>{this._id=e},this._setBuildingInformation=e=>{this._buildingInformation=e},this._options=e,this._id=null,this._map=null,this._color=e.getColor(),this._buildingInformation=null}}const Oe=h(Ne);var ke;!function(e){e.SELECT_AT_LOCATION="selectAtLocation",e.SELECT_AT_SCREEN_POINT="selectAtScreenPoint"}(ke||(ke={}));class Re{constructor(){this._selectionLocationLatLng=void 0,this._selectionScreenPoint=void 0,this._selectionMode=void 0,this._color=void 0,this._informationOnly=void 0,this.highlightBuildingAtLocation=e=>(this._selectionMode=ke.SELECT_AT_LOCATION,this._selectionLocationLatLng=o.default.latLng(e),this),this.highlightBuildingAtScreenPoint=e=>(this._selectionMode=ke.SELECT_AT_SCREEN_POINT,this._selectionScreenPoint=o.default.point(e),this),this.color=e=>(this._color=e,this),this.informationOnly=()=>(this._informationOnly=!0,this),this.getSelectionMode=()=>this._selectionMode,this.getSelectionLocation=()=>this._selectionLocationLatLng,this.getSelectionScreenPoint=()=>this._selectionScreenPoint,this.getColor=()=>new g(this._color),this.getIsInformationOnly=()=>this._informationOnly,this._selectionLocationLatLng=o.default.latLng([0,0]),this._selectionScreenPoint=o.default.point(0,0),this._selectionMode=ke.SELECT_AT_LOCATION,this._color=[255,255,0,128],this._informationOnly=!1}}const He=h(Re);class ze{constructor(e,t,n){this._buildingId=void 0,this._buildingDimensions=void 0,this._buildingContours=void 0,this.getBuildingId=()=>this._buildingId,this.getBuildingDimensions=()=>this._buildingDimensions,this.getBuildingContours=()=>this._buildingContours,this.toJson=()=>({building_id:this._buildingId,building_dimensions:this._buildingDimensions.toJson(),building_contours:this._buildingContours.map(e=>e.toJson())}),this._buildingId=e,this._buildingDimensions=t,this._buildingContours=n}}class Ge{constructor(e,t,n){this._baseAltitude=void 0,this._topAltitude=void 0,this._centroid=void 0,this.getBaseAltitude=()=>this._baseAltitude,this.getTopAltitude=()=>this._topAltitude,this.getCentroid=()=>this._centroid,this.toJson=()=>({base_altitude:this._baseAltitude,top_altitude:this._topAltitude,centroid:this._centroid}),this._baseAltitude=e,this._topAltitude=t,this._centroid=n}}class Ue{constructor(e,t,n){this._bottomAltitude=void 0,this._topAltitude=void 0,this._points=void 0,this.getBottomAltitude=()=>this._bottomAltitude,this.getTopAltitude=()=>this._topAltitude,this.getPoints=()=>this._points,this.toJson=()=>({bottom_altitude:this._bottomAltitude,top_altitude:this._topAltitude,points:this._points}),this._bottomAltitude=e,this._topAltitude=t,this._points=n}}var Ve,We={__proto__:null,buildingHighlight:Oe,BuildingHighlight:Ne,buildingHighlightOptions:He,BuildingHighlightOptions:Re,get BuildingHighlightSelectionType(){return ke},BuildingInformation:ze,BuildingDimensions:Ge,BuildingContour:Ue};function je(e,t,n,i){var r=e,a=i,s=t("buildingsApi_SetBuildingHighlightChangedCallback",null,["number","number"]),l=t("buildingsApi_CreateHighlightAtLocation",null,["number","number","number","number","number","number","number","number"]),u=t("buildingsApi_CreateHighlightAtScreenPoint",null,["number","number","number","number","number","number","number","number"]),d=t("buildingsApi_DestroyHighlight",null,["number","number"]),h=t("buildingsApi_SetHighlightColor",null,["number","number","number","number","number","number"]),p=t("buildingsApi_TryGetBuildingInformationBufferSizes","number",["number","number","number","number"]),c=t("buildingsApi_TryGetBuildingInformation","number",["number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),m=t("buildingsApi_TryFindIntersectionWithBuilding","number",["number","number","number"]);this.registerBuildingInformationReceivedCallback=e=>{s(r,n.addFunction(e))},this.createBuildingHighlight=e=>{var t=0,n=e.getOptions(),i=e.getColor(),o=n.getIsInformationOnly()?0:1;if(n.getSelectionMode()===ke.SELECT_AT_LOCATION){var a=n.getSelectionLocation();t=l(r,a.lat,a.lng,i.x/255,i.y/255,i.z/255,i.w/255,o)}else{var s=n.getSelectionScreenPoint();t=u(r,s.x,s.y,i.x/255,i.y/255,i.z/255,i.w/255,o)}return t},this.destroyBuildingHighlight=e=>{d(r,e)},this.setHighlightColor=(e,t)=>{h(r,e,t.x/255,t.y/255,t.z/255,t.w/255)},this.tryGetBuildingInformation=e=>{var t=a.createInt32Buffer(1),n=a.createInt32Buffer(1),i=a.createInt32Buffer(1),s=p(r,e,t.ptr,n.ptr,i.ptr),l=a.consumeBufferToArray(t)[0],u=a.consumeBufferToArray(n)[0],d=a.consumeBufferToArray(i)[0];if(!s)return null;var h=a.createInt8Buffer(l),m=a.createDoubleBuffer(1),g=a.createDoubleBuffer(1),f=a.createBufferFromArray([0,0],a.createDoubleBuffer),_=a.createDoubleBuffer(2*u),b=a.createInt32Buffer(d),v=a.createDoubleBuffer(d),y=a.createDoubleBuffer(d);s=c(r,e,h.ptr,l,m.ptr,g.ptr,f.ptr,_.ptr,_.element_count,b.ptr,b.element_count,v.ptr,v.element_count,y.ptr,y.element_count);for(var I=a.consumeUtf8BufferToString(h),M=a.consumeBufferToArray(m),A=a.consumeBufferToArray(g),L=o.default.latLng(a.consumeBufferToArray(f)),E=new Ge(M,A,L),w=a.consumeBufferToArray(_),C=a.consumeBufferToArray(b),F=a.consumeBufferToArray(v),B=a.consumeBufferToArray(y),P=[],S=0,D=0;D<b.element_count;++D){for(var T=C[D],x=[],N=0;N<T;++N){var O=w[S++],k=w[S++];x.push(o.default.latLng(O,k))}var R=new Ue(F[D],B[D],x);P.push(R)}return s?new ze(I,E,P):null},this.findIntersectionWithBuilding=e=>{var t=a.createBufferFromArray([e.origin.x,e.origin.y,e.origin.z,e.direction.x,e.direction.y,e.direction.z],a.createDoubleBuffer),n=a.createDoubleBuffer(3),i=m(r,t.ptr,n.ptr);a.freeBuffer(t);var s=a.consumeBufferToArray(n);return{found:i,point:o.default.latLng(s)}}}function Ze(e,t,n,i){var o=e,r=i,a=t("renderingApi_SetMapCollapsed",null,["number","number"]),s=t("renderingApi_SetClearColor",null,["number","number"]),l=t("renderingApi_GetCameraRelativePosition",null,["number","number","number","number","number","number"]),u=t("renderingApi_GetCameraProjectionMatrix",null,["number","number","number"]),d=t("renderingApi_GetCameraOrientationMatrix",null,["number","number","number"]),h=t("renderingApi_GetLightingData",null,["number","number","number"]),p=t("renderingApi_GetNorthFacingOrientationMatrix",null,["number","number","number","number","number"]);this.setMapCollapsed=e=>{a(o,e?1:0)},this.setClearColor=e=>{var t=we(e);s(o,t)},this.getCameraRelativePosition=e=>{var t=new Array(3);return r.passDoubles(t,(n,i)=>{l(o,e.lat,e.lng,e.alt||0,i,n),t=r.readDoubles(n,i)}),new m(t)},this.getNorthFacingOrientationMatrix=e=>{var t=new Array(16);return r.passDoubles(t,(n,i)=>{p(o,e.lat,e.lng,i,n),t=r.readDoubles(n,i)}),t},this.getCameraProjectionMatrix=()=>{var e=new Array(16);return r.passDoubles(e,(t,n)=>{u(o,n,t),e=r.readDoubles(t,n)}),e},this.getCameraOrientationMatrix=()=>{var e=new Array(16);return r.passDoubles(e,(t,n)=>{d(o,n,t),e=r.readDoubles(t,n)}),e},this.getLightingData=()=>{var e=new Array(21);return r.passDoubles(e,(t,n)=>{h(o,n,t),e=r.readDoubles(t,n)}),{key:{direction:new m(e[0],e[1],e[2]),color:new m(e[9],e[10],e[11])},back:{direction:new m(e[3],e[4],e[5]),color:new m(e[12],e[13],e[14])},fill:{direction:new m(e[6],e[7],e[8]),color:new m(e[15],e[16],e[17])},ambient:{color:new m(e[18],e[19],e[20])}}}}function Ke(e,t,n,i){var r=e,a=i,s=null,l=null,u=null,d=null;this._createLatLngsNumberArray=function(e){for(var t=new Array(2*e.length),n=0;n<e.length;n++){var i=e[n],o=2*n;t[o]=i.lat,t[o+1]=i.lng}return t},this.createPointMapping=(e,n,i,o,l,u)=>{s=s||t("createLayerMapping",null,["number","number","number","number","string","number","number","number","number"]);var d=this._createLatLngsNumberArray(u);a.passDoubles(d,(t,a)=>{s(r,e,n,i,o,o.length,l,t,a)})},this.createPointMappingWithFloorIndex=(e,n,i,o,s,u)=>{l=l||t("createLayerMappingWithFloorIndex",null,["number","number","number","number","string","number","number","number","number"]);var d=this._createLatLngsNumberArray(u);a.passDoubles(d,(t,a)=>{l(r,e,n,i,o,o.length,s,t,a)})},this.removePointMapping=e=>{(u=u||t("removeLayerMapping",null,["number","number"]))(r,e)},this.getLatLngsForLayer=(e,n)=>{d=d||t("getPointsOnMapForLayer","number",["number","number","number"]);var i=new Array(3*n);a.passDoubles(i,(t,n)=>{var o=d(r,e,t);if(i.length!==o)throw new Error("_getPointsOnMapForLayer : unexpected array length. Expected '"+o+"' but was '"+i.length+"'.");i=a.readDoubles(t,o)});for(var s=new Array(n),l=0,u=0;u<i.length;u+=3)s[l++]=o.default.latLng(i[u],i[u+1],i[u+2]);return s}}class qe{constructor(e,t,n,i,o,r,a,s){this._indoorMapId=void 0,this._floorId=void 0,this._name=void 0,this._geometryId=void 0,this._location=void 0,this._elevation=void 0,this._elevationMode=void 0,this._headingDegrees=void 0,this._indoorMapId=e,this._floorId=t,this._name=n,this._geometryId=i,this._location=o,this._elevation=r,this._elevationMode=a,this._headingDegrees=s}getIndoorMapId(){return this._indoorMapId}getIndoorMapFloorId(){return this._floorId}getName(){return this._name}getGeometryId(){return this._geometryId}getLocation(){return this._location}getElevation(){return this._elevation}getElevationMode(){return this._elevationMode}getHeadingDegrees(){return this._headingDegrees}}function Je(e,t,n,i){var r=e,a=i,s=null,l=null,u=null,d=null,h=null,p=null,c=null,m=null,g=null,f=null,_=null,b=null,v=null,y=null,I=null,M=null,A=null,L=null,E=null;this.onInitialized=()=>{this.registerIndoorMapEntitySetPropsLoadedHandler(w)},this.createProp=(e,n,i,o,a,l,u,d,h)=>{s=s||t("propsApi_createProp","number",["number","string","number","string","number","number","number","number","number","string"]);var p=B(u);return s(r,e,n,i,o,a,l,p,d,h)},this.createProps=(e,n,i,o,s,u,d,h,p)=>{var c=e.length;if(n.length!==c||i.length!==c||o.length!==c||s.length!==c||u.length!==c||d.length!==c||h.length!==c||p.length!==c)throw new Error("Unequal array element counts in call to createProps.");l=l||t("propsApi_createProps",null,["number","number","number","number","number","number","number","number","number","number","number","number"]);var m=a.createInt32Buffer(c),g=[];d.forEach(function(e){g.push(B(e))});var f=a.createBufferFromArray(n,a.createInt32Buffer),_=a.createBufferFromArray(o,a.createDoubleBuffer),b=a.createBufferFromArray(s,a.createDoubleBuffer),v=a.createBufferFromArray(u,a.createDoubleBuffer),y=a.createBufferFromArray(g,a.createInt32Buffer),I=a.createBufferFromArray(h,a.createDoubleBuffer);return a.passStrings(e,(e,t)=>{a.passStrings(i,(t,n)=>{a.passStrings(p,(n,i)=>{l(r,c,e,f.ptr,t,_.ptr,b.ptr,v.ptr,y.ptr,I.ptr,n,m.ptr)})})}),a.freeBuffer(I),a.freeBuffer(y),a.freeBuffer(v),a.freeBuffer(_),a.freeBuffer(b),a.freeBuffer(f),a.consumeBufferToArray(m)},this.destroyProp=e=>{(u=u||t("propsApi_destroyProp",null,["number","number"]))(r,e)},this.destroyProps=e=>{d=d||t("propsApi_destroyProps",null,["number","number","number"]),a.passInt32s(e,(e,t)=>{d(r,e,t)})},this.propExists=e=>(h=h||t("propsApi_propExists","number",["number","number"]))(r,e),this.setLocation=(e,n,i)=>{(p=p||t("propsApi_setLocation",null,["number","number","number","number"]))(r,e,n,i)},this.setElevation=(e,n)=>{(c=c||t("propsApi_setElevation",null,["number","number","number"]))(r,e,n)},this.setElevationMode=(e,n)=>{m=m||t("propsApi_setElevationMode",null,["number","number","number"]);var i=B(n);m(r,e,i)},this.setGeometryId=(e,n)=>{(g=g||t("propsApi_setGeometryId",null,["number","number","string"]))(r,e,n)},this.setHeadingDegrees=(e,n)=>{(f=f||t("propsApi_setHeadingDegrees",null,["number","number","number","number"]))(r,e,n)},this.setAutomaticIndoorMapPopulationEnabled=e=>{(_=_||t("propsApi_setAutomaticIndoorMapPopulationEnabled",null,["number","number"]))(r,e)},this.isAutomaticIndoorMapPopulationEnabled=()=>(b=b||t("propsApi_isAutomaticIndoorMapPopulationEnabled","number",["number"]))(r),this.tryGetIndoorMapEntitySetProps=(e,n)=>{var i=(v=v||t("propsApi_getIndoorMapPropCount","number",["number","string","number"]))(r,e,n),s=a.createInt32Buffer(i),l=a.createInt32Buffer(i),u=a.createInt32Buffer(2),d=(y=y||t("propsApi_tryGetIndoorMapPropDataBufferSizes","number",["number","string","number","number","number","number","number"]))(r,e,n,i,s.ptr,l.ptr,u.ptr);if(!d)return null;var h=a.consumeBufferToArray(s),p=a.consumeBufferToArray(l),c=a.consumeBufferToArray(u),m=c[1],g=a.createInt8Buffer(c[0]),f=a.createInt8Buffer(m),_=a.createDoubleBuffer(2*i),b=a.createDoubleBuffer(i),M=a.createDoubleBuffer(i);if(!(d=(I=I||t("propsApi_tryGetIndoorMapPropData","number",["number","string","number","number","number","number","number","number","number"]))(r,e,n,i,g.ptr,f.ptr,_.ptr,b.ptr,M.ptr)))return null;for(var A=a.consumeUtf8BufferToString(g),L=a.consumeUtf8BufferToString(f),E=a.consumeBufferToArray(_),w=a.consumeBufferToArray(b),F=a.consumeBufferToArray(M),B=[],P=0,S=0,D=0;D<i;D++){var T=P+h[D],x=A.slice(P,T);P=T;var N=S+p[D],O=L.slice(S,N);S=N;var k=o.default.latLng(E[2*D],E[2*D+1]),R=new qe(e,n,x,O,k,w[D],C.HEIGHT_ABOVE_GROUND,F[D]);B.push(R)}return B},this.setIndoorMapPopulationServiceUrl=e=>{(M=M||t("propsApi_setIndoorMapPopulationServiceUrl",null,["number","string"]))(r,e)};var w=(e,t)=>{if(null!==E){var n=a.stringifyPointer(e);E(n,t)}};this.setIndoorMapEntitySetPropsLoadedCallback=e=>{E=e},this.registerIndoorMapEntitySetPropsLoadedHandler=e=>{(A=A||t("propsApi_setIndoorMapEntitySetPropsLoadedCallback",null,["number","number"]))(r,n.addFunction(e))},this.setIndoorMapPopulationRequestCompletedCallback=e=>{(L=L||t("propsApi_setIndoorMapPopulationRequestCompletedCallback",null,["number","number","number"]))(r,n.addFunction(e))}}!function(e){e.NONE="None",e.PARTIAL="Partial",e.COMPLETE="Complete"}(Ve||(Ve={}));class $e{constructor(e){this._nativeId=void 0,this._map=void 0,this._indoorMapId=void 0,this._indoorMapEntities=void 0,this._loadState=void 0,this.getIndoorMapId=()=>this._indoorMapId,this.getIndoorMapEntities=()=>this._indoorMapEntities,this.getLoadState=()=>this._loadState,this.getId=()=>this._nativeId,this.getNativeId=()=>this._nativeId,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,this._map.indoorMapEntities._getImpl().addIndoorMapEntityInformation(this),this),this.remove=()=>(null!==this._map&&(this._map.indoorMapEntities._getImpl().removeIndoorMapEntityInformation(this),this._map=null),this),this._setNativeHandle=e=>{this._nativeId=e},this._setData=e=>{switch(this._indoorMapEntities=e.IndoorMapEntities,e.LoadState){case 0:this._loadState=Ve.NONE;break;case 1:this._loadState=Ve.PARTIAL;break;case 2:this._loadState=Ve.COMPLETE}},this._nativeId=null,this._map=null,this._indoorMapId=e,this._indoorMapEntities=[],this._loadState=Ve.NONE}}const Xe=h($e);class Ye{constructor(e,t,n,i){this._indoorMapEntityId=void 0,this._indoorMapFloorId=void 0,this._position=void 0,this._outline=void 0,this._indoorMapEntityId=e,this._indoorMapFloorId=t,this._position=n,this._outline=i}getIndoorMapEntityId(){return this._indoorMapEntityId}getIndoorMapFloorId(){return this._indoorMapFloorId}getPosition(){return this._position}getOutline(){return this._outline}}var Qe,et={__proto__:null,indoorMapEntityInformation:Xe,IndoorMapEntityInformation:$e,IndoorMapEntity:Ye};function tt(e,t,n,i){var r=e,a=i,s=t("indoorEntityInformationApi_IndoorMapEntityInformationChangedCallback",null,["number","number"]),l=t("indoorMapEntityInformation_CreateIndoorMapEntityInformation","number",["number","string"]),u=t("indoorMapEntityInformation_DestroyIndoorMapEntityInformation",null,["number","number"]),d=t("indoorEntityInformationApi_TryGetIndoorMapEntityCountBuffer","number",["number","number","number"]),h=t("indoorEntityInformationApi_TryGetIndoorMapEntityInformationLoadState","number",["number","number","number"]),p=t("indoorEntityInformationApi_TryGetIndoorMapEntityBuffersSize","number",["number","number","number","number","number"]),c=t("indoorEntityInformationApi_TryGetIndoorMapEntityModels","number",["number","number","number","number","number","number","number","number","number","number","number","number"]);this.registerIndoorMapEntityInformationChangedCallback=e=>{s(r,n.addFunction(e))},this.createIndoorMapEntityInformation=e=>{var t=e.getIndoorMapId();return l(r,t)},this.destroyIndoorMapEntityInformation=e=>{u(r,e)},this.tryGetIndoorMapEntityInformation=e=>{var t=a.createInt32Buffer(1),n=h(r,e,t.ptr),i=a.consumeBufferToArray(t);if(!n)return null;var s=a.createInt32Buffer(1);n=d(r,e,s.ptr);var l=a.consumeBufferToArray(s)[0];if(!n)return null;var u=a.createInt32Buffer(3),m=a.createInt32Buffer(l);n=p(r,e,l,m.ptr,u.ptr);var g=a.consumeBufferToArray(u),f=a.consumeBufferToArray(m),_=g[0],b=g[1],v=g[2];if(!n)return null;var y=a.createInt8Buffer(_),I=a.createInt32Buffer(l),M=a.createDoubleBuffer(2*l),A=a.createInt32Buffer(l),L=a.createInt32Buffer(b),E=a.createDoubleBuffer(v);n=c(r,e,l,y.ptr,_,I.ptr,M.ptr,A.ptr,L.ptr,b,E.ptr,v);var w=a.consumeUtf8BufferToString(y),C=a.consumeBufferToArray(I),F=a.consumeBufferToArray(M),B=a.consumeBufferToArray(A),P=a.consumeBufferToArray(L),S=a.consumeBufferToArray(E);if(!n)return null;for(var D=[],T=0,x=0,N=0,O=0;O<l;O++){var k=T+f[O],R=w.slice(T,k);T=k;for(var H=C[O],z=o.default.latLng(F[2*O],F[2*O+1]),G=[],U=x+B[O],V=x;V<U;V++){for(var W=[],j=N+P[V],Z=N;Z<j;Z++)W.push(o.default.latLng(S[2*Z],S[2*Z+1])),N++;G.push(W),x++}var K=new Ye(R,H,z,G);D.push(K)}return{LoadState:i[0],IndoorMapEntities:D}}}class nt{constructor(e,t){this._outerRing=void 0,this._innerRings=void 0,this._outerRing=e,this._innerRings=t}getOuterRing(){return this._outerRing}getInnerRings(){return this._innerRings}}class it{constructor(e){this._latLngPoints=void 0,this._latLngPoints=e}getLatLngPoints(){return this._latLngPoints}}function ot(e,t,n,i){var r=e,a=i,s=t("indoorMapFloorOutlineInformationApi_IndoorMapFloorOutlineInformationLoadedCallback",null,["number","number"]),l=t("indoorMapFloorOutlineInformationApi_CreateIndoorMapFloorOutlineInformation","number",["number","string","number"]),u=t("indoorMapFloorOutlineInformationApi_DestroyIndoorMapFloorOutlineInformation",null,["number","number"]),d=t("indoorMapFloorOutlineInformationApi_GetIndoorMapFloorOutlineInformationLoaded","number",["number","number"]),h=t("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlineBufferSize","number",["number","number","number"]),p=t("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygonBufferSizes","number",["number","number","number","number","number","number"]),c=t("indoorMapFloorOutlineInformationApi_TryGetIndoorMapFloorOutlinePolygon","number",["number","number","number","number","number","number","number","number"]);this.registerIndoorMapFloorOutlineInformationLoadedCallback=e=>{s(r,n.addFunction(e))},this.createIndoorMapFloorOutlineInformation=e=>{var t=e.getIndoorMapId(),n=e.getIndoorMapFloorId();return l(r,t,n)},this.destroyIndoorMapFloorOutlineInformation=e=>{u(r,e)},this.getIndoorMapFloorOutlineInformationLoaded=e=>d(r,e),this.tryGetIndoorMapFloorOutlineInformation=e=>{var t=a.createInt32Buffer(1),n=h(r,e,t.ptr),i=a.consumeBufferToArray(t)[0];if(!n)return null;var o,s=[];for(o=0;o<i;o++){var l=a.createInt32Buffer(1),u=a.createInt32Buffer(1),d=a.createInt32Buffer(1);n=p(r,e,o,l.ptr,u.ptr,d.ptr);var g=a.consumeBufferToArray(l)[0],f=a.consumeBufferToArray(u)[0],_=a.consumeBufferToArray(d)[0];if(!n)return null;var b=a.createDoubleBuffer(2*g),v=a.createInt32Buffer(f),y=a.createDoubleBuffer(2*_);n=c(r,e,o,b.ptr,b.element_count,v.ptr,v.element_count,y.ptr,y.element_count);for(var I=a.consumeBufferToArray(b),M=a.consumeBufferToArray(v),A=a.consumeBufferToArray(y),L=m(I,0,g),E=0,w=[],C=0;C<f;C++){var F=M[C],B=m(A,E,F);E+=2*F,w.push(B)}if(!n)return null;var P=new nt(L,w);s.push(P)}return s};var m=(e,t,n)=>{for(var i=t,r=[],a=0;a<n;++a){var s=e[i++],l=e[i++];r.push(o.default.latLng(s,l))}return new it(r)}}function rt(e,t,n,i){var o=e,r=i,a=t("polylineApi_createPolyline","number",["number","string","number","number","number","number","number","number","number","number","number","number","number"]),s=t("polylineApi_destroyPolyline",null,["number","number"]),l=t("polylineApi_setIndoorMap",null,["number","number","string","number","number"]),u=t("polylineApi_setElevation",null,["number","number","number"]),d=t("polylineApi_setStyleAttributes",null,["number","number","number","number","number"]);this.createPolyline=e=>{var t=[],n=[],i=!1;e.getLatLngs().forEach(e=>{t.push(e.lat),t.push(e.lng);var o=0;void 0!==e.alt&&(i=!0,o=e.alt),n.push(o)}),i||(n=[]);var s=r.createBufferFromArray(t,r.createDoubleBuffer),l=r.createBufferFromArray(n,r.createDoubleBuffer),u=e.getIndoorMapId(),d=e.getIndoorMapFloorId(),h=e.getElevation(),p=B(e.getElevationMode()),c=e.getWidth(),m=we(e.getColor()),g=e.getMiterLimit(),f=a(o,u,u.length,d,h,p,s.ptr,s.element_count,l.ptr,l.element_count,c,m,g);return r.freeBuffer(s),r.freeBuffer(l),f},this.destroyPolyline=e=>{s(o,e)},this.updateNativeState=(e,t)=>{if(t._needsNativeUpdate){t._needsNativeUpdate=!1;var n=t.getIndoorMapId(),i=B(t.getElevationMode()),r=we(t.getColor());l(o,e,n,n.length,t.getIndoorMapFloorId()),u(o,e,t.getElevation(),i),d(o,e,t.getWidth(),r,t.getMiterLimit())}}}function at(e,t,n,i){var o=e,r=t("blueSphereApi_setEnabled",null,["number","number"]),a=t("blueSphereApi_setCoordinate",null,["number","number","number"]),s=t("blueSphereApi_setElevation",null,["number","number"]),l=t("blueSphereApi_setIndoorMap",null,["number","string","number","number"]),u=t("blueSphereApi_setHeadingDegrees",null,["number","number"]),d=t("blueSphereApi_showOrientation",null,["number","number"]);this.updateNativeState=e=>{var t=e.getLocation(),n=e.getIndoorMapId();t?(r(o,e.isEnabled()),a(o,t.lat,t.lng),s(o,e.getElevation()),l(o,n,n.length,e.getIndoorMapFloorId()),u(o,e.getHeadingDegrees()),d(o,e.isOrientationVisible())):r(o,!1)}}function st(e,t,n,i){var o=e,r=t("webglPause",null,["number"]),a=t("webglResume",null,["number"]),s=t("webglRemove",null,["number"]);this.onPause=()=>{r(o)},this.onResume=()=>{a(o)},this.onRemove=()=>{s(o)}}function lt(e,t,n){var i=e,o=n,r=t("versionApi_GetPlatformVersionStringSize","number",["number"]),a=t("versionApi_TryGetPlatformVersionString","number",["number","number","number"]),s=t("versionApi_GetPlatformHashStringSize","number",["number"]),l=t("versionApi_TryGetPlatformHashString","number",["number","number","number"]),u=(e,t)=>{var n=e(i),r=o.createInt8Buffer(n);return t(i,r.ptr,n)?o.consumeUtf8BufferToString(r):null};this.getPlatformVersion=()=>u(r,a),this.getPlatformVersionHash=()=>u(s,l)}!function(e){e.GROUND="ground",e.BUILDINGS="buildings",e.TREES="trees",e.TRANSPORT="transport"}(Qe||(Qe={}));const ut=(o.default.Layer?o.default.Layer:o.default.Class).extend({options:{dataCoordProperty:"latLng",dataWeightProperty:"weight",elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,polygonPoints:[],weightMin:0,weightMax:1,resolutionPixels:512,textureBorderPercent:.05,useApproximation:!0,densityStops:[{stop:0,radius:5,gain:1},{stop:1,radius:15,gain:1}],densityBlend:0,interpolateDensityByZoom:!1,zoomMin:15,zoomMax:18,colorGradient:[{stop:0,color:"#ffffff00"},{stop:.2,color:"#ffffb2ff"},{stop:.4,color:"#fecc5cff"},{stop:.6,color:"#fd8d3cff"},{stop:.8,color:"#f03b20ff"},{stop:1,color:"#bd0026ff"}],opacity:1,intensityBias:0,intensityScale:1,occludedMapFeatures:[Qe.BUILDINGS,Qe.TREES],occludedAlpha:.85,occludedSaturation:.7,occludedBrightness:.7},_loadPointData:function(e){const t=[],n=this.options.dataCoordProperty,i=this.options.dataWeightProperty;return e.forEach(e=>{let r,a=1;if(n in e){const t=e;r=o.default.latLng(t[n]),i in e&&(a=t[i])}else{if(!Array.isArray(e))throw new Error("Expected {latLng, weight} or [<lat>, lng, weight] when parsing pointData.");r=o.default.latLng(e[0],e[1]),e.length>2&&(a=e[2])}t.push({latLng:r,weight:a})}),t},_getArrayDepth:function(e){let t=0,n=e;do{n=n[0],t++}while(Array.isArray(n));return t},_loadLatLngAlts:function(e){return e.map(o.default.latLng)},_loadPolygonRings:function(e){let t=[];const n=this._getArrayDepth(e);if(2===n)t.push(this._loadLatLngAlts(e=e));else if(3===n)(e=e).forEach(e=>{t.push(this._loadLatLngAlts(e))},this);else{if(0!==e.length)throw new Error("Incorrect array depth for heatmap options.polygonPoints.");t=[]}return t},_loadDensityParams:function(e){let t=0,n=0,i=0;if(Array.isArray(e)){if(e.length<2)throw new Error("Expected array [<stop>, <radius>, <(optional) gain>] when parsing options.densityStops");t=e[0],n=e[1],i=e.length>2?e[2]:1}else{if(void 0===e.stop||void 0===e.radius)throw new Error("Expected object {stop:<stop>, radius:<radius>, (optional) gain:<gain>} when parsing options.densityStops");t=e.stop,n=e.radius,i=e.gain||1}if(isNaN(t))throw new Error("Expected Number for heatmap density stop parameter: "+String(t));if(isNaN(n))throw new Error("Expected Number for heatmap radius parameter: "+String(n));if(isNaN(i))throw new Error("Expected Number for heatmap gain parameter: "+String(i));return{stop:t,radius:n,gain:i}},_loadDensityStops:function(e){const t=[],n=this._getArrayDepth(e);if(1===n&&Array.isArray(e)&&"number"==typeof e[0])t.push(this._loadDensityParams(e));else{if(!(n<=2))throw new Error("Incorrect array depth for heatmap options.densityStops.");e.forEach(e=>{t.push(this._loadDensityParams(e))},this)}return t},_loadColorStop:function(e){let t=0,n="#ffffffff";if(Array.isArray(e)){if(e.length<2)throw new Error("Expected array [<stop>, <color>] when parsing options.colorGradient");t=e[0],n=e[1]}else{if(void 0===e.stop||void 0===e.color)throw new Error("Expected object {stop:<stop>, color:<color>} when parsing options.colorGradient");t=e.stop,n=e.color}if(isNaN(t))throw new Error("Expected Number for color stop parameter: "+String(t));return{stop:t,color:n}},_loadColorGradient:function(e){const t=[],n=this._getArrayDepth(e);if(1===n&&"number"==typeof e[0])t.push(this._loadColorStop(e=e));else{if(!(n<=2&&Array.isArray(e)))throw new Error("Incorrect array depth for heatmap options.colorGradient.");(e=e).forEach(e=>{t.push(this._loadColorStop(e))},this)}return t},initialize:function(e,t){this.setOptions(t||{}),this._pointData=this._loadPointData(e)},getData:function(){return this._pointData},setData:function(e){return this._pointData=this._loadPointData(e),this._changedFlags.data=!0,this},getPolygonPoints:function(){return this.options.polygonPoints},getIndoorMapId:function(){return this.options.indoorMapId},getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWeightMin:function(){return this.options.weightMin},getWeightMax:function(){return this.options.weightMax},getResolutionPixels:function(){return this.options.resolutionPixels},getTextureBorderPercent:function(){return this.options.textureBorderPercent},getUseApproximation:function(){return this.options.useApproximation},getDensityStops:function(){return this.options.densityStops},getDensityBlend:function(){return this.options.densityBlend},getInterpolateDensityByZoom:function(){return this.options.interpolateDensityByZoom},getZoomMin:function(){return this.options.zoomMin},getZoomMax:function(){return this.options.zoomMax},getColorGradient:function(){return this.options.colorGradient},getOpacity:function(){return this.options.opacity},getIntensityBias:function(){return this.options.intensityBias},getIntensityScale:function(){return this.options.intensityScale},getOccludedMapFeatures:function(){return this.options.occludedMapFeatures},getOccludedAlpha:function(){return this.options.occludedAlpha},getOccludedSaturation:function(){return this.options.occludedSaturation},getOccludedBrightness:function(){return this.options.occludedBrightness},setIndoorMapWithFloorId:function(e,t){if(isNaN(t))throw new Error("Heatmap indoorMapFloorId cannot be NaN");return this.options.indoorMapId=e||ut.prototype.options.indoorMapId,this.options.indoorMapFloorId=t,this._changedFlags.indoorMap=!0,this},setElevation:function(e){if(isNaN(e))throw new Error("Heatmap elevation cannot be NaN");return this.options.elevation=e,this._changedFlags.elevation=!0,this},setElevationMode:function(e){if(!F(e))throw new Error("Heatmap elevationMode must be valid");return this.options.elevationMode=e,this._changedFlags.elevation=!0,this},setDensityBlend:function(e){if(isNaN(e))throw new Error("Heatmap densityBlend cannot be NaN");return this.options.densityBlend=Math.min(Math.max(e,0),1),this._changedFlags.densityBlend=!0,this},setInterpolateDensityByZoom:function(e){return this.options.interpolateDensityByZoom=!!e,this._changedFlags.interpolateDensityByZoom=!0,this},setZoomMin:function(e){if(isNaN(e))throw new Error("Heatmap zoomMin cannot be NaN");return this.options.zoomMin=Math.max(e,0),this._changedFlags.interpolateDensityByZoom=!0,this},setZoomMax:function(e){if(isNaN(e))throw new Error("Heatmap zoomMax cannot be NaN");return this.options.zoomMax=Math.max(e,0),this._changedFlags.interpolateDensityByZoom=!0,this},setIntensityBias:function(e){if(isNaN(e))throw new Error("Heatmap intensityBias cannot be NaN");return this.options.intensityBias=Math.min(Math.max(e,0),1),this._changedFlags.intensityBias=!0,this},setIntensityScale:function(e){if(isNaN(e))throw new Error("Heatmap intensityScale cannot be NaN");return this.options.intensityScale=Math.max(e,0),this._changedFlags.intensityScale=!0,this},setOpacity:function(e){if(isNaN(e))throw new Error("Heatmap opacity cannot be NaN");return this.options.opacity=Math.min(Math.max(e,0),1),this._changedFlags.opacity=!0,this},setColorGradient:function(e){return this.options.colorGradient=this._loadColorGradient(e),this._changedFlags.colorGradient=!0,this},setResolution:function(e){if(isNaN(e))throw new Error("Heatmap resolutionPixels cannot be NaN");return this.options.resolutionPixels=Math.max(Math.min(e,2048),64),this._changedFlags.resolution=!0,this},setDensityStops:function(e){return this.options.densityStops=this._loadDensityStops(e),this._changedFlags.densityStops=!0,this},setUseApproximation:function(e){return this.options.useApproximation=!!e,this._changedFlags.useApproximation=!0,this},setWeightMin:function(e){if(isNaN(e))throw new Error("Heatmap weightMin cannot be NaN");return this.options.weightMin=e,this._changedFlags.data=!0,this},setWeightMax:function(e){if(isNaN(e))throw new Error("Heatmap weightMax cannot be NaN");return this.options.weightMax=e,this._changedFlags.data=!0,this},setPolygonPoints:function(e){return this.options.polygonPoints=this._loadPolygonRings(e),this._changedFlags.polygon=!0,this},setOptions:function(e){return o.default.setOptions(this,e),("indoorMapId"in e||"indooindoorMapFloorIdMapId"in e)&&this.setIndoorMapWithFloorId(this.options.indoorMapId,this.options.indoorMapFloorId),"elevation"in e&&this.setElevation(this.options.elevation),"elevationMode"in e&&this.setElevationMode(this.options.elevationMode),"densityBlend"in e&&this.setDensityBlend(this.options.densityBlend),"interpolateDensityByZoom"in e&&this.setInterpolateDensityByZoom(this.options.interpolateDensityByZoom),"zoomMin"in e&&this.setZoomMin(this.options.zoomMin),"zoomMax"in e&&this.setZoomMax(this.options.zoomMax),"intensityBias"in e&&this.setIntensityBias(this.options.intensityBias),"intensityScale"in e&&this.setIntensityScale(this.options.intensityScale),"opacity"in e&&this.setOpacity(this.options.opacity),"colorGradient"in e&&this.setColorGradient(this.options.colorGradient),"resolutionPixels"in e&&this.setResolution(this.options.resolutionPixels),"densityStops"in e&&this.setDensityStops(this.options.densityStops),"useApproximation"in e&&this.setUseApproximation(this.options.useApproximation),"weightMin"in e&&this.setWeightMin(this.options.weightMin),"weightMax"in e&&this.setWeightMax(this.options.weightMax),"polygonPoints"in e&&this.setPolygonPoints(this.options.polygonPoints),this},_update:function(){},beforeAdd:function(){},onAdd:function(){this._map.heatmaps.addHeatmap(this)},onRemove:function(){this._map.heatmaps.removeHeatmap(this)},redraw:function(){},_changedFlags:{indoorMap:!1,elevation:!1,densityBlend:!1,interpolateDensityByZoom:!1,intensityBias:!1,intensityScale:!1,opacity:!1,colorGradient:!1,occludedStyle:!1,resolution:!1,densityStops:!1,useApproximation:!1,data:!1,polygon:!1},_anyChanged:function(){return Object.values(this._changedFlags).some(Boolean)},_getChangedFlags:function(){return this._changedFlags},_clearChangedFlags:function(){Object.keys(this._changedFlags).forEach(e=>{this._changedFlags[e]=!1},this)}}),dt=h(ut);function ht(e,t,n,i){var o=e,r=i,a=t("heatmapApi_createHeatmap","number",["number","string","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"]),s=t("heatmapApi_destroyHeatmap",null,["number","number"]),l=t("heatmapApi_setIndoorMap",null,["number","number","string","number","number"]),u=t("heatmapApi_setElevation",null,["number","number","number","number"]),d=t("heatmapApi_setDensityBlend",null,["number","number","number"]),h=t("heatmapApi_setInterpolateDensityByZoom",null,["number","number","number","number","number"]),p=t("heatmapApi_setIntensityBias",null,["number","number","number"]),c=t("heatmapApi_setIntensityScale",null,["number","number","number"]),m=t("heatmapApi_setOpacity",null,["number","number","number"]),g=t("heatmapApi_setColorGradient",null,["number","number","number","number","number","number"]),f=t("heatmapApi_setResolution",null,["number","number","number"]),_=t("heatmapApi_setHeatmapDensities",null,["number","number","number","number","number","number","number","number"]),b=t("heatmapApi_useApproximation",null,["number","number","number"]),v=t("heatmapApi_setData",null,["number","number","number","number","number","number"]);const y=e=>{var t=[];return e.forEach(e=>{t.push(e.latLng.lat),t.push(e.latLng.lng);var n=0;void 0!==e.latLng.alt&&(n=e.latLng.alt),t.push(n),t.push(e.weight)}),t};this.createHeatmap=e=>{var t=[],n=[];e.getPolygonPoints().forEach(e=>{n.push(e.length),e.forEach(e=>{t.push(e.lat),t.push(e.lng),t.push(e.alt?e.alt:0)})}),0===t.length&&n.push(0);var i=r.createBufferFromArray(t,r.createDoubleBuffer),s=r.createBufferFromArray(n,r.createInt32Buffer),l=e.getIndoorMapId(),u=e.getIndoorMapFloorId(),d=e.getElevation(),h=B(e.getElevationMode()),p=y(e.getData()),c=r.createBufferFromArray(p,r.createDoubleBuffer),m=[],g=[],f=[];e.getDensityStops().forEach(e=>{m.push(e.stop),g.push(e.radius),f.push(e.gain)});var _=[],b=[];e.getColorGradient().forEach(e=>{_.push(e.stop),b.push(we(e.color))});var v=r.createBufferFromArray(m,r.createDoubleBuffer),I=r.createBufferFromArray(g,r.createDoubleBuffer),M=r.createBufferFromArray(f,r.createDoubleBuffer),A=r.createBufferFromArray(_,r.createDoubleBuffer),L=r.createBufferFromArray(b,r.createInt32Buffer),E=(e=>{var t=0;return e.forEach(function(e){e===Qe.GROUND?t|=1:e===Qe.BUILDINGS?t|=2:e===Qe.TREES?t|=4:e===Qe.TRANSPORT&&(t|=8)}),t})(e.getOccludedMapFeatures()),w=a(o,l,l.length,u,d,h,i.ptr,i.element_count,s.ptr,s.element_count,c.ptr,c.element_count,e.getWeightMin(),e.getWeightMax(),e.getResolutionPixels(),e.getTextureBorderPercent(),e.getUseApproximation()?1:0,v.ptr,v.element_count,I.ptr,I.element_count,M.ptr,M.element_count,A.ptr,A.element_count,L.ptr,L.element_count,e.getDensityBlend(),e.getInterpolateDensityByZoom(),e.getZoomMin(),e.getZoomMax(),e.getOpacity(),e.getIntensityBias(),e.getIntensityScale(),E,e.getOccludedAlpha(),e.getOccludedSaturation(),e.getOccludedBrightness());return r.freeBuffer(i),r.freeBuffer(s),r.freeBuffer(c),r.freeBuffer(v),r.freeBuffer(I),r.freeBuffer(M),r.freeBuffer(A),r.freeBuffer(L),w},this.destroyHeatmap=e=>{s(o,e)},this.updateNativeState=(e,t)=>{if(t._anyChanged()){var n=t._getChangedFlags();if(n.indoorMap){var i=t.getIndoorMapId();l(o,e,i,i.length,t.getIndoorMapFloorId())}if(n.elevation){var a=B(t.getElevationMode());u(o,e,t.getElevation(),a)}if(n.densityBlend&&d(o,e,t.getDensityBlend()),n.densityBlend&&h(o,e,t.getInterpolateDensityByZoom(),t.getZoomMin(),t.getZoomMax()),n.intensityBias&&p(o,e,t.getIntensityBias()),n.intensityScale&&c(o,e,t.getIntensityScale()),n.opacity&&m(o,e,t.getOpacity()),n.colorGradient){var s=[],I=[];t.getColorGradient().forEach(e=>{s.push(e.stop),I.push(we(e.color))});var M=r.createBufferFromArray(s,r.createDoubleBuffer),A=r.createBufferFromArray(I,r.createInt32Buffer);g(o,e,M.ptr,M.element_count,A.ptr,A.element_count),r.freeBuffer(M),r.freeBuffer(A)}if(n.resolution&&f(o,e,t.getResolutionPixels()),n.densityStops){var L=[],E=[],w=[];t.getDensityStops().forEach(e=>{L.push(e.stop),E.push(e.radius),w.push(e.gain)});var C=r.createBufferFromArray(L,r.createDoubleBuffer),F=r.createBufferFromArray(E,r.createDoubleBuffer),P=r.createBufferFromArray(w,r.createDoubleBuffer);_(o,e,C.ptr,C.element_count,F.ptr,F.element_count,P.ptr,P.element_count),r.freeBuffer(C),r.freeBuffer(F),r.freeBuffer(P)}if(n.useApproximation&&b(o,e,t.getUseApproximation()?1:0),n.data){var S=y(t.getData()),D=r.createBufferFromArray(S,r.createDoubleBuffer);v(o,e,D.ptr,D.element_count,t.getWeightMin(),t.getWeightMax()),r.freeBuffer(D)}t._clearChangedFlags()}}}function pt(e,t,n,i){var o=e,r=t("frameRateApi_SetTargetVSyncInterval",null,["number","number"]),a=t("frameRateApi_SetThrottledTargetFrameInterval",null,["number","number"]),s=t("frameRateApi_SetIdleSecondsBeforeThrottle",null,["number","number"]),l=t("frameRateApi_SetThrottleWhenIdleEnabled",null,["number","number"]),u=t("frameRateApi_CancelThrottle",null,["number"]);this.setTargetVSyncInterval=e=>{r(o,e)},this.setThrottledTargetFrameInterval=e=>{a(o,e)},this.setIdleSecondsBeforeThrottle=e=>{s(o,e)},this.setThrottleWhenIdleEnabled=e=>{l(o,e?1:0)},this.cancelThrottle=()=>{u(o)}}function ct(e){var t=e,n=!1,i=null,o=null;this.geofenceApi=null,this.indoorsApi=null,this.precacheApi=null,this.spacesApi=null,this.themesApi=null,this.cameraApi=null,this.expandFloorsApi=null,this.indoorEntityApi=null,this.renderingApi=null,this.buildingsApi=null,this.layerPointMappingApi=null,this.propsApi=null,this.indoorMapEntityInformationApi=null,this.indoorMapFloorOutlineInformationApi=null,this.polylineApi=null,this.blueSphereApi=null,this.mapRuntimeApi=null,this.versionApi=null,this.heatmapApi=null,this.frameRateApi=null,this.onInitialized=(e,r,a,s,l)=>{i=e,o=r;var u=t.cwrap,d=new Le(t);this.geofenceApi=new Ce(i,u,t),this.spacesApi=new Pe(i,u,t,d),this.themesApi=new Se(i,u,t),this.expandFloorsApi=new Te(i,u,t),this.layerPointMappingApi=new Ke(o,u,t,d),this.buildingsApi=new je(o,u,t,d),this.indoorsApi=new Fe(o,u,t,d),this.cameraApi=new De(o,u,t,d),this.indoorEntityApi=new xe(o,u,t,d),this.precacheApi=new Be(o,u,t),this.indoorMapEntityInformationApi=new tt(o,u,t,d),this.indoorMapFloorOutlineInformationApi=new ot(o,u,t,d),this.polylineApi=new rt(o,u,t,d),this.blueSphereApi=new at(o,u,t,d),this.mapRuntimeApi=new st(o,u,t,d),this.versionApi=new lt(o,u,d),this.heatmapApi=new ht(o,u,t,d),this.renderingApi=new Ze(o,u,t,d),this.frameRateApi=new pt(o,u,t,d),this.propsApi=new Je(o,u,t,d),t.cwrap("setTopLevelCallbacks",null,["number","number","number","number"])(i,t.addFunction(a),t.addFunction(s),t.addFunction(l)),n=!0},this.ready=()=>n}const mt="https://cdn-webgl.wrld3d.com/eegeojs/public/v2117/",gt=[];let ft=!1,_t=!1,bt=[];const vt=()=>{_t=!0,bt.forEach(e=>{window.createWrldModule(e)}),bt=[]},yt=o.default.Circle.extend({options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND},_project:function(){const e=this._map.latLngsForLayer(this)[0],t=e.lat,n=e.lng,i=e.alt||0,o=this._map,r=Math.PI/180,a=this._mRadius/6378100/r,s=Math.sin(t*r),l=Math.cos(t*r);let u=Math.acos((Math.cos(a*r)-s*s)/(l*l))/r;(isNaN(u)||0===u)&&(u=a/Math.cos(t*r));const d=o.getCameraHeadingDegrees()*r,h=[t+a*Math.cos(d),n+u*Math.sin(d),i],p=[t-a*Math.sin(d),n+u*Math.cos(d),i];this._point=o.latLngToLayerPoint([t,n,i]),this._radius=isNaN(u)?0:Math.max(Math.round(this._point.distanceTo(o.latLngToLayerPoint(p))),1),this._radiusY=Math.max(Math.round(this._point.distanceTo(o.latLngToLayerPoint(h))),1),this._updateBounds()},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),It=h(yt),Mt=o.default.Polygon.extend({options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,t,n){this._map._projectLatlngs(this,e,t,n)||o.default.Polygon.prototype._projectLatlngs.call(this,e,t,n)},setLatLngs:function(e){return this._setLatLngs(e),this._map&&this._map._createPointMapping(this),this.redraw()},_convertLatLngs:function(e){const t=o.default.Polygon.prototype._convertLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),t},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),At=h(Mt),Lt=o.default.Polyline.extend({options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,t,n){this._map._projectLatlngs(this,e,t,n)||o.default.Polyline.prototype._projectLatlngs.call(this,e,t,n)},setLatLngs:function(e){const t=o.default.Polyline.prototype.setLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),t},addLatLng:function(e,t){const n=o.default.Polyline.prototype.addLatLng.call(this,e,t);return this._map&&this._map._createPointMapping(this),n},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),Et=h(Lt),wt=o.default.Rectangle.extend({options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND},_projectLatlngs:function(e,t,n){this._map._projectLatlngs(this,e,t,n)||o.default.Rectangle.prototype._projectLatlngs.call(this,e,t,n)},setLatLngs:function(e){const t=o.default.Rectangle.prototype.setLatLngs.call(this,e);return this._map&&this._map._createPointMapping(this),t},getElevation:function(){return this.options.elevation},setElevation:function(e){return this.options.elevation=e,null!==this._map&&this._map._createPointMapping(this),this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e,null!==this._map&&this._map._createPointMapping(this)),this},getElevationMode:function(){return this.options.elevationMode}}),Ct=h(wt);class Ft{constructor(e,t,n,i={}){this._map=void 0,this._name=void 0,this._geometryId=void 0,this.__geometryIdNeedsChanged=void 0,this._location=void 0,this.__locationNeedsChanged=void 0,this._indoorMapId=void 0,this._indoorMapFloorId=void 0,this._headingDegrees=void 0,this.__headingDegreesNeedsChanged=void 0,this._elevation=void 0,this.__elevationNeedsChanged=void 0,this._elevationMode=void 0,this.__elevationModeNeedsChanged=void 0,this.getLocation=()=>this._location,this.setLocation=e=>(this._location=o.default.latLng(e),this.__locationNeedsChanged=!0,this),this.getIndoorMapId=()=>this._indoorMapId,this.getIndoorMapFloorId=()=>this._indoorMapFloorId,this.getHeadingDegrees=()=>this._headingDegrees,this.setHeadingDegrees=e=>(this._headingDegrees=e,this.__headingDegreesNeedsChanged=!0,this),this.getElevation=()=>this._elevation,this.setElevation=e=>(this._elevation=e,this.__elevationNeedsChanged=!0,this),this.getElevationMode=()=>this._elevationMode,this.setElevationMode=e=>(F(e)&&(this._elevationMode=e,this.__elevationModeNeedsChanged=!0),this),this.getGeometryId=()=>this._geometryId,this.setGeometryId=e=>(this._geometryId=e,this.__geometryIdNeedsChanged=!0,this),this.getName=()=>this._name,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,e.props.addProp(this),this),this.remove=()=>(null!==this._map&&(this._map.props.removeProp(this),this._map=null),this),this._geometryIdNeedsChanged=()=>this.__geometryIdNeedsChanged,this._onGeometryIdChanged=()=>{this.__geometryIdNeedsChanged=!1},this._locationNeedsChanged=()=>this.__locationNeedsChanged,this._onLocationChanged=()=>{this.__locationNeedsChanged=!1},this._headingDegreesNeedsChanged=()=>this.__headingDegreesNeedsChanged,this._onHeadingDegreesChanged=()=>{this.__headingDegreesNeedsChanged=!1},this._elevationNeedsChanged=()=>this.__elevationNeedsChanged,this._onElevationChanged=()=>{this.__elevationNeedsChanged=!1},this._elevationModeNeedsChanged=()=>this.__elevationModeNeedsChanged,this._onElevationModeChanged=()=>{this.__elevationModeNeedsChanged=!1},this._map=null,this._name=e,this._geometryId=t,this.__geometryIdNeedsChanged=!1,this._location=o.default.latLng(n),this.__locationNeedsChanged=!1,this._indoorMapId=i.indoorMapId||"",this._indoorMapFloorId=i.indoorMapFloorId||0,this._headingDegrees=i.headingDegrees||0,this.__headingDegreesNeedsChanged=!1,this._elevation=i.elevation||0,this.__elevationNeedsChanged=!1,this._elevationMode=i.elevationMode||C.HEIGHT_ABOVE_GROUND,this.__elevationModeNeedsChanged=!1}}const Bt=h(Ft);class Pt{constructor(e,t){this._map=void 0,this._outerRing=void 0,this._holes=void 0,this._config=void 0,this._color=void 0,this.__colorNeedsChanged=void 0,this.getColor=()=>this._color,this.setColor=e=>(this._color=e,this.__colorNeedsChanged=!0,this),this.addHole=e=>(this._holes.push(St(e)),this),this.getHoles=()=>this._holes,this.getPoints=()=>this._outerRing,this.addTo=e=>(null!==this._map&&this.remove(),this._map=e,e._polygonModule.addPolygon(this),this),this.remove=()=>(null!==this._map&&(this._map._polygonModule.removePolygon(this),this._map=null),this),this._getConfig=()=>this._config,this._colorNeedsChanged=()=>this.__colorNeedsChanged,this._onColorChanged=()=>{this.__colorNeedsChanged=!1},this._map=null,this._outerRing=[],this._holes=[],this._config=t||{};let n=0,i=e;do{i=i[0],n++}while(Array.isArray(i));if(2===n)this._outerRing=St(e);else{if(3!==n)throw new Error("Incorrect array input format.");this._outerRing=St(e[0]),e.splice(1).forEach(e=>{this._holes.push(St(e))})}this._color=this._config.color||[0,0,255,128],this.__colorNeedsChanged=!0}}const St=e=>{const t=[];return e.forEach(function(e){t.push(o.default.latLng(e))}),t},Dt=h(Pt),Tt=o.default.Polyline.extend({initialize:function(e,t){o.default.Polyline.prototype.initialize.call(this,e,t||{})},options:{elevation:0,elevationMode:C.HEIGHT_ABOVE_GROUND,indoorMapId:"",indoorMapFloorId:0,weight:3,miterLimit:10},getPoints:function(){return this.getLatLngs()},getIndoorMapId:function(){return this.options.indoorMapId},getIndoorMapFloorId:function(){return this.options.indoorMapFloorId},getElevation:function(){return this.options.elevation},getElevationMode:function(){return this.options.elevationMode},getWidth:function(){return this.options.weight},getColor:function(){return this.options.color},getMiterLimit:function(){return this.options.miterLimit},setIndoorMapWithFloorId:function(e,t){return this.options.indoorMapId=e,this.options.indoorMapFloorId=t,this._needsNativeUpdate=!0,this},setElevation:function(e){return this.options.elevation=e,this._needsNativeUpdate=!0,this},setElevationMode:function(e){return F(e)&&(this.options.elevationMode=e),this._needsNativeUpdate=!0,this},setOptions:function(e){return this.setStyle(e)},setStyle:function(e){return o.default.Polyline.prototype.setStyle.call(this,e),this._needsNativeUpdate=!0,this},_needsNativeUpdate:!1,_update:function(){},beforeAdd:function(){},onAdd:function(){this._map._polylineModule.addPolyline(this)},onRemove:function(){this._map._polylineModule.removePolyline(this)},redraw:function(){}});var xt={__proto__:null,polygon:Dt,Polygon:Pt,polyline:h(Tt),Polyline:Tt};class Nt{constructor(e,t){this._nativeId=void 0,this._map=void 0,this._indoorMapId=void 0,this._indoorMapFloorId=void 0,this._outlinePolygons=void 0,this._isLoaded=void 0,this.remove=()=>(null!==this._map&&(this._map.indoorMapFloorOutlines._getImpl().removeIndoorMapFloorOutlineInformation(this),this._map=null),this),this._setNativeHandle=e=>{this._nativeId=e},this._setData=e=>{this._outlinePolygons=e,this._isLoaded=!0},this._nativeId=null,this._map=null,this._indoorMapId=e,this._indoorMapFloorId=t,this._outlinePolygons=[],this._isLoaded=!1}getIndoorMapId(){return this._indoorMapId}getIndoorMapFloorId(){return this._indoorMapFloorId}getIndoorMapFloorOutlinePolygons(){return this._outlinePolygons}getIsLoaded(){return this._isLoaded}getId(){return this._nativeId}addTo(e){return null!==this._map&&this.remove(),this._map=e,this._map.indoorMapFloorOutlines._getImpl().addIndoorMapFloorOutlineInformation(this),this}}const Ot=h(Nt);var kt=i({__proto__:null,Map:A,map:(e,t,n)=>{const i=(()=>{if(!ft){const e=document.createElement("script");e.src=`${mt}eeGeoWebGL.jgz`,e.onload=vt,document.body.appendChild(e),ft=!0}const e={locateFile:e=>`${mt}${e}`,onExit:t=>{if(1===t){let t="Error: wrld.js failed to initialize";e.ctx||(t="Error: WebGL unavailable in this browser"),gt.forEach(e=>{e.onError(t)})}}};return e})();e=(e=>{if(e instanceof HTMLElement)return e;if("string"==typeof e){const t=document.getElementById(e);if(t)return t}throw"No map container found"+(null===e?"":` with id "${e}"`)})(e);const o=document,r=window,a=gt.length,s=new ct(i),l=new Ae(a,s,e,t,r,o,i,n||{},()=>{delete gt[a]});return gt.push(l),(e=>{_t?window.createWrldModule(e):bt.push(e)})(i),l.leafletMap},indoors:W,space:v,themes:H,buildings:We,indoorMapEntities:et,indoorMapFloorOutlines:{__proto__:null,indoorMapFloorOutlineInformation:Ot,IndoorMapFloorOutlineInformation:Nt,IndoorMapFloorOutlinePolygon:nt,IndoorMapFloorOutlinePolygonRing:it},native:xt,getMapById:e=>gt[e],marker:S,Marker:P,circle:It,Circle:yt,heatmap:dt,Heatmap:ut,polygon:At,Polygon:Mt,polyline:Et,Polyline:Lt,rectangle:Ct,Rectangle:wt,popup:c,Popup:p,prop:Bt,Prop:Ft},[r]);window.L.Wrld=kt,e.Icon.Default.imagePath="https://unpkg.com/leaflet@1.0.1/dist/images/",module.exports=kt;
//# sourceMappingURL=wrld.cjs.map
